function utf8_decode(b){var d=[],c=0,e=0,f=0,g=0,h=0;for(b+="";c<b.length;)f=b.charCodeAt(c),f<128?(d[e++]=String.fromCharCode(f),c++):f>191&&f<224?(g=b.charCodeAt(c+1),d[e++]=String.fromCharCode((f&31)<<6|g&63),c+=2):(g=b.charCodeAt(c+1),h=b.charCodeAt(c+2),d[e++]=String.fromCharCode((f&15)<<12|(g&63)<<6|h&63),c+=3);return d.join("")}
function base64_decode(b){var d,c,e,f,g,h=0,j=0;f="";var l=[];if(!b)return b;b+="";do d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(h++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(b.charAt(h++)),e=d<<18|c<<12|f<<6|g,d=e>>16&255,c=e>>8&255,
e&=255,f==64?l[j++]=String.fromCharCode(d):g==64?l[j++]=String.fromCharCode(d,c):l[j++]=String.fromCharCode(d,c,e);while(h<b.length);f=l.join("");return f=utf8_decode(f)}
function utf8_encode(b){if(b===null||typeof b==="undefined")return"";b+="";var d="",c,e,f=0;c=e=0;for(var f=b.length,g=0;g<f;g++){var h=b.charCodeAt(g),j=null;h<128?e++:j=h>127&&h<2048?String.fromCharCode(h>>6|192)+String.fromCharCode(h&63|128):String.fromCharCode(h>>12|224)+String.fromCharCode(h>>6&63|128)+String.fromCharCode(h&63|128);j!==null&&(e>c&&(d+=b.slice(c,e)),d+=j,c=e=g+1)}e>c&&(d+=b.slice(c,f));return d}
function base64_encode(b){var d,c,e,f,g=0,h=0,j="",j=[];if(!b)return b;b=utf8_encode(b+"");do d=b.charCodeAt(g++),c=b.charCodeAt(g++),e=b.charCodeAt(g++),f=d<<16|c<<8|e,d=f>>18&63,c=f>>12&63,e=f>>6&63,f&=63,j[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);
while(g<b.length);j=j.join("");b=b.length%3;return(b?j.slice(0,b-3):j)+"===".slice(b||3)};var MAX_INTEGER=9007199254740992;function GameonWorld(b){this.mDomains=[];this.mModelList=[];this.mModelList2=[];this.mNewModels=[];this.mInDraw=!1;this.mSplashModel=void 0;this.mAmbientLight=[1,1,1,1];this.mAmbientLightChanged=!1;this.mApp=b;this.mViewHeight=this.mViewWidth=0;this.mModelList=[];this.mModelList2=[];this.mNewModels=[];GameonWorld.mWorld=this;this.addDomain("world",0,!0);this.addDomain("hud",1E4,!0)}
GameonWorld.prototype.initSplash=function(b,d){var c=new GameonModel("splash",this.mApp,void 0);c.createPlane(-1.5,-1,0,1.5,1,0,this.mApp.colors().white,void 0);this.mApp.textures().newTexture(b,"q_splash",d,!0);c.setTexture(this.mApp.textures().getTexture("q_splash"));var e=new GameonModelRef(void 0,this);e.mLoc=GameonWorld_Display.HUD;c.addref(e);this.mSplashModel=c;c.generate(b);c.mEnabled=!0};
GameonWorld.prototype.add=function(b){b.isValid()&&(this.mNewModels.indexOf(b)>=0&&console.error(" model alerady in "),this.mNewModels.push(b),b.generate())};GameonWorld.prototype.remove=function(b){var d=this.mModelList.indexOf(b);d>=0&&this.mModelList.splice(d,1);d=this.mModelList2.indexOf(b);d>=0&&this.mModelList2.splice(d,1);for(d=0;d<this.mDomains.length;d++)this.mDomains[d].remVisible(b,!0)};
GameonWorld.prototype.reinit=function(){this.mLockedDraw=!0;for(var b=this.mModelList.length,d=0;d<b;d++)this.mModelList[d].reset();this.mLockedDraw=!1};
GameonWorld.prototype.addModels=function(){for(var b=0;b<this.mNewModels.length;b++){var d=this.mNewModels[b];if(d.mIsModel){var c=this.mModelList2.indexOf(d);c>=0&&console.error(" model alerady in 1");d.generate();this.mModelList2.push(d)}else c=this.mModelList.indexOf(d),c>=0&&console.error(" model alerady in 2"),d.generate(),this.mModelList.push(d)}this.mNewModels=[]};
GameonWorld.prototype.draw=function(b,d){if(!this.mLockedDraw){if(this.mAmbientLightChanged)this.mAmbientLightChanged=!1,b.uniform4f(b.getUniformLocation(b.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3]);for(var c=0;c<this.mDomains.length;c++)this.mDomains[c].draw(b,d)}};
GameonWorld.prototype.prepare=function(b){b.enable(b.CULL_FACE);b.frontFace(b.CCW);b.clearColor(0,0,0,1);b.disable(b.STENCIL_TEST);b.enable(b.DEPTH_TEST);b.depthFunc(b.LEQUAL);console.log(" DEPTH_TEST "+b.getParameter(b.DEPTH_TEST));console.log(" DEPTH_RANGE "+b.getParameter(b.DEPTH_RANGE)[0]);console.log(" DEPTH_RANGE "+b.getParameter(b.DEPTH_RANGE)[1]);console.log(" DEPTH_FUNC "+b.getParameter(b.DEPTH_FUNC));console.log(" DEPTH_BITS "+b.getParameter(b.DEPTH_BITS));b.enable(b.BLEND);b.blendFunc(b.SRC_ALPHA,
b.ONE_MINUS_SRC_ALPHA);b.uniform4f(b.getUniformLocation(b.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])};GameonWorld.prototype.clear=function(){this.mLockedDraw=!0;this.mModelList.clear();this.mNewModels.clear();this.mTexts.clear();this.mTextsHud.clear();this.mLockedDraw=this.mLocked=!1;for(var b=0;b<this.mDomains.length;b++)this.mDomains[b].clear()};
GameonWorld.prototype.reinit=function(){this.mLockedDraw=!0;for(var b=this.mModelList.length,d=0;d<b;d++)this.mModelList[d].reset();this.mLockedDraw=!1};
GameonWorld.prototype.drawSplash=function(b){if(this.mSplashModel!=void 0){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);if(this.mAmbientLightChanged)this.mAmbientLightChanged=!1,b.uniform4f(b.getUniformLocation(b.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3]);this.mSplashModel.setState(LayoutArea_State.VISIBLE);this.mSplashModel.draw(b,MAX_INTEGER);this.mSplashModel.setState(LayoutArea_State.HIDDEN)}};
GameonWorld.prototype.setAmbientLight=function(b,d,c,e){this.mAmbientLight[0]=b;this.mAmbientLight[1]=d;this.mAmbientLight[2]=c;this.mAmbientLight[3]=e;this.mAmbientLightChanged=!0};GameonWorld.prototype.getAmbientLight=function(){var b=Array(4);b[0]=this.mAmbientLight[0];b[1]=this.mAmbientLight[1];b[2]=this.mAmbientLight[2];b[3]=this.mAmbientLight[3];return b};
GameonWorld.prototype.setAmbientLightGl=function(b,d,c,e,f){this.mAmbientLight[0]=b;this.mAmbientLight[1]=d;this.mAmbientLight[2]=c;this.mAmbientLight[3]=e;this.mAmbientLightChanged=!0;f.uniform4f(f.getUniformLocation(f.program,"ambientL"),this.mAmbientLight[0],this.mAmbientLight[1],this.mAmbientLight[2],this.mAmbientLight[3])};GameonWorld.prototype.getDomain=function(b){for(var d=0;d<this.mDomains.length;d++){var c=this.mDomains[d];if(c.mRenderId==b)return c}};
GameonWorld.prototype.getDomainByName=function(b){for(var d=0;d<this.mDomains.length;d++){var c=this.mDomains[d];if(c.mName==b)return c}};
GameonWorld.prototype.addDomain=function(b,d,c){for(var e=0;e<this.mDomains.length;e++){var f=this.mDomains[e];if(f.mName==b||f.mRenderId==d)return}b=new RenderDomain(b,this.mApp,this.mViewWidth,this.mViewHeight);c&&b.show();b.mRenderId=d;c=!1;for(e=0;e<this.mDomains.length;e++)if(this.mDomains[e].mRenderId>d){this.mDomains.splice(e,0,b);c=!0;break}c||this.mDomains.push(b);return b};
GameonWorld.prototype.onSurfaceChanged=function(b,d,c){this.mViewWidth=d;this.mViewHeight=c;for(var e=0;e<this.mDomains.length;e++)this.mDomains[e].onSurfaceChanged(b,d,c)};GameonWorld.prototype.onSurfaceCreated=function(b){for(var d=0;d<this.mDomains.length;d++)this.mDomains[d].onSurfaceCreated(b)};
GameonWorld.prototype.domainCreate=function(b,d,c){this.getDomainByName(b)==void 0&&(b=this.addDomain(b,parseInt(d),!1),b!=void 0&&c!=void 0&&c.length>0&&(d=Array(4),ServerkoParse.parseFloatArray(d,c),b.setBounds(this.mViewWidth,this.mViewHeight,d)))};GameonWorld.prototype.domainRemove=function(b){b=this.getDomainByName(b);b!=void 0&&(b.clear(),b=this.mDomains.indexOf(b),b>=0&&this.mDomains.splice(b,1))};GameonWorld.prototype.gerRelativeX=function(b){return b/this.mViewWidth};
GameonWorld.prototype.gerRelativeY=function(b){return b/this.mViewHeight};GameonWorld.prototype.domainShow=function(b){b=this.getDomainByName(b);b!=void 0&&b.show()};GameonWorld.prototype.domainHide=function(b){b=this.getDomainByName(b);b!=void 0&&b.hide()};GameonWorld.prototype.onTouchModel=function(b,d,c){for(var e=void 0,f=this.mDomains.length-1;f>=0;f--)if(e=this.mDomains[f].onTouchModel(b,d,c,!0),e!=void 0)return e;return null};
GameonWorld.prototype.domainPan=function(b,d,c,e){b=this.getDomainByName(b);b!=void 0&&b.pan(d,c,e)};GameonWorld.prototype.panDomain=function(b,d){for(var c=this.mDomains.length-1;c>=0;c--)if(this.mDomains[c].onPan(b,d))return!0;return!1};GameonWorld.prototype.resetDomainPan=function(){for(var b=this.mDomains.length-1;b>=0;b--)this.mDomains[b].resetPan()};function GameonModelRef(b,d){this.mStaticBounds=[-0.5,-0.5,0,1,0.5,-0.5,0,1,-0.5,0.5,0,1,0.5,0.5,0,1];this.mBounds=Array(16);this.mAreaPosition=[0,0,0];this.mAreaRotation=[0,0,0];this.mPosition=[0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mScaleAdd=[1,1,1];this.mTransformOwner=!1;this.mOwnerMax=this.mOwner=0;this.mParent=b;this.mVisible=this.mAdded=!1;this.mEnabled=!0;this.mLoc=0;this.mMatrix=new J3DIMatrix4;this.mAnimating=!1;this.mAnimData=void 0;this.mLoc=d;this.mRefAlias=this.mPsyData=
void 0}GameonModelRef.prototype.loc=function(){return this.mLoc};
GameonModelRef.prototype.clear=function(){this.mPosition[0]=0;this.mPosition[1]=0;this.mPosition[2]=0;this.mRotation[0]=0;this.mRotation[1]=0;this.mRotation[2]=0;this.mScale[0]=1;this.mScale[1]=1;this.mScale[2]=1;this.mAreaPosition[0]=0;this.mAreaPosition[1]=0;this.mAreaPosition[2]=0;this.mAreaRotation[0]=0;this.mAreaRotation[1]=0;this.mAreaRotation[2]=0;this.mScaleAdd[0]=1;this.mScaleAdd[1]=1;this.mScaleAdd[2]=1;this.mTransformOwner=!1;this.mOwner=0;this.mPsyData=this.mPsyData.mRef=void 0};
GameonModelRef.prototype.setOwner=function(b,d){this.mOwner=b;this.mOwnerMax=d;this.mTransformOwner=!0};GameonModelRef.prototype.setPosition=function(b,d,c){d==void 0?(this.mPosition[0]=b[0],this.mPosition[1]=b[1],this.mPosition[2]=b[2]):(this.mPosition[0]=b,this.mPosition[1]=d,this.mPosition[2]=c)};
GameonModelRef.prototype.setAreaPosition=function(b,d,c){d==void 0?(this.mAreaPosition[0]=b[0],this.mAreaPosition[1]=b[1],this.mAreaPosition[2]=b[2]):(this.mAreaPosition[0]=b,this.mAreaPosition[1]=d,this.mAreaPosition[2]=c)};GameonModelRef.prototype.addPosition=function(b,d,c){d==void 0?(this.mPosition[0]+=b[0],this.mPosition[1]+=b[1],this.mPosition[2]+=b[2]):(this.mPosition[0]+=b,this.mPosition[1]+=d,this.mPosition[2]+=c)};
GameonModelRef.prototype.addAreaPosition=function(b,d,c){d==void 0?(this.mAreaPosition[0]+=b[0],this.mAreaPosition[1]+=b[1],this.mAreaPosition[2]+=b[2]):(this.mAreaPosition[0]+=b,this.mAreaPosition[1]+=d,this.mAreaPosition[2]+=c)};GameonModelRef.prototype.setScale=function(b,d,c){d==void 0?(this.mScale[0]=b[0],this.mScale[1]=b[1],this.mScale[2]=b[2]):(this.mScale[0]=b,this.mScale[1]=d,this.mScale[2]=c)};
GameonModelRef.prototype.setRotate=function(b,d,c){d==void 0?(this.mRotation[0]=b[0],this.mRotation[1]=b[1],this.mRotation[2]=b[2]):(this.mRotation[0]=b,this.mRotation[1]=d,this.mRotation[2]=c)};GameonModelRef.prototype.setAreaRotate=function(b,d,c){d==void 0?(this.mAreaRotation[0]=b[0],this.mAreaRotation[1]=b[1],this.mAreaRotation[2]=b[2]):(this.mAreaRotation[0]=b,this.mAreaRotation[1]=d,this.mAreaRotation[2]=c)};
GameonModelRef.prototype.addRotation=function(b,d,c){this.mRotation[0]+=b;this.mRotation[1]+=d;this.mRotation[2]+=c};GameonModelRef.prototype.addAreaRotation=function(b,d,c){this.mAreaRotation[0]+=b;this.mAreaRotation[1]+=d;this.mAreaRotation[2]+=c};GameonModelRef.prototype.apply=function(){if(!this.mAdded)this.mAdded=!0,this.mParent.addref(this)};GameonModelRef.prototype.remove=function(){this.mParent.removeref(this);this.mAdded=!1;this.setVisible(!1)};
GameonModelRef.prototype.copy=function(b){this.mPosition[0]=b.mPosition[0];this.mPosition[1]=b.mPosition[1];this.mPosition[2]=b.mPosition[2];this.mScale[0]=b.mScale[0];this.mScale[1]=b.mScale[1];this.mScale[2]=b.mScale[2];this.mScaleAdd[0]=b.mScaleAdd[0];this.mScaleAdd[1]=b.mScaleAdd[1];this.mScaleAdd[2]=b.mScaleAdd[2];this.mRotation[0]=b.mRotation[0];this.mRotation[1]=b.mRotation[1];this.mRotation[2]=b.mRotation[2];this.mAreaPosition[0]=b.mAreaPosition[0];this.mAreaPosition[1]=b.mAreaPosition[1];
this.mAreaPosition[2]=b.mAreaPosition[2];this.mAreaRotation[0]=b.mAreaRotation[0];this.mAreaRotation[1]=b.mAreaRotation[1];this.mAreaRotation[2]=b.mAreaRotation[2];this.mLoc=b.mLoc};GameonModelRef.prototype.setScaleRef=function(b){this.mScale[0]=b.mScale[0];this.mScale[1]=b.mScale[1];this.mScale[2]=b.mScale[2]};GameonModelRef.prototype.setRotation=function(b){this.mRotation[0]=b.mRotation[0];this.mRotation[1]=b.mRotation[1];this.mRotation[2]=b.mRotation[2]};
GameonModelRef.prototype.distxy=function(b){return Math.sqrt((b.mPosition[0]-this.mPosition[0])*(b.mPosition[0]-this.mPosition[0])+(b.mPosition[1]-this.mPosition[1])*(b.mPosition[1]-this.mPosition[1]))};GameonModelRef.prototype.distxyMat=function(b){return Math.sqrt((b.mMatrix[12]-this.mMatrix[12])*(b.mMatrix[12]-this.mMatrix[12])+(b.mMatrix[13]-this.mMatrix[13])*(b.mMatrix[13]-this.mMatrix[13]))};
GameonModelRef.prototype.set=function(){this.mMatrix.makeIdentity();(this.mAreaPosition[0]!=0||this.mAreaPosition[1]!=0||this.mAreaPosition[2]!=0)&&this.mMatrix.translate(this.mAreaPosition[0],this.mAreaPosition[1],this.mAreaPosition[2]);if(this.mAreaRotation[0]!=0||this.mAreaRotation[1]!=0||this.mAreaRotation[2]!=0)this.mMatrix.rotate(this.mAreaRotation[0],1,0,0),this.mMatrix.rotate(this.mAreaRotation[1],0,1,0),this.mMatrix.rotate(this.mAreaRotation[2],0,0,1);(this.mPosition[0]!=0||this.mPosition[1]!=
0||this.mPosition[2]!=0)&&this.mMatrix.translate(this.mPosition[0],this.mPosition[1],this.mPosition[2]);if(this.mRotation[0]!=0||this.mRotation[1]!=0||this.mRotation[2]!=0)this.mMatrix.rotate(this.mRotation[0],1,0,0),this.mMatrix.rotate(this.mRotation[1],0,1,0),this.mMatrix.rotate(this.mRotation[2],0,0,1);(this.mScale[0]!=1||this.mScale[1]!=1||this.mScale[2]!=1||this.mScaleAdd[0]!=1||this.mScaleAdd[1]!=1||this.mScaleAdd[2]!=1)&&this.mMatrix.scale(this.mScale[0]*this.mScaleAdd[0],this.mScale[1]*this.mScaleAdd[1],
this.mScale[2]*this.mScaleAdd[2]);var b=this.mMatrix.getAsArray();GMath.matrixVecMultiply2(b,this.mStaticBounds,0,this.mBounds,0);GMath.matrixVecMultiply2(b,this.mStaticBounds,4,this.mBounds,4);GMath.matrixVecMultiply2(b,this.mStaticBounds,8,this.mBounds,8);GMath.matrixVecMultiply2(b,this.mStaticBounds,12,this.mBounds,12)};GameonModelRef.prototype.translate=function(b,d,c){this.mMatrix.translate(b,d,c)};
GameonModelRef.prototype.setVisible=function(b){this.mVisible=b;this.mEnabled=!0;b?this.mParent!=void 0&&this.mParent.addVisibleRef(this):(this.mParent!=void 0&&this.mParent.remVisibleRef(this),this.mAnimating&&this.mAnimData!=void 0&&this.cancelAnimation())};GameonModelRef.prototype.cancelAnimation=function(){if(this.mAnimating&&this.mAnimData!=void 0)this.mAnimData.cancelAnimation(this),this.mAnimating=!1};GameonModelRef.prototype.getVisible=function(){return this.mVisible};
GameonModelRef.prototype.setParent=function(b){this.mParent=b};GameonModelRef.prototype.copyMat=function(b){this.mMatrix.load(b.mMatrix)};GameonModelRef.prototype.setAddScale=function(b,d,c){d==void 0?(this.mScaleAdd[0]=b[0],this.mScaleAdd[1]=b[1],this.mScaleAdd[2]=b[2]):(this.mScaleAdd[0]=b,this.mScaleAdd[1]=d,this.mScaleAdd[2]=c)};
GameonModelRef.prototype.mulScale=function(b,d,c){d==void 0?(this.mScale[0]*=b[0],this.mScale[1]*=b[1],this.mScale[2]*=b[2]):(this.mScale[0]*=b,this.mScale[1]*=d,this.mScale[2]*=c)};GameonModelRef.prototype.intersectsRay=function(b,d,c){b=GMath.rayIntersectsBounds(b,d,this.mBounds,c);return b>=0?b:1E6};GameonModelRef.prototype.getAnimData=function(b){if(this.mAnimData==void 0)this.mAnimData=new AnimData(-1,b);return this.mAnimData};
GameonModelRef.prototype.activateAnim=function(){if(this.mAnimData!=void 0)this.mAnimating=!0,this.mAnimData.activate()};GameonModelRef.prototype.animate=function(b){if(this.mAnimData!=void 0&&this.mAnimData.process2(this,b))this.mAnimating=!1};GameonModelRef.prototype.animating=function(){return this.mAnimating};GameonModelRef.prototype.matrix=function(){return this.mMatrix};GameonModelRef.prototype.assignPsyData=function(b){this.mPsyData=b};
GameonModelRef.prototype.copyData=function(b){for(var d=0;d<3;d++)this.mAreaPosition[d]=b.mAreaPosition[d],this.mAreaRotation[d]=b.mAreaRotation[d],this.mPosition[d]=b.mPosition[d],this.mRotation[d]=b.mRotation[d],this.mScale[d]=b.mScale[d],this.mScaleAdd[d]=b.mScaleAdd[d];this.mOwner=b.mOwner;this.mOwnerMax=b.mOwnerMax;this.mTransformOwner=b.mTransformOwner};
GameonModelRef.prototype.resizeMatrices=function(){this.mAreaPosition=[0,0,0,0];this.mAreaRotation=[0,0,0,0];this.mPosition=[0,0,0,0];this.mRotation=[0,0,0,0];this.mScale=[0,0,0,0];this.mScaleAdd=[0,0,0,0]};GameonModelRef.prototype.distToCenter=function(b){return Math.sqrt((b[0]-this.mMatrix[12])*(b[0]-this.mMatrix[12])+(b[1]-this.mMatrix[13])*(b[1]-this.mMatrix[13])+(b[2]-this.mMatrix[14])*(b[2]-this.mMatrix[14]))};function TextRender(b){this.mTexts=[];this.mVisibleTexts=[];this.mWorld=b}TextRender.prototype.remove=function(b){var d=this.mTexts.indexOf(b);d>=0&&(this.mTexts.splice(d,1),this.removeVisible(b))};TextRender.prototype.add=function(b,d){this.mTexts.indexOf(b)<0&&(this.mTexts.push(b),d&&this.addVisible(b))};TextRender.prototype.render=function(b){var d=this.mVisibleTexts.length;if(d!=0)for(var c=0;c<d;c++){var e=this.mVisibleTexts[c];e.getVisible()&&e.draw(b,c)}};
TextRender.prototype.clear=function(){this.mTexts=[];this.mVisibleTexts=[]};TextRender.prototype.addVisible=function(b){this.mVisibleTexts.indexOf(b)<0&&this.mVisibleTexts.push(b)};TextRender.prototype.removeVisible=function(b){b=this.mVisibleTexts.indexOf(b);b>=0&&this.mVisibleTexts.splice(b,1)};function TextItem(b,d,c,e,f,g,h,j,l,m,k,n){this.mApp=b;this.mX=d;this.mY=c;this.mZ=g;this.mW=e;this.mH=f;this.mText=h;this.mNum=j;this.mOffset=l;this.mLoc=m;this.mColors=n;this.mCentered=!1;this.mVisible=!0;this.mDirX=1;this.mDirY=0;this.mOffset=l;this.mRef=new GameonModelRef(void 0);this.mRef.mLoc=m;this.mParent=this.mModel=void 0;this.setOrientation(k);this.set(!0)}
TextItem.prototype.updateText=function(b,d){var c=!1;this.mText.length!=b.length&&this.mNum<0&&(c=!0);this.mText=b;this.mLoc=d;this.mRef.mLoc=d;this.set(c);return c};
TextItem.prototype.setOrientation=function(b){if(b==LayoutArea_Layout.WEST_EAST||b==LayoutArea_Layout.NONE||b==LayoutArea_Layout.HORIZONTAL)this.mDirX=1,this.mDirY=0;else if(b==LayoutArea_Layout.EAST_WEST)this.mDirX=-1,this.mDirY=0;else if(b==LayoutArea_Layout.NORTH_SOUTH||b==LayoutArea_Layout.VERTICAL)this.mDirX=0,this.mDirY=-1;else if(b==LayoutArea_Layout.SOUTH_NORTH)this.mDirX=0,this.mDirY=1;if(b==LayoutArea_Layout.HORIZONTAL||b==LayoutArea_Layout.VERTICAL)this.mCentered=!0};
TextItem.prototype.setOffset=function(b){this.mOffset=b};
TextItem.prototype.set=function(b){this.mRef.setVisible(!0);if(this.mText!=void 0){this.mModel=new GameonModel("letter",this.mApp);this.mModel.mWorld=void 0;this.mModel.mLoc=this.mLoc;this.mModel.addref(this.mRef);if(this.mDirX!=0){var d=this.mText.length;if(d==0)return;var c=this.mNum;c<=0&&(c=d);if(b)this.mRef.mPosition[0]=this.mX,this.mRef.mPosition[1]=this.mY,this.mRef.mPosition[2]=this.mZ,this.mRef.mScale[0]=this.mW/c,this.mRef.mScale[1]=this.mH;b=-c/2+0.5;this.mCentered&&this.mNum>0&&(b=-d/
2+0.5);for(var e=0.0625,f=0;f<d&&f<c;f++){var g=this.getVal(this.mText.charCodeAt(f)),h=e*(g%16),g=e*Math.floor(g/16),j=h+e,l=g+e;h+=this.mApp.mTextures.mU1;g+=this.mApp.mTextures.mV1;j-=this.mApp.mTextures.mU2;l-=this.mApp.mTextures.mV2;this.mDirX>0?this.mModel.createPlaneTex2(b-0.48,-0.48,0,b+0.48+this.mApp.mTextures.mCp,0.48,0,h,g,j,l,this.mColors,f,1/Math.max(d,c)):this.mModel.createPlaneTex2(c-1-b-0.48-this.mApp.mTextures.mCp,-0.48,0,c-1-b+0.48,0.48,0,h,g,j,l,this.mColors,f,1/Math.max(d,c));
b+=1}}else{d=this.mText.length;if(d==0)return;c=this.mNum;c<=0&&(c=d);if(b)this.mRef.mPosition[0]=this.mX,this.mRef.mPosition[1]=this.mY,this.mRef.mPosition[2]=this.mZ,this.mRef.mScale[0]=this.mW,this.mRef.mScale[1]=this.mH/c;b=c/2-0.5;this.mCentered&&this.mNum>0&&(b=d/2-0.5);e=0.0625;for(f=0;f<d&&f<c;f++)g=this.getVal(this.mText.charCodeAt(f)),h=e*(g%16),g=e*Math.floor(g/16),j=h+e,l=g+e,h+=this.mApp.mTextures.mU1,g+=this.mApp.mTextures.mV1,j-=this.mApp.mTextures.mU2,l-=this.mApp.mTextures.mV2,this.mDirY>
0?this.mModel.createPlaneTex(-0.48,b-0.48,0,0.48,b+0.48+this.mApp.mTextures.mCp,0,h,g,j,l,this.mColors,f,1/Math.max(d,c)):this.mModel.createPlaneTex(-0.48,c-1-b-0.48-this.mApp.mTextures.mCp,0,0.48,c-1-b+0.48,0,h,g,j,l,this.mColors,f,1/Math.max(d,c)),b+=1}this.mModel.setTexture(this.mApp.mTextures.get(TextureFactory_Type.FONT));this.mModel.generate(this.mApp.gl);this.mModel.mEnabled=!0}};
TextItem.prototype.draw=function(b){if(!(this.mModel==void 0||this.mText==void 0||this.mText.length==0))if(this.mModel.setupRef(b),this.mOffset>0){var d=this.mApp.mColors.getColorId(this.mOffset),c=this.mApp.mWorld.getAmbientLight();this.mApp.mWorld.setAmbientLightGl(c[0]*d.red,c[1]*d.green,c[2]*d.blue,c[3]*d.alpha,b);this.mModel.setupRef(b);this.mModel.drawRef(b,this.mRef);this.mApp.mWorld.setAmbientLightGl(c[0],c[1],c[2],c[3],b)}else this.mModel.drawRef(b,this.mRef)};
TextItem.prototype.getVal=function(b){var d=32;if(b<0||b>255)switch(b){case 268:d=0;break;case 269:d=1;break;case 262:d=2;break;case 263:d=3;break;case 272:d=208;break;case 273:d=240;break;case 352:d=138;break;case 353:d=154;break;case 381:d=142;break;case 382:d=158;break;default:d=38}else d=b;return d};TextItem.prototype.setParent=function(b){this.mParent=b};
TextItem.prototype.setVisible=function(b){(this.mVisible=b)?this.mParent.addVisible(this):this.mParent.removeVisible(this);this.mRef!=void 0&&this.mRef.setVisible(b)};TextItem.prototype.getVisible=function(){return this.mVisible};TextItem.prototype.setPosition=function(b,d,c,e,f){this.mX=b;this.mY=d;this.mZ=c;this.mW=e;this.mH=f;this.setRef()};
TextItem.prototype.setRef=function(){if(this.mRef!=void 0)if(this.mDirX!=0){var b=this.mNum;if(b<=0)b=this.mText.length;this.mRef.mPosition[0]=this.mX;this.mRef.mPosition[1]=this.mY;this.mRef.mPosition[2]=this.mZ;this.mRef.mScale[0]=this.mW/b;this.mRef.mScale[1]=this.mH}else{b=this.mNum;if(b<=0)b=this.mText.length;this.mRef.mPosition[0]=this.mX;this.mRef.mPosition[1]=this.mY;this.mRef.mPosition[2]=this.mZ;this.mRef.mScale[0]=this.mW;this.mRef.mScale[1]=this.mH/b}};TextItem.prototype.ref=function(){return this.mRef};
TextItem.prototype.setParentLoc=function(b){this.mRef!=void 0&&(this.mRef.setAreaPosition(b.mLocation),this.mRef.setAreaRotate(b.mRotation),this.mRef.mulScale(b.mBounds),this.mRef.setAddScale(b.mScale),this.mRef.set())};function AnimData_AnimFrame(){this.mScale=void 0;this.mScaleAnim=!1;this.mRotate=void 0;this.mRotateAnim=!1;this.mTranslate=void 0;this.mTranslateAnim=!1;this.mRotate2=void 0;this.mRotate2Anim=!1;this.mTranslate2=void 0;this.mTranslate2Anim=!1}AnimData_Type={NONE:0,REF:1,COLOR:2,SCROLLER:3};
AnimData.prototype.reset=function(){this.mTimeStep=this.mSteps=this.mRefCount=0;this.mActive=!1;this.mRepeat=1;this.mToFinish=!1;this.mType=AnimData_Type.REF;this.mCallback=void 0;this.restore();if(this.mSavedRef!=void 0)this.mSavedRef.set(),this.mSavedRef=void 0;this.mApp.anims().decCount();this.mPerctVal=-1;this.mPerctDiff=this.mPerctMax=this.mPerctMin=0;if(this.mAreaOwner!=void 0)this.mAreaOwner=this.mAreaOwner.mScollerAnim=void 0};
AnimData.prototype.restore=function(){this.mType==AnimData_Type.COLOR&&this.setColorEnd()};AnimData.prototype.setColorStart=function(){var b=this.mColorPool[0];this.mApp.world().setAmbientLight(b.red,b.green,b.blue,b.alpha)};AnimData.prototype.setColorEnd=function(){var b=this.mColorPool[this.mRefCount-1];this.mApp.world().setAmbientLight(b.red,b.green,b.blue,b.alpha)};
AnimData.prototype.setRef=function(b){b==0&&(b=1);perct=b/this.mAnimDelay;var d=Math.floor(perct*this.mSteps);d>this.mSteps-1&&(d=this.mSteps-1);if(d>this.mMaxFrames-1||d<0)return this.reset(),1;if(this.mType==AnimData_Type.COLOR)this.mCurrSourceCol=this.mColorPool[d],this.mCurrDestCol=this.mColorPool[d+1];return rest=(b-d*this.mTimeStep)/this.mTimeStep};
AnimData.prototype.calcLinearColor=function(b,d,c,e){var f=d.red,b=d.blue,g=d.green,d=d.alpha;f+=(c.red-f)*e;g+=(c.green-g)*e;b+=(c.blue-b)*e;c=d+(c.alpha-d)*e;this.mApp.world().setAmbientLight(f,g,b,c)};AnimData.prototype.copyColor=function(b,d){d.alpha=b.alpha;d.red=b.red;d.blue=b.blue;d.green=b.green};AnimData.prototype.setCallback=function(b){this.mCallback=b};
AnimData.prototype.addFrameColor=function(b){if(this.mColorPool==void 0){this.mColorPool=[];for(var d=0;d<this.mMaxFrames;d++)this.mColorPool.push(new GLColor(0))}this.mRefCount<this.mMaxFrames&&(d=this.mColorPool[this.mRefCount++],this.copyColor(b,d))};AnimData.prototype.copyColor=function(b,d){d.alpha=b.alpha;d.red=b.red;d.blue=b.blue;d.green=b.green};
AnimData.prototype.storeArrays=function(b,d,c){if(b.mTranslateAnim==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]=c.mPosition[0];b.mTranslate[1]=c.mPosition[1];b.mTranslate[2]=c.mPosition[2]}if(b.mRotateAnim==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]=c.mRotation[0];b.mRotate[1]=c.mRotation[1];b.mRotate[2]=c.mRotation[2]}if(b.mScaleAnim==!0){if(b.mScale==void 0)b.mScale=[0,0,0];b.mScale[0]=c.mScale[0];b.mScale[1]=c.mScale[1];b.mScale[2]=c.mScale[2]}if(b.mTranslate2Anim==
!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]=c.mAreaPosition[0];b.mTranslate2[1]=c.mAreaPosition[1];b.mTranslate2[2]=c.mAreaPosition[2]}if(b.mRotate2Anim==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]=c.mAreaRotation[0];b.mRotate2[1]=c.mAreaRotation[1];b.mRotate2[2]=c.mAreaRotation[2]}};
AnimData.prototype.storeArrays3=function(b,d,c,e,f){if(b.mTranslateAnim==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]=(e.mPosition[0]-c.mPosition[0])*f+c.mPosition[0];b.mTranslate[1]=(e.mPosition[1]-c.mPosition[1])*f+c.mPosition[1];b.mTranslate[2]=(e.mPosition[2]-c.mPosition[2])*f+c.mPosition[2]}if(b.mRotateAnim==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]=(e.mRotation[0]-c.mRotation[0])*f+c.mRotation[0];b.mRotate[1]=(e.mRotation[1]-c.mRotation[1])*f+c.mRotation[1];
b.mRotate[2]=(e.mRotation[2]-c.mRotation[2])*f+c.mRotation[2]}if(b.mScaleAnim==!0){if(b.mScale==void 0)b.mScale=[0,0,0];b.mScale[0]=(e.mScale[0]-c.mScale[0])*f+c.mScale[0];b.mScale[1]=(e.mScale[1]-c.mScale[1])*f+c.mScale[1];b.mScale[2]=(e.mScale[2]-c.mScale[2])*f+c.mScale[2]}if(b.mTranslate2Anim==!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]=(e.mAreaPosition[0]-c.mAreaPosition[0])*f+c.mAreaPosition[0];b.mTranslate2[1]=(e.mAreaPosition[1]-c.mAreaPosition[1])*f+c.mAreaPosition[1];
b.mTranslate2[2]=(e.mAreaPosition[2]-c.mAreaPosition[2])*f+c.mAreaPosition[2]}if(b.mRotate2Anim==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]=(e.mAreaRotation[0]-c.mAreaRotation[0])*f+c.mAreaRotation[0];b.mRotate2[1]=(e.mAreaRotation[1]-c.mAreaRotation[1])*f+c.mAreaRotation[1];b.mRotate2[2]=(e.mAreaRotation[2]-c.mAreaRotation[2])*f+c.mAreaRotation[2]}};
AnimData.prototype.storeArrays2=function(b,d,c){d=0;if(b.mTranslateAnim==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]=c[d++];b.mTranslate[1]=c[d++];b.mTranslate[2]=c[d++]}if(b.mRotateAnim==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]=c[d++];b.mRotate[1]=c[d++];b.mRotate[2]=c[d++]}if(b.mScaleAnim==!0){if(b.mScale==void 0)b.mScale=[0,0,0];b.mScale[0]=c[d++];b.mScale[1]=c[d++];b.mScale[2]=c[d++]}if(b.mTranslate2Anim==!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]=
c[d++];b.mTranslate2[1]=c[d++];b.mTranslate2[2]=c[d++]}if(b.mRotate2Anim==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]=c[d++];b.mRotate2[1]=c[d++];b.mRotate2[2]=c[d++]}};
AnimData.prototype.addArrays=function(b,d,c){if(b.mTranslateAnim==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]+=c.mPosition[0];b.mTranslate[1]+=c.mPosition[1];b.mTranslate[2]+=c.mPosition[2]}if(b.mRotateAnim==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]+=c.mRotation[0];b.mRotate[1]+=c.mRotation[1];b.mRotate[2]+=c.mRotation[2]}if(b.mScaleAnim==!0){if(b.mScale==void 0)b.mScale=[0,0,0];b.mScale[0]*=c.mScale[0];b.mScale[1]*=c.mScale[1];b.mScale[2]*=c.mScale[2]}if(b.mTranslate2Anim==
!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]+=c.mAreaPosition[0];b.mTranslate2[1]+=c.mAreaPosition[1];b.mTranslate2[2]+=c.mAreaPosition[2]}if(b.mRotate2Anim==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]+=c.mAreaRotation[0];b.mRotate2[1]+=c.mAreaRotation[1];b.mRotate2[2]+=c.mAreaRotation[2]}};
AnimData.prototype.perctArrays=function(b,d,c,e){c=GMath.dist(c,e);if(b.mTranslateAnim==!0&&d.translateActive==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]+=d.translate[0]*c;b.mTranslate[1]+=d.translate[1]*c;b.mTranslate[2]+=d.translate[2]*c}if(b.mRotateAnim==!0&&d.rotateActive==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]+=d.rotate[0]*c;b.mRotate[1]+=d.rotate[1]*c;b.mRotate[2]+=d.rotate[2]*c}if(b.mScaleAnim==!0&&d.scaleActive==!0){if(b.mScale==void 0)b.mScale=[0,0,
0];b.mScale[0]*=d.scale[0]*c;b.mScale[1]*=d.scale[1]*c;b.mScale[2]*=d.scale[2]*c}if(b.mTranslate2Anim==!0&&d.translate2Active==!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]+=d.translate2[0]*c;b.mTranslate2[1]+=d.translate2[1]*c;b.mTranslate2[2]+=d.translate2[2]*c}if(b.mRotate2Anim==!0&&d.rotate2Active==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]+=d.rotate2[0]*c;b.mRotate2[1]+=d.rotate2[1]*c;b.mRotate2[2]+=d.rotate2[2]*c}};
AnimData.prototype.clearArrays=function(b){if(b.mTranslateAnim==!0){if(b.mTranslate==void 0)b.mTranslate=[0,0,0];b.mTranslate[0]=0;b.mTranslate[1]=0;b.mTranslate[2]=0}if(b.mRotateAnim==!0){if(b.mRotate==void 0)b.mRotate=[0,0,0];b.mRotate[0]=0;b.mRotate[1]=0;b.mRotate[2]=0}if(b.mScaleAnim==!0){if(b.mScale==void 0)b.mScale=[0,0,0];b.mScale[0]=1;b.mScale[1]=1;b.mScale[2]=1}if(b.mTranslate2Anim==!0){if(b.mTranslate2==void 0)b.mTranslate2=[0,0,0];b.mTranslate2[0]=0;b.mTranslate2[1]=0;b.mTranslate2[2]=
0}if(b.mRotate2Anim==!0){if(b.mRotate2==void 0)b.mRotate2=[0,0,0];b.mRotate2[0]=0;b.mRotate2[1]=0;b.mRotate2[2]=0}};AnimData.prototype.fillFrameEnd=function(b,d,c,e,f){b=d.frames[d.frames.length-1];this.storeArrays2(this.mEnd,b,c,e);b.operation!=void 0&&b.operation=="add"&&this.addArrays(this.mEnd,b,f)};AnimData.prototype.fillFrameEnd2=function(b,d,c){b=d.frames[d.frames.length-1];this.clearArrays(this.mEnd,b);this.addArrays(this.mEnd,b,c)};
AnimData.prototype.fillFrameStart=function(b,d,c){this.storeArrays(this.mStart,d.frames[0],c)};
AnimData.prototype.setup=function(b,d,c,e){if(this.mStart==void 0)this.mStart=new AnimData_AnimFrame;if(this.mEnd==void 0)this.mEnd=new AnimData_AnimFrame;this.maskFrames2(this.mStart,b.frames[0]);this.maskFrames2(this.mEnd,b.frames[b.frames.length-1]);this.clearArrays(this.mStart,b.frames[0]);this.clearArrays(this.mEnd,b.frames[b.frames.length-1]);this.fillFrameStart(this.mStart,b,e);this.fillFrameEnd(this.mEnd,b,d,c,e)};
AnimData.prototype.setup2=function(b,d,c){if(this.mStart==void 0)this.mStart=new AnimData_AnimFrame;if(this.mEnd==void 0)this.mEnd=new AnimData_AnimFrame;b.frames.length==1&&this.addFrame(b.frames[0],c);this.maskFrames(this.mStart,this.mEnd,d,c);this.maskFrame(this.mStart,d,c);this.fillFrameStart(this.mStart,b,d);this.fillFrameEnd2(this.mEnd,b,c);b.frames.length>2&&this.fillFrames(b,d,c)};
AnimData.prototype.addFrame=function(b,d){b.rotateActive==!0&&b.rotate!=void 0&&(d.mRotation[0]+=b.rotate[0],d.mRotation[1]+=b.rotate[1],d.mRotation[2]+=b.rotate[2]);b.rotate2Active==!0&&b.rotate2!=void 0&&(d.mAreaRotation[0]+=b.rotate2[0],d.mAreaRotation[1]+=b.rotate2[1],d.mAreaRotation[2]+=b.rotate2[2]);b.translate2Active==!0&&b.translate2!=void 0&&(d.mAreaPosition[0]+=b.translate2[0],d.mAreaPosition[1]+=b.translate2[1],d.mAreaPosition[2]+=b.translate2[2]);b.translateActive==!0&&b.translate!=void 0&&
(d.mPosition[0]+=b.translate[0],d.mPosition[1]+=b.translate[1],d.mPosition[2]+=b.translate[2]);b.scaleActive==!0&&b.scale!=void 0&&(d.mScale[0]+=b.scale[0],d.mScale[1]+=b.scale[1],d.mScale[2]+=b.scale[2])};AnimData.prototype.maskFrames2=function(b,d){b.mRotate2Anim=d.rotate2Active==!0?!0:!1;b.mRotateAnim=d.rotateActive==!0?!0:!1;b.mScaleAnim=d.scaleActive==!0?!0:!1;b.mTranslate2Anim=d.translate2Active==!0?!0:!1;b.mTranslateAnim=d.translateActive==!0?!0:!1};
AnimData.prototype.maskFrames=function(b,d,c,e){c.mPosition[0]!=e.mPosition[0]||c.mPosition[1]!=e.mPosition[1]||c.mPosition[2]!=e.mPosition[2]?(b.mTranslateAnim=!0,d.mTranslateAnim=!0):(b.mTranslateAnim=!1,d.mTranslateAnim=!1);c.mAreaPosition[0]!=e.mAreaPosition[0]||c.mAreaPosition[1]!=e.mAreaPosition[1]||c.mAreaPosition[2]!=e.mAreaPosition[2]?(b.mTranslate2Anim=!0,d.mTranslate2Anim=!0):(b.mTranslate2Anim=!1,d.mTranslate2Anim=!1);c.mRotation[0]!=e.mRotation[0]||c.mRotation[1]!=e.mRotation[1]||c.mRotation[2]!=
e.mRotation[2]?(b.mRotateAnim=!0,d.mRotateAnim=!0):(b.mRotateAnim=!1,d.mRotateAnim=!1);c.mAreaRotation[0]!=e.mAreaRotation[0]||c.mAreaRotation[1]!=e.mAreaRotation[1]||c.mAreaRotation[2]!=e.mAreaRotation[2]?(b.mRotate2Anim=!0,d.mRotate2Anim=!0):(b.mRotate2Anim=!1,d.mRotate2Anim=!1);c.mScale[0]!=e.mScale[0]||c.mScale[1]!=e.mScale[1]||c.mScale[2]!=e.mScale[2]?(b.mScaleAnim=!0,d.mScaleAnim=!0):(b.mScaleAnim=!1,d.mScaleAnim=!1)};
AnimData.prototype.maskFrame=function(b,d,c){b.mTranslateAnim=d.mPosition[0]!=c.mPosition[0]||d.mPosition[1]!=c.mPosition[1]||d.mPosition[2]!=c.mPosition[2]?!0:!1;b.mTranslate2Anim=d.mAreaPosition[0]!=c.mAreaPosition[0]||d.mAreaPosition[1]!=c.mAreaPosition[1]||d.mAreaPosition[2]!=c.mAreaPosition[2]?!0:!1;b.mRotateAnim=d.mRotation[0]!=c.mRotation[0]||d.mRotation[1]!=c.mRotation[1]||d.mRotation[2]!=c.mRotation[2]?!0:!1;b.mRotate2Anim=d.mAreaRotation[0]!=c.mAreaRotation[0]||d.mAreaRotation[1]!=c.mAreaRotation[1]||
d.mAreaRotation[2]!=c.mAreaRotation[2]?!0:!1;b.mScaleAnim=d.mScale[0]!=c.mScale[0]||d.mScale[1]!=c.mScale[1]||d.mScale[2]!=c.mScale[2]?!0:!1};
AnimData.prototype.fillFrames=function(b,d,c){for(var e=1/(b.frames.length-1),f=e,g=1;g<b.frames.length-1;g++){var h=g-1,j=void 0;if(this.mFrames==void 0)this.mFrames=[];h<this.mFrames.length?j=this.mFrames[h]:(j=new AnimData_AnimFrame,this.mFrames.push(j));h=b.frames[g];this.clearArrays(j,h);this.maskFrame(j,d,c);h.operation=="add"?(this.clearArrays(j,h),this.storeArrays3(j,h,d,c,f),this.addArrays(j,h,c)):h.operation=="pdist"?(this.clearArrays(j,h),this.storeArrays3(j,h,d,c,f),this.perctArrays(j,
h,d,c,f)):this.storeArrays(j,h,c);f+=e;this.mActiveFrames++}};AnimData.prototype.activate=function(){this.mDifftime=0;this.mApp.anims().incCount()};
AnimData.prototype.process2=function(b,d){this.mDifftime+=d;if(this.mDifftime>=this.mAnimDelay){this.mAnimRepeat--;if(this.mAnimRepeat>0){this.mDifftime=0;if(this.mRepeatDir==1){var c=this.mStart;this.mStart=this.mEnd;this.mEnd=c;this.mRepeatDir=-1}else if(this.mRepeatDir==-1)c=this.mStart,this.mStart=this.mEnd,this.mEnd=c,this.mRepeatDir=1;return!1}this.mDifftime=0;this.endAnimation(b);this.mCallback!=void 0&&this.mCallback.length>0&&this.mApp.execScript(this.mCallback);return!0}var e=this.mDifftime/
this.mAnimDelay;if(this.mActiveFrames==0)this.calcLinearData(this.mStart,this.mEnd,e,b);else{var c=this.mActiveFrames+1,e=Math.floor(e*c),f=this.mAnimDelay/c,f=(this.mDifftime-e*f)/f;e==0?this.calcLinearData(this.mStart,this.mFrames[0],f,b):e>=c-1?this.calcLinearData(this.mFrames[this.mFrames.length-1],this.mEnd,f,b):e<this.mFrames.length&&this.calcLinearData(this.mFrames[e-1],this.mFrames[e],f,b)}return!1};
AnimData.prototype.endAnimation=function(b){this.mBackupSaved==!0?(b.copy(this.mSavedRef),b.copyMat(this.mSavedRef)):(this.mEnd.mTranslateAnim==!0&&(b.mPosition[0]=this.mEnd.mTranslate[0],b.mPosition[1]=this.mEnd.mTranslate[1],b.mPosition[2]=this.mEnd.mTranslate[2]),this.mEnd.mTranslate2Anim==!0&&(b.mAreaPosition[0]=this.mEnd.mTranslate2[0],b.mAreaPosition[1]=this.mEnd.mTranslate2[1],b.mAreaPosition[2]=this.mEnd.mTranslate2[2]),this.mEnd.mRotate2Anim==!0&&(b.mAreaRotation[0]=this.mEnd.mRotate2[0],
b.mAreaRotation[1]=this.mEnd.mRotate2[1],b.mAreaRotation[2]=this.mEnd.mRotate2[2]),this.mEnd.mRotateAnim==!0&&(b.mRotation[0]=this.mEnd.mRotate[0],b.mRotation[1]=this.mEnd.mRotate[1],b.mRotation[2]=this.mEnd.mRotate[2]),this.mEnd.mScaleAnim==!0&&(b.mScale[0]=this.mEnd.mScale[0],b.mScale[1]=this.mEnd.mScale[1],b.mScale[2]=this.mEnd.mScale[2]));b.set();if(this.mOnEndHide==!0)b.mEnabled=!1;this.mRepeatDir=this.mAnimDelay=0;this.mAnimRepeat=1;this.mCallback="";this.mActiveFrames=0;this.mOnEndHide=this.mBackupSaved=
!1;this.mApp.anims().decCount()};
AnimData.prototype.calcLinearData=function(b,d,c,e){b.mTranslateAnim==!0&&(e.mPosition[0]=(d.mTranslate[0]-b.mTranslate[0])*c+b.mTranslate[0],e.mPosition[1]=(d.mTranslate[1]-b.mTranslate[1])*c+b.mTranslate[1],e.mPosition[2]=(d.mTranslate[2]-b.mTranslate[2])*c+b.mTranslate[2]);b.mTranslate2Anim==!0&&(e.mAreaPosition[0]=(d.mTranslate2[0]-b.mTranslate2[0])*c+b.mTranslate2[0],e.mAreaPosition[1]=(d.mTranslate2[1]-b.mTranslate2[1])*c+b.mTranslate2[1],e.mAreaPosition[2]=(d.mTranslate2[2]-b.mTranslate2[2])*
c+b.mTranslate2[2]);b.mRotate2Anim==!0&&(e.mAreaRotation[0]=(d.mRotate2[0]-b.mRotate2[0])*c+b.mRotate2[0],e.mAreaRotation[1]=(d.mRotate2[1]-b.mRotate2[1])*c+b.mRotate2[1],e.mAreaRotation[2]=(d.mRotate2[2]-b.mRotate2[2])*c+b.mRotate2[2]);b.mRotateAnim==!0&&(e.mRotation[0]=(d.mRotate[0]-b.mRotate[0])*c+b.mRotate[0],e.mRotation[1]=(d.mRotate[1]-b.mRotate[1])*c+b.mRotate[1],e.mRotation[2]=(d.mRotate[2]-b.mRotate[2])*c+b.mRotate[2]);b.mScaleAnim==!0&&(e.mScale[0]=(d.mScale[0]-b.mScale[0])*c+b.mScale[0],
e.mScale[1]=(d.mScale[1]-b.mScale[1])*c+b.mScale[1],e.mScale[2]=(d.mScale[2]-b.mScale[2])*c+b.mScale[2]);e.set()};
function AnimData(b,d){this.mDifftime=0;this.mAnimDelay=1;this.mRepeatDir=0;this.mAnimRepeat=1;this.mActiveFrames=0;this.mSavedRef=void 0;this.mOnEndHide=this.mBackupSaved=!1;this.mCurrDestCol=this.mCurrSourceCol=this.mCurrSourceRef=void 0;this.mTimeStep=this.mSteps=0;this.mColorPool=void 0;this.mRefCount=0;this.mActive=!1;this.mId=0;this.mMaxFrames=16;this.mRepeat=1;this.mToFinish=!1;this.mType=AnimData_Type.REF;this.mId=b;this.mApp=d;this.mPerctDiff=this.mPerctMax=this.mPerctMin=this.mPerctVal=
0;this.mAreaOwner=void 0}AnimData.prototype.setDelay=function(b,d){this.mAnimDelay+=b;d<0?(this.mAnimRepeat=d*-1,this.mRepeatDir=1):this.mAnimRepeat=d;if(this.mAnimDelay!=-1)this.mAnimDelay=this.mAnimDelay};AnimData.prototype.saveBackup=function(b,d){if(this.mSavedRef==void 0)this.mSavedRef=new GameonModelRef(void 0,-1);this.mSavedRef.copy(b);this.mSavedRef.copyMat(b);this.mBackupSaved=!0;this.mOnEndHide=d};AnimData.prototype.isActive=function(){return this.mActive};
AnimData.prototype.setActive=function(b){this.mActive=b};AnimData.prototype.finish=function(){this.mRepeat=1;this.mToFinish=!0};AnimData.prototype.apply=function(){this.mSteps=this.mRefCount-1;this.mSteps<=0?reset():(this.mTimeStep=diff=this.mAnimDelay/this.mSteps,this.mActive=!0,this.mDifftime=0)};
AnimData.prototype.process=function(b){this.mDifftime+=b;if(this.mToFinish||this.mDifftime>=this.mAnimDelay)if(this.mRepeat--,this.mRepeat<=0)return this.mType==AnimData_Type.COLOR&&this.setColorEnd(gl),this.reset(),!1;else this.mDifftime=0;perct=this.setRef(this.mDifftime);this.mType==AnimData_Type.COLOR?this.calcLinearColor(gl,this.mCurrSourceCol,this.mCurrDestCol,perct):this.mType==AnimData_Type.SCROLLER&&this.calcLinearScroller(perct);return!0};
AnimData.prototype.addFrameColor=function(b){if(this.mColorPool==void 0){this.mColorPool=[];for(var d=0;d<this.mMaxFrames;d++)this.mColorPool.push(new GLColor(0))}this.mRefCount<this.mMaxFrames&&(d=this.mColorPool[this.mRefCount++],this.copyColor(b,d));this.mType=AnimData_Type.COLOR};
AnimData.prototype.calcLinearScroller=function(b){if(this.mAreaOwner!=null){var d=this.mAreaOwner.mScrollers[0],b=d+(this.mPerctVal-d)*b;if(b<this.mPerctMin)b=this.mPerctMin;else if(b>this.mPerctMax)b=this.mPerctMax;this.mAreaOwner.setScrollerVal(b)}};AnimData.prototype.cancelAnimation=function(b){this.endAnimation(b)};
AnimData.prototype.addScrollerData=function(b,d,c,e){this.mType=AnimData_Type.SCROLLER;this.mPerctDiff=-b;this.mPerctVal==-1?this.mPerctVal=this.mAreaOwner.mScrollers[0]:this.mPerctVal-=b;this.mDifftime=0;this.mAnimDelay=d;this.mPerctMin=c;this.mPerctMax=e;this.mSteps=1;this.mActive=!0;this.mTimeStep=d};AnimData.prototype.cancel=function(){this.reset()};function AnimFactory_AnimFrame(){this.operation=this.translate2=this.rotate2=this.translate=this.scale=this.rotate=void 0;this.translate2Active=this.translateActive=this.scaleActive=this.rotate2Active=this.rotateActive=!1}function AnimFactory_AnimType(){this.frames=this.id=void 0;this.repeat=1;this.delay=1E3}
AnimFactory.prototype.processAnimFrame=function(b,d){var c=0;if(b.rotate!=void 0)c=b.rotate,d.rotate=[0,0,0],c=ServerkoParse.parseFloatArray(d.rotate,c),d.rotateActive=c>0;if(b.scale!=void 0)c=b.scale,d.scale=[0,0,0],c=ServerkoParse.parseFloatArray(d.scale,c),d.scaleActive=c>0;if(b.translate!=void 0)c=b.translate,d.translate=[0,0,0],c=ServerkoParse.parseFloatArray(d.translate,c),d.translateActive=c>0;if(b.rotate2!=void 0)c=b.rotate2,d.rotate2=[0,0,0],c=ServerkoParse.parseFloatArray(d.rotate2,c),d.rotate2Active=
c>0;if(b.translate2!=void 0)c=b.translate2,d.translate2=[0,0,0],c=ServerkoParse.parseFloatArray(d.translate2,c),d.translate2Active=c>0;if(b.operation!=void 0)c=b.operation,d.operation=c};AnimFactory.prototype.buildObjectAdata=function(b,d,c,e,f,g){var h=b.getAnimData(this.mApp);if(!b.animating()){var j=Array(32),f=ServerkoParse.parseFloatArray(j,f);h.setDelay(c,e);h.setup(d,j,f,b);h.setCallback(g);b.activateAnim()}};
function AnimFactory(b){this.mApp=b;this.mFallback=new AnimData(255,b);this.mAnimPool=[];for(b=0;b<16;b++)this.mAnimPool.push(new AnimData(b,this.mApp));this.mCount=0;this.mAnimations={}}
AnimFactory.prototype.get=function(b){if(b!=void 0&&b.mCurrentAnim!=void 0)b.mCurrentAnim.process(void 0,b.mCurrentAnim.mEndtime,!1),b.mCurrentAnim=void 0;for(var d=0;d<this.mAnimPool.length;d++)if(this.mAnimPool[d].mActive==!1){this.mAnimPool[d].mActive=!0;this.mCount++;this.mAnimPool[d].mOwner=b;if(b!=void 0)b.mCurrentAnim=this.mAnimPool[d];return this.mAnimPool[d]}return this.mFallback};
AnimFactory.prototype.process=function(b){for(var d=0;d<this.mAnimPool.length;d++)this.mAnimPool[d].mActive==!0&&this.mAnimPool[d].process(b,!0)};AnimFactory.prototype.add=function(b){b.mActive=!0};AnimFactory.prototype.createAnimColor=function(b,d,c,e){var f=this.get(void 0);f.setDelay(b,1);f.addFrameColor(d);f.addFrameColor(c);e!=void 0&&f.addFrameColor(e);f.apply()};AnimFactory.prototype.move=function(b,d,c,e){this.animObject("move",b,d,c,e)};
AnimFactory.prototype.rotate=function(b,d,c,e){this.animObject("rotate",b,d,c,e)};AnimFactory.prototype.initAnimation=function(b){var d;d=b.frames;var c=new AnimFactory_AnimType;c.frames=[];if(b.id!=void 0)c.id=b.id;if(b.delay!=void 0)c.delay=parseInt(b.delay);if(b.repeat!=void 0)c.repeat=parseInt(b.repeat);for(b=0;b<d.length;b++){var e=d[b],f=new AnimFactory_AnimFrame;this.processAnimFrame(e,f);c.frames.push(f)}this.mAnimations[c.id]=c};
AnimFactory.prototype.animObject=function(b,d,c,e,f){if(this.mAnimations[b]!=void 0){var d=this.mApp.objects().getRef(d),g=[0,0],e=ServerkoParse.parseIntArray(g,e),b=this.mAnimations[b],h=b.repeat,j=b.delay;e>=1&&(j=g[0]);e==2&&(h=g[1]);d!=void 0&&this.buildObjectAdata(d,b,j,h,c,f)}};
AnimFactory.prototype.animRef=function(b,d,c,e){if(b=="none")c.cancelAnimation();else if(this.mAnimations[b]!=void 0&&!c.animating()){var f=[0,0],b=this.mAnimations[b],g=c.getAnimData(this.mApp),h=b.repeat,j=b.delay,e=ServerkoParse.parseIntArray(f,e);e>=1&&(j=f[0]);e==2&&(h=f[1]);g.setDelay(j,h);g.setup2(b,d,c);c.activateAnim()}};
AnimFactory.prototype.createAnim=function(b,d,c,e,f,g,h,j,l){f=c.getAnimData(this.mApp);g=this.mAnimations.transform;f.setDelay(e,h);f.setup2(g,b,d);l==!0&&f.saveBackup(c,j);c.activateAnim()};AnimFactory.prototype.getCount=function(){return this.mCount};AnimFactory.prototype.decCount=function(){this.mCount--};AnimFactory.prototype.incCount=function(){this.mCount++};
AnimFactory.prototype.getScollerAnim=function(b){for(var d=void 0,c=0;c<this.mAnimPool.length;c++){var e=this.mAnimPool[c];if(e.isActive()==!1){if(e.mAreaOwner!=void 0&&e.mAreaOwner==b){d=e;break}d==void 0&&(d=e)}}return d};AnimFactory.prototype.animModelRef=function(b,d,c,e){if(this.mAnimations[b]!=void 0){var f=[0,0],c=ServerkoParse.parseIntArray(f,c),b=this.mAnimations[b],g=b.repeat,h=b.delay;c>=1&&(h=f[0]);c==2&&(g=f[1]);this.buildObjectAdata(d,b,h,g,e,void 0)}};function AreaIndexPair(){this.mArea="";this.mAlias=void 0;this.mIndex=0;this.mOnFocusGain=this.mOnFocusLost=this.mOnclick="";this.mIntData=this.mDist=0;this.mLoc=[0,0,0]};function GLColor(b,d,c,e){this.alpha=this.blue=this.green=this.red=1;if(arguments.length==1)this.red=(b>>16&255)/255,this.green=(b>>8&255)/255,this.blue=(b&255)/255,this.alpha=(b>>24&255)/255;else if(arguments.length==3)this.red=b,this.green=d,this.blue=c,this.alpha=1;else if(arguments.length==4)this.red=b,this.green=d,this.blue=c,this.alpha=e}GLColor.prototype.equals=function(){return red==color.red&&green==color.green&&blue==color.blue&&alpha==color.alpha};function GLVertex(b,d,c,e,f,g){this.tv=this.tu=this.z=this.y=this.x=0;this.index=-1;this.alpha=this.blue=this.green=this.red=1;if(arguments.length==6)this.x=b,this.y=d,this.z=c,this.tu=e,this.tv=f,this.index=g}GLVertex.prototype.equals=function(b){return this.x==b.x&&this.y==b.y&&this.z==b.z&&b.tu==tu&&b.tv==tv&&alpha==b.alpha&&red==b.red&&green==b.green&&blue==b.blue};
GLVertex.prototype.put=function(b,d,c){b.push(this.x);b.push(this.y);b.push(this.z);d.push(this.red);d.push(this.green);d.push(this.blue);d.push(this.alpha);c.push(this.tu);c.push(this.tv)};GLVertex.prototype.put2=function(b,d){b.push(this.x);b.push(this.y);b.push(this.z);d.push(this.red);d.push(this.green);d.push(this.blue);d.push(this.alpha)};GLVertex.prototype.putText=function(b,d,c,e,f){tu1=this.tu/e+d/e;tv1=this.tv/f+c/f;b.push(tu1);b.push(tv1)};
GLVertex.prototype.putTextHalf=function(b,d,c,e,f){tu1=this.tu/e+d/e+1;tv1=this.tv/f+c/f+1;b.push(tu1);b.push(tv1)};function GLShape(b){this.mWorld=b;this.mFaceList=[];this.mVertexList=[]}GLShape.prototype.addFace=function(b){this.mFaceList.push(b)};GLShape.prototype.setFaceColor=function(b,d){this.mFaceList[b].setColor(d)};GLShape.prototype.putIndices=function(b){for(var d=0;d<this.mFaceList.length;d++)this.mFaceList[d].putIndices(b)};GLShape.prototype.getIndexCount=function(){for(var b=0,d=0;d<this.mFaceList.length;d++)b+=this.mFaceList[d].getIndexCount();return b};
GLShape.prototype.addVertex=function(b,d,c,e,f,g){for(var h=0;h<this.mVertexList.length;h++){var j=this.mVertexList[h];if(j.x==b&&j.y==d&&j.z==c&&j.tu==e&&j.tv==f&&j.red==g.red&&j.green==g.green&&j.blue==g.blue&&j.alpha==g.alpha)return j}j=this.mWorld.addVertex(b,d,c,e,f);j.red=g.red;j.green=g.green;j.blue=g.blue;j.alpha=g.alpha;this.mVertexList.push(j);return j};
GLShape.prototype.addVertexNoIndex=function(b,d,c,e,f,g){b=this.mWorld.addVertex(b,d,c,e,f);b.red=g.red;b.green=g.green;b.blue=g.blue;b.alpha=g.alpha;this.mVertexList.push(b);return b};
GLShape.prototype.addVertexColor=function(b,d,c,e,f,g){for(var h=g[1],j=g[2],l=g[3],g=g[0],m=0;m<this.mVertexList.length;m++){var k=this.mVertexList[m];if(k.x==b&&k.y==d&&k.z==c&&k.tu==e&&k.tv==f&&k.red==h&&k.green==j&&k.blue==l&&k.alpha==g)return k}k=this.mWorld.addVertex(b,d,c,e,f);k.red=h;k.green=j;k.blue=l;k.alpha=g;this.mVertexList.push(k);return k};
GLShape.prototype.addVertexColorInt=function(b,d,c,e,f,g){for(var h=ColorFactory.decodeR(g)/255,j=ColorFactory.decodeG(g)/255,l=ColorFactory.decodeB(g)/255,g=ColorFactory.decodeA(g)/255,m=0;m<this.mVertexList.length;m++){var k=this.mVertexList[m];if(k.x==b&&k.y==d&&k.z==c&&k.tu==e&&k.tv==f&&k.red==h&&k.green==j&&k.blue==l&&k.alpha==g)return k}k=this.mWorld.addVertex(b,d,c,e,f);k.red=h;k.green=j;k.blue=l;k.alpha=g;this.mVertexList.push(k);return k};function GLFace(b,d,c,e){this.mVertexList=[];this.mColor=new GLColor;arguments.length==3?(this.addVertex(b),this.addVertex(d),this.addVertex(c)):arguments.length==4&&(this.addVertex(b),this.addVertex(d),this.addVertex(c),this.addVertex(e))}GLFace.prototype.addVertex=function(b){this.mVertexList.push(b)};GLFace.prototype.setColor=function(b){var d=this.mVertexList.length-1;if(!(d<2))d=this.mVertexList[d],d.red=b.red,d.green=b.green,d.blue=b.blue,d.alpha=b.alpha;this.mColor=b};
GLFace.prototype.getIndexCount=function(){return(this.mVertexList.length-2)*3};GLFace.prototype.putIndices=function(b){for(var d=this.mVertexList.length-1,c=this.mVertexList[0],e=this.mVertexList[d],f=1;f<d;f++){var g=this.mVertexList[f];b.push(c.index);b.push(g.index);b.push(e.index);c=g}};glModelLastText=void 0;Function.prototype.inheritsFrom=function(b){b.constructor==Function?(this.prototype=new b,this.prototype.constructor=this,this.prototype.parent=b.prototype):(this.prototype=b,this.prototype.constructor=this,this.prototype.parent=b);return this};
GLModel={isValid:function(){return this.mVertexList.length>0},addShape:function(b){this.mShapeList.push(b);this.mIndexCount+=b.getIndexCount()},generate:function(){if(this.mGenerated!=!0){this.mGenerated=!0;this.vertexBuffer=[];this.colorBuffer=[];this.textureBuffer=[];this.indexBuffer=[];this.mTextureWDiv=1/this.mTextureW;this.mTextureHDiv=1/this.mTextureH;if(this.mTextureW==1&&this.mTextureH==1)for(var b=0;b<this.mVertexList.length;b++){var d=this.mVertexList[b];d.put(this.vertexBuffer,this.colorBuffer,
this.textureBuffer)}else{for(b=0;b<this.mVertexList.length;b++)d=this.mVertexList[b],d.put2(this.vertexBuffer,this.colorBuffer);for(var c=this.mVertexList.length/2,b=0;b<this.mVertexList.length;b++)d=this.mVertexList[b],this.mForceHalfTexturing&&b>=c?d.putTextHalf(this.textureBuffer,0,0,this.mTextureW,this.mTextureH):d.putText(this.textureBuffer,0,0,this.mTextureW,this.mTextureH)}for(b=0;b<this.mShapeList.length;b++)this.mShapeList[b].putIndices(this.indexBuffer);this.mColorBuffer=gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER,this.mColorBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.colorBuffer),gl.STATIC_DRAW);this.mColorBuffer.itemSize=4;this.mColorBuffer.numItems=this.vertexBuffer.length/4;this.mVertexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.mVertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.vertexBuffer),gl.STATIC_DRAW);this.mVertexBuffer.itemSize=3;this.mVertexBuffer.numItems=this.vertexBuffer.length/3;this.mIndexBuffer=gl.createBuffer();
gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.mIndexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexBuffer),gl.STREAM_DRAW);this.mIndexBuffer.itemSize=1;this.mIndexBuffer.numItems=this.indexBuffer.length;this.mTextureBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.mTextureBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this.textureBuffer),gl.STATIC_DRAW);this.mTextureBuffer.itemSize=2;this.mTextureBuffer.numItems=this.textureBuffer.length/2;this.mEnabled=!0;
if(this.mTextureID==void 0)this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT)}},addVertex:function(b,d,c,e,f){e=new GLVertex(b,d,c,e,f,this.mVertexList.length);this.mVertexList.push(e);b<this.mBBoxMin[0]&&(this.mBBoxMin[0]=b);d<this.mBBoxMin[1]&&(this.mBBoxMin[1]=d);c<this.mBBoxMin[2]&&(this.mBBoxMin[2]=c);b>this.mBBoxMax[0]&&(this.mBBoxMax[0]=b);d>this.mBBoxMax[1]&&(this.mBBoxMax[1]=d);c>this.mBBoxMax[2]&&(this.mBBoxMax[2]=c);return e},setupRef:function(b){if(this.mTextureID!=
void 0&&b.isTexture(this.mTextureID))b.bindTexture(b.TEXTURE_2D,this.mTextureID),glModelLastText=this.mTextureID;b.bindBuffer(b.ARRAY_BUFFER,this.mVertexBuffer);b.vertexAttribPointer(2,3,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.mTextureBuffer);b.vertexAttribPointer(1,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,this.mColorBuffer);b.vertexAttribPointer(0,4,b.FLOAT,!1,0,0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.mIndexBuffer);var d=Math.floor(this.mForcedOwner/this.mTextureW)*this.mTextureHDiv,
c=Math.floor(this.mForcedOwner%this.mTextureW)*this.mTextureWDiv;b.uniform2f(b.getUniformLocation(b.program,"texOffsetF"),c,d)},drawRef:function(b,d){if(this.mEnabled){d.animating()==!0&&d.animate(this.mApp.mFrameDeltaTime);if(!d.getVisible()||d.mEnabled==!1)return!0;d!=void 0&&d.mMatrix.setUniform(b,b.u_modelViewMatrixLoc,!1);if(d.mTransformOwner){if(d.mOwner>=0&&d.mOwner<d.mOwnerMax){var c=Math.floor(d.mOwner/this.mTextureW)*this.mTextureHDiv,e=Math.floor(d.mOwner%this.mTextureW)*this.mTextureWDiv;
b.uniform2f(b.getUniformLocation(b.program,"texOffset"),e,c)}}else b.uniform2f(b.getUniformLocation(b.program,"texOffset"),0,0);b.drawElements(b.TRIANGLES,this.mIndexCount,b.UNSIGNED_SHORT,0)}},setPosition:function(b,d,c){this.mPosition[0]=b;this.mPosition[1]=d;this.mPosition[2]=c;this.mTransform=!0},setScale:function(b,d,c){this.mScale[0]=b;this.mScale[1]=d;this.mScale[2]=c;this.mTransform=!0},setTextureOffset:function(b,d){if(b>0)this.mTextureW=parseFloat(b);if(d>0)this.mTextureH=parseFloat(d);
this.mTextureOffset=0},reset:function(){generate()},setupOffset:function(b){this.mVertexOffset=b*12;this.mColorOffset=b*16},forceIndexCount:function(b){this.mIndexCount=b},normalize:function(){for(var b=(this.mBBoxMax[0]+this.mBBoxMin[0])/2,d=(this.mBBoxMax[1]+this.mBBoxMin[1])/2,c=(this.mBBoxMax[2]+this.mBBoxMin[2])/2,e=this.mBBoxMax[0]-this.mBBoxMin[0],f=this.mBBoxMax[1]-this.mBBoxMin[1],g=this.mBBoxMax[2]-this.mBBoxMin[2],h=0;h<this.mVertexList.length;h++){var j=this.mVertexList[h];j.x-=b;j.y-=
d;j.z-=c;e!=0&&(j.x/=e);f!=0&&(j.y/=f);g!=0&&(j.z/=g)}},invert:function(b,d,c){for(var e=0;e<this.mVertexList.length;e++){var f=this.mVertexList[e];b&&(f.x*=-1);d&&(f.y*=-1);c&&(f.z*=-1)}}};function StringString(){this.b=this.a=""}TextureFactory_Type={DEFAULT:0,FONT:1};function TextureFactory_MaterialData(b){this.mTextFact=b;this.alpha=this.diffuse=this.ambient=1;this.diffuseMap=this.ambientMap=void 0;this.ambientMapId=this.mTextFact.get(TextureFactory_Type.DEFAULT);this.diffuseMapId=this.mTextFact.get(TextureFactory_Type.DEFAULT);this.t=void 0}TextureFactory_MaterialData.prototype.setDiffuseMap=function(b,d,c){this.diffuseMap=c;this.diffuseMapId=this.mTextFact.newTexture(b,c,d+c,!0)};
TextureFactory_MaterialData.prototype.setAmbientMap=function(b,d,c){this.ambientMap=c;this.ambientMapId=this.mTextFact.newTexture(b,c,d+c,!0)};TextureFactory_MaterialData.prototype.setAlpha=function(b){this.alpha=parseFloat(b)};TextureFactory_MaterialData.prototype.setAlpha2=function(b){this.alpha=1-parseFloat(b)};TextureFactory_MaterialData.prototype.setDiffuse=function(b){b=ServerkoParse.parseFloatArray2(b);this.diffuse=new GLColor(b[0],b[1],b[2],this.alpha)};
TextureFactory_MaterialData.prototype.setAmbient=function(b){b=ServerkoParse.parseFloatArray2(b);this.ambient=new GLColor(b[0],b[1],b[2],this.alpha)};TextureFactory_MaterialData.prototype.setTransform=function(b){this.t=ServerkoParse.parseFloatArray2(b)};function TextureFactory(b){this.mTextureFont=this.mTextureDefault=1;this.mTextures={};this.mTextureIds=[];this.mInfos=[];this.mToDelete=[];this.mApp=b;this.mCp=this.mV2=this.mU2=this.mV1=this.mU1=0;this.mMaterials={}}
TextureFactory.prototype.init=function(b){this.clear();this.mTextureDefault=this.loadTextureFromFile(b,"whitesys.png",!0);this.mTextureFont=this.loadTextureFromFile(b,"fontsys.png",!0);for(var d=0;d<this.mInfos.length;d++){var c=this.mInfos.get(d);this.newTexture(b,c.b,c.a,!1)}};
TextureFactory.prototype.handleLoadedTexture=function(b){gl.bindTexture(gl.TEXTURE_2D,b);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,b.image);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.bindTexture(gl.TEXTURE_2D,null)};
TextureFactory.prototype.loadTextureFromFile=function(b,d,c){var e=b.createTexture();e.image=new Image;e.image.callback=this;e.image.onload=function(){this.callback.mApp.mDataChange=!0;this.callback.handleLoadedTexture(e)};e.image.src=c==!0?"qres/"+d:"res/"+d;return e};TextureFactory.prototype.get=function(b){switch(b){case TextureFactory_Type.FONT:return this.mTextureFont}return this.mTextureDefault};
TextureFactory.prototype.getTexture=function(b){return this.mTextures[b]!=void 0?this.mTextures[b]:this.mTextureDefault};TextureFactory.prototype.deleteTexture=function(b,d){this.mToDelete.push(d)};TextureFactory.prototype.flushTextures=function(b){for(var d=0;d<this.mToDelete.length;d++)this.clearTexture(b,this.mToDelete[d]);this.mToDelete=[]};
TextureFactory.prototype.clearTexture=function(b,d){if(this.mTextures[d]!=void 0){b.deleteTexture(this.mTextures[d]);delete this.mTextures[d];for(var c=0;c<this.mInfos.length;c++)if(this.mInfos[c].b==d){this.mInfos.splice(c,1);break}}};TextureFactory.prototype.clear=function(){this.mTextures={};this.mInfos=[]};
TextureFactory.prototype.newTexture=function(b,d,c,e){b=this.loadTextureFromFile(b,c,!1);if(b!=void 0){this.mTextures[d]=b;if(e)e=new StringString,e.a=c,e.b=d,this.mInfos.push(e);if(d=="font")this.mTextureFont=b}return b};TextureFactory.prototype.setParam=function(b,d,c,e,f){this.mU1=b;this.mU2=c;this.mV1=d;this.mV2=e;this.mCp=f};TextureFactory.prototype.initTextures=function(b){for(var b=b.texture,d=0;d<b.length;d++)this.processTexture(b[d])};
TextureFactory.prototype.processTexture=function(b){this.newTexture(gl,b.name,b.file,!0)};
TextureFactory.prototype.loadMaterial=function(b,d,c){for(var c=this.mApp.getStringFromFile(d+c).split("\n"),e=void 0,f=0;f<c.length;f++){var g=c[f],g=g.replace("\r",""),g=g.replace("\t","");g.indexOf("#")!=0&&(g.indexOf("newmtl")==0?(e=new TextureFactory_MaterialData(this),this.mMaterials[g.substring(7)]=e):g.indexOf("Ka")==0?e.setAmbient(g.substring(3)):g.indexOf("Kd")==0?e.setDiffuse(g.substring(3)):g.indexOf("d ")==0?e.setAlpha(g.substring(2)):g.indexOf("Tr")==0?e.setAlpha2(g.substring(2)):g.indexOf("map_Ka")==
0?e.setAmbientMap(b,d,g.substring(7)):g.indexOf("map_Kd")==0?e.setDiffuseMap(b,d,g.substring(7)):g.indexOf("t ")==0&&e.setTransform(g.substring(2)))}};TextureFactory.prototype.getMaterial=function(b){return this.mMaterials[b]};function ColorFactory(){var b=200/255;this.red=new GLColor(1,0,0);this.green=new GLColor(0,1,0);this.blue=new GLColor(0,0,1);this.yellow=new GLColor(1,1,0);this.transparent=new GLColor(1,1,1,1);this.redL=new GLColor(1,b,b,0.5);this.greenL=new GLColor(b,1,b,0.5);this.blueL=new GLColor(b,b,1,0.5);this.yellowL=new GLColor(1,1,b,0.5);this.orange=new GLColor(1,0.5,0);this.white=new GLColor(1,1,1);this.gray=new GLColor(b,b,b);this.black=new GLColor(0,0,0);this.grayL=new GLColor(0.5,0.5,0.5);this.magnentaL=
new GLColor(b,0.5,b);this.brownL=new GLColor(b,0.5,0);this.magnenta=new GLColor(1,0.5,1);this.brown=new GLColor(1,0.5,0)}ColorFactory.prototype.getPlayerColor=function(b){switch(b){case 0:return this.gray;case 1:return this.red;case 4:return this.blue;case 2:return this.green;case 3:return this.orange}return this.white};
ColorFactory.prototype.getColor=function(b){if(b.search("player")==0){var d=b.substr(6);return this.getPlayerColorFore(parseInt(d))}try{var c=parseInt(b.substring(0,2),16)/255,e=parseInt(b.substring(2,4),16)/255,f=parseInt(b.substring(4,6),16)/255,g=parseInt(b.substring(6,8),16)/255;return d=new GLColor(e,f,g,c)}catch(h){return this.white}};
ColorFactory.getColorVal=function(b){try{if(b.length()==6)var d=255,c=parseInt(b.substring(0,2),16),e=parseInt(b.substring(2,4),16),f=parseInt(b.substring(4,6),16);else d=parseInt(b.substring(0,2),16)/255,c=parseInt(b.substring(2,4),16)/255,e=parseInt(b.substring(4,6),16)/255,f=parseInt(b.substring(6,8),16)/255;return this.encode(d,c,e,f)}catch(g){return this.encode(255,255,255,255)}};
ColorFactory.prototype.getPlayerColorFore=function(b){switch(b){case 1:return this.redL;case 4:return this.blueL;case 2:return this.greenL;case 3:return this.yellowL}return this.white};
ColorFactory.prototype.getColorId=function(b){switch(b){case 1:return this.red;case 2:return this.green;case 3:return this.blue;case 4:return this.yellow;case 5:return this.magnenta;case 6:return this.brown;case 7:return this.black;case 8:return this.gray;case 9:return this.redL;case 10:return this.greenL;case 11:return this.blueL;case 12:return this.yellowL;case 13:return this.magnentaL;case 14:return this.brownL;case 15:return this.grayL}return this.white};
ColorFactory.encode=function(b,d,c,e){return(b<<24)+(d<<16)+(c<<8)+e};ColorFactory.decodeA=function(b){return b>>24&255};ColorFactory.decodeR=function(b){return b>>16&255};ColorFactory.decodeG=function(b){return b>>8&255};ColorFactory.decodeB=function(b){return b&255};function SoundFactory(){this.mSoundPoolMap={};this.mContext=void 0;this.mMute=this.mLastStream=0;this.mInit=!1;this.mVolume=50}SoundFactory.prototype.init=function(b){this.mInit=!1;this.mLastStream=0;this.mContext=b.context();this.mInit=!0;this.mApp=b};SoundFactory.prototype.playSound=function(b){if(this.mInit&&this.mMute!=1&&this.mVolume>0&&(b=this.mSoundPoolMap[b],b!=void 0))b.pause(),b.volume=this.mVolume,b.play()};SoundFactory.prototype.stop=function(){if(this.mLastStream>0)this.mLastStream=0};
SoundFactory.prototype.loadFromFile=function(b,d){var c=new Audio("res/"+d);c!=void 0&&(this.mSoundPoolMap[b]=c)};SoundFactory.prototype.onPlaySound=function(b,d){this.playSound(d)};SoundFactory.prototype.setVolume=function(b){this.mVolume=b/100};SoundFactory.prototype.newSound=function(b,d){this.loadFromFile(b,d+".mp3")};SoundFactory.prototype.setMute=function(b){this.mMute=b};function GameonModelData(){}GameonModelData_Type={NONE:0,CUBE:1,SPHERE:2,CARD52:4,CYLINDER:5,BACKGROUND:6,BACKIMAGE:7};
GameonModelData.modelSphere=[[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.002251,0.189269,0.529778],[0.046419,
0.416669,0.907834],[0.43285,0.922544],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,
-0.907834],[0.699937,0.329708],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.133048,0.133226,0.529778],[-0.261818,
0.327464,0.907834],[0.33543,0.986847],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.797912,0.244005],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.133048,
-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.002251,-0.193415,
-0.394102],[0.046419,-0.416669,-0.907834],[0.841254,0.153111],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.797912,0.244005],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.841254,0.153111],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],
[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.002251,-0.002073,0.567838],[0,0,1],[0.332713,0.879045],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.002073,-0.432162],[0,0,-1],[0.700416,0.188977],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,
0.049127],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.788865,0.049127],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.252251,
-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.328891,-0.328714,-0.123504],
[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.502251,-0.002073,0.067838],
[1,0,0],[0.424442,0.474645],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.355804,-0.002073,
0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,
0.907834],[0.374402,0.790702],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],
[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.13755,-0.137372,0.529778],[0.261818,-0.327464,0.907834],[0.33227,0.771405],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.002251,-0.464013,0.25918],
[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.252251,-0.252073,0.421391],[0.485702,-0.511093,0.709098],[0.332054,0.662419],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.328891,-0.328714,0.25918],[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.328891,-0.328714,0.25918],
[0.646168,-0.6592,0.384533],[0.331897,0.550527],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,0.434139],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.355804,-0.355626,0.067838],[0.707083,-0.707083,0],[0.331743,
0.434139],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.328891,-0.328714,-0.123504],[0.6592,-0.646168,-0.384533],[0.331534,0.311782],[0.002251,-0.464013,-0.123504],
[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.13755,-0.137372,-0.394102],[0.327464,-0.261818,-0.907834],[0.05324,0.049127],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.252251,-0.252073,-0.285716],[0.511093,-0.485702,-0.709098],[0.331051,0.182522],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,
-0.709098],[0.192037,0.244633],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[0.002251,-0.193415,-0.394102],[0.046419,-0.416669,-0.907834],[0.105629,0.153111],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],
[0.10838,0.350005],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[0.002251,-0.355626,-0.285716],[0.017914,-0.704856,-0.709098],[0.192037,0.244633],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],
[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[0.002251,-0.464013,-0.123504],[0.009186,-0.923063,-0.384533],[0.222047,0.36095],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],
[0.002251,-0.502073,0.067838],[0,-1,0],[0.239187,0.476156],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],[0.25325,0.586672],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[0.002251,-0.464013,0.25918],[-0.009186,-0.923063,0.384533],
[0.25325,0.586672],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[0.002251,-0.355626,0.421391],[-0.017914,-0.704856,0.709098],[0.268494,0.692066],
[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[0.002251,-0.193415,0.529778],[-0.046419,-0.416669,0.907834],[0.290186,0.791496],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.133048,-0.137372,
0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.133048,-0.137372,0.529778],[-0.327464,-0.261818,0.907834],[0.253264,0.846455],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.232541,0.92427],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.247749,-0.252073,0.421391],[-0.511093,
-0.485702,0.709098],[0.205981,0.770817],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.247749,-0.252073,0.421391],[-0.511093,-0.485702,0.709098],[0.205981,0.770817],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.13227,0.876859],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.497749,
-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.32439,-0.328714,0.25918],[-0.6592,-0.646168,0.384533],[0.177321,0.677089],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.090344,0.783541],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.052794,0.558604],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],
[0.052794,0.558604],[-0.351303,-0.355626,0.067838],[-0.707083,-0.707083,0],[0.155653,0.573693],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.068651,0.675514],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.32439,-0.328714,-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.32439,-0.328714,
-0.123504],[-0.646168,-0.6592,-0.384533],[0.13476,0.463552],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.052794,0.558604],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.014839,0.30714],[-0.133048,-0.137372,-0.394102],[-0.261818,-0.327464,-0.907834],[0.062287,0.244005],[-0.247749,-0.252073,-0.285716],[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.014839,0.30714],[-0.247749,-0.252073,-0.285716],
[-0.485702,-0.511093,-0.709098],[0.10838,0.350005],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.037002,0.434655],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.189091,-0.002073,-0.394102],[-0.416669,-0.046419,-0.907834],[0.750464,0.30714],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.772627,0.434655],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.351303,-0.002073,-0.285716],[-0.704856,
-0.017914,-0.709098],[0.772627,0.434655],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.351303,-0.002073,-0.285716],[-0.704856,-0.017914,-0.709098],[0.772627,0.434655],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.788419,0.558604],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,
-0.384533],[0.788419,0.558604],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.459689,-0.002073,-0.123504],[-0.923063,-0.009186,-0.384533],[0.788419,0.558604],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.351303,0.35148,0.067838],[-0.707083,
0.707083,0],[0.699351,0.72159],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.497749,-0.002073,0.067838],[-1,0,0],[0.804276,0.675514],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.32439,0.324568,0.25918],[-0.646168,
0.6592,0.384533],[0.699013,0.839226],[-0.459689,-0.002073,0.25918],[-0.923063,0.009186,0.384533],[0.825969,0.783541],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,
0.952004],[-0.351303,-0.002073,0.421391],[-0.704856,0.017914,0.709098],[0.867895,0.876859],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.968166,0.92427],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.189091,-0.002073,0.529778],[-0.416669,0.046419,0.907834],[0.968166,0.92427],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[-0.247749,0.247927,
0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[-0.133048,0.133226,0.529778],[-0.261818,0.327464,0.907834],[0.33543,0.986847],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],
[0.699013,0.839226],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[-0.247749,0.247927,0.421391],[-0.485702,0.511093,0.709098],[0.69783,0.952004],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,
0.384533],[0.699013,0.839226],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[-0.32439,0.324568,0.25918],[-0.646168,0.6592,0.384533],[0.699013,0.839226],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[0.002251,0.459867,-0.123504],[-0.009186,
0.923063,-0.384533],[0.61082,0.557114],[-0.351303,0.35148,0.067838],[-0.707083,0.707083,0],[0.699351,0.72159],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[-0.32439,0.324568,-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[-0.32439,0.324568,
-0.123504],[-0.6592,0.646168,-0.384533],[0.699549,0.5977],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.133048,0.133226,-0.394102],[-0.327464,0.261818,-0.907834],[0.699937,0.329708],[-0.247749,0.247927,-0.285716],[-0.511093,0.485702,-0.709098],[0.699721,0.466837],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[-0.247749,0.247927,-0.285716],[-0.511093,
0.485702,-0.709098],[0.699721,0.466837],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,0.189269,-0.394102],[-0.046419,0.416669,-0.907834],[0.649449,0.306289],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,
0.433431],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.002251,0.35148,-0.285716],[-0.017914,0.704856,-0.709098],[0.626867,0.433431],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.328891,0.324568,
-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.002251,0.459867,-0.123504],[-0.009186,0.923063,-0.384533],[0.61082,0.557114],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.355804,0.351481,0.067838],
[0.707083,0.707083,0],[0.508057,0.571525],[0.002251,0.497927,0.067838],[0,1,0],[0.594766,0.673781],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.002251,0.459867,0.25918],[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.002251,0.459867,0.25918],
[0.009186,0.923063,0.384533],[0.572931,0.781547],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,0.874598],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.002251,0.35148,0.421391],[0.017914,0.704856,0.709098],[0.531208,
0.874598],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.002251,0.189269,0.529778],[0.046419,0.416669,0.907834],[0.43285,0.922544],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.13755,0.133226,0.529778],
[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.13755,0.133226,0.529778],[0.327464,0.261818,0.907834],[0.411491,0.845034],[0.193592,-0.002073,0.529778],[0.416669,-0.046419,0.907834],[0.374402,0.790702],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,
0.768835],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.252251,0.247927,0.421391],[0.511093,0.485702,0.709098],[0.458114,0.768835],[0.355804,-0.002073,0.421391],[0.704856,-0.017914,0.709098],[0.395638,0.690918],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],
[0.328891,0.324568,0.25918],[0.6592,0.646168,0.384533],[0.486492,0.674939],[0.46419,-0.002073,0.25918],[0.923063,-0.009186,0.384533],[0.410597,0.585316],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.355804,0.351481,0.067838],[0.707083,0.707083,0],[0.508057,0.571525],[0.46419,-0.002073,-0.123504],[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.355804,0.351481,0.067838],[0.707083,0.707083,
0],[0.508057,0.571525],[0.502251,-0.002073,0.067838],[1,0,0],[0.424442,0.474645],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],[0.471293,0.242759],[0.328891,0.324568,-0.123504],[0.646168,0.6592,-0.384533],[0.528955,0.46145],[0.46419,-0.002073,-0.123504],
[0.923063,0.009186,-0.384533],[0.441391,0.359284],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.13755,0.133226,-0.394102],[0.261818,0.327464,-0.907834],[0.602084,0.242513],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.193592,-0.002073,-0.394102],[0.416669,0.046419,-0.907834],[0.558827,0.151254],[0.252251,0.247927,-0.285716],[0.485702,0.511093,-0.709098],[0.55548,0.348064],[0.355804,-0.002073,-0.285716],[0.704856,0.017914,-0.709098],
[0.471293,0.242759]];
GameonModelData.modelCube=[[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[1,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[0,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[1,0],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[1,1],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[0,1],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,1],[-0.5,-0.5,
-0.5],[-0.577349,-0.577349,-0.577349],[0,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,1],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[0,1],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,0],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,1],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,1],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[0,1],[0.5,0.5,-0.5],[0.333323,
0.666646,-0.666646],[0,0],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[1,0],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[1,0],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[1,1],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[0,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[-0.5,0.5,0.5],[-0.666646,0.666646,0.333323],[1,0],[-0.5,-0.5,0.5],[-0.408246,-0.408246,0.816492],[1,1],[0.5,0.5,0.5],[0.666646,0.333323,0.666646],[0,0],[-0.5,-0.5,0.5],
[-0.408246,-0.408246,0.816492],[1,1],[0.499185,-0.5,0.5],[0.408246,-0.816492,0.408246],[0,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[0,0],[0.5,-0.5,-0.5],[0.816492,-0.408246,-0.408246],[1,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[1,1],[0.5,0.5,-0.5],[0.333323,0.666646,-0.666646],[0,0],[-0.5,-0.5,-0.5],[-0.577349,-0.577349,-0.577349],[1,1],[-0.5,0.5,-0.5],[-0.577349,0.577349,-0.577349],[0,1]];
GameonModelData.modelCyl=[[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,0.851614],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.967106,0.688332],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.967106,0.688332],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.858005,0.851614],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.967106,
0.688332],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[1.005417,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.5,-1.0E-6,0.05],[0.82577,-0.05475,0.561296],[1.005417,0.495728],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.967106,0.688332],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[1.005417,0.495729],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.967106,0.303125],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.461939,-0.191342,0.05],[0.741966,
-0.366588,0.561296],[0.967106,0.303124],[0.5,-1.0E-6,0.05],[0.82577,-0.05475,0.561296],[1.005417,0.495728],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.967106,0.303125],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,0.139843],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,0.139843],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.967106,0.303124],[0,0,-0.05],
[0,0,-1],[0.502119,0.495729],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,0.139843],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,0.030742],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,0.030742],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,0.139843],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,0.030742],[0,-0.5,-0.05],
[0.05475,-0.82577,-0.561296],[0.502119,-0.007569],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-1.0E-6,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,-0.007569],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,0.030742],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.007569],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,0.030742],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,
0.561296],[0.309515,0.030742],[-1.0E-6,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,-0.007569],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,0.030742],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,0.139843],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,0.139844],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,0.030742],[0,0,-0.05],
[0,0,-1],[0.502119,0.495729],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,0.139843],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.037133,0.303125],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.037132,0.303126],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,0.139844],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.037133,0.303125],
[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[-0.001179,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.5,1.0E-6,0.05],[-0.82577,0.05475,0.561296],[-0.001179,0.49573],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.037132,0.303126],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[-0.001179,0.495729],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.037133,0.688332],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.461939,0.191343,0.05],[-0.741966,
0.366588,0.561296],[0.037133,0.688334],[-0.5,1.0E-6,0.05],[-0.82577,0.05475,0.561296],[-0.001179,0.49573],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.037133,0.688332],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,0.851614],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,0.851615],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.037133,0.688334],[0,0,-0.05],
[0,0,-1],[0.502119,0.495729],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,0.851614],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,0.960716],[0,0,0.05],[0,0,1],[0.502119,0.495729],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,0.960716],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,0.851615],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,0.960716],[0,0.5,-0.05],
[-0.05475,0.82577,-0.561296],[0.50212,0.999027],[0,0,0.05],[0,0,1],[0.502119,0.495729],[2.0E-6,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,0.999027],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,0.960716],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,0.999027],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,0.960715],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,
0.960715],[2.0E-6,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,0.999027],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,0.960715],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,0.851614],[0,0,-0.05],[0,0,-1],[0.502119,0.495729],[0,0,0.05],[0,0,1],[0.502119,0.495729],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.858005,0.851614],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,0.960715],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],
[0.858005,1.001],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,-0.005596],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.858005,-0.005596],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],[2.0E-6,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,
1.001],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[2.0E-6,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,1.001],[0.191343,0.461939,0.05],[0.366588,0.741966,0.561296],[0.694725,1.001],[0.191342,0.46194,-0.05],[0.265419,0.783868,-0.561296],[0.694723,-0.005596],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],
[-0.19134,0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[2.0E-6,0.5,0.05],[0.05475,0.82577,0.561296],[0.502121,1.001],[0,0.5,-0.05],[-0.05475,0.82577,-0.561296],[0.50212,-0.005596],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.146234,-0.005596],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,1.001],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.146235,1.001],[-0.19134,
0.46194,0.05],[-0.265419,0.783868,0.561296],[0.309517,1.001],[-0.191341,0.46194,-0.05],[-0.366588,0.741966,-0.561296],[0.309516,-0.005596],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.846139,-0.005596],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.353552,0.353554,0.05],[-0.545183,0.622639,0.561296],[0.84614,
1.001],[-0.353553,0.353554,-0.05],[-0.622608,0.545183,-0.561296],[0.846139,-0.005596],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.5,1.0E-6,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],[-0.5,1.0E-6,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.461939,0.191343,0.05],[-0.741966,0.366588,0.561296],[0.682858,1.001],[-0.46194,0.191342,-0.05],[-0.783868,0.265419,-0.561296],[0.682857,-0.005596],
[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.5,1.0E-6,0.05],[-0.82577,0.05475,0.561296],[0.490255,1.001],[-0.5,0,-0.05],[-0.82577,-0.05475,-0.561296],[0.490253,-0.005596],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.134368,-0.005596],
[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.134369,1.001],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.134369,1.001],[-0.46194,-0.191341,0.05],[-0.783868,-0.265419,0.561296],[0.297651,1.001],[-0.46194,-0.191342,-0.05],[-0.741966,-0.366588,-0.561296],[0.29765,-0.005596],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,-0.005596],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,
0.561296],[0.309515,1.001],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,-0.005596],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,1.001],[-0.353554,-0.353553,0.05],[-0.622639,-0.545183,0.561296],[0.146233,1.001],[-0.353553,-0.353554,-0.05],[-0.545183,-0.622608,-0.561296],[0.146234,-0.005596],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[-1.0E-6,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[-0.191342,-0.46194,-0.05],[-0.265419,
-0.783868,-0.561296],[0.309516,-0.005596],[-1.0E-6,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[-0.191343,-0.461939,0.05],[-0.366588,-0.741966,0.561296],[0.309515,1.001],[-0.191342,-0.46194,-0.05],[-0.265419,-0.783868,-0.561296],[0.309516,-0.005596],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.191341,-0.46194,0.05],[0.265419,-0.783868,0.561296],[0.694722,1.001],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[0.191341,-0.46194,0.05],
[0.265419,-0.783868,0.561296],[0.694722,1.001],[-1.0E-6,-0.5,0.05],[-0.05475,-0.82577,0.561296],[0.502118,1.001],[0,-0.5,-0.05],[0.05475,-0.82577,-0.561296],[0.502119,-0.005596],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.858005,-0.005596],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,1.001],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.858004,1.001],[0.191341,-0.46194,0.05],
[0.265419,-0.783868,0.561296],[0.694722,1.001],[0.191342,-0.46194,-0.05],[0.366588,-0.741966,-0.561296],[0.694723,-0.005596],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.353553,-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.134368,-0.005596],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.353553,-0.353554,0.05],[0.545183,-0.622639,0.561296],[0.134367,1.001],[0.353553,
-0.353553,-0.05],[0.622608,-0.545183,-0.561296],[0.134368,-0.005596],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.5,-1.0E-6,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.5,-1.0E-6,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.461939,-0.191342,0.05],[0.741966,-0.366588,0.561296],[0.297649,1.001],[0.46194,-0.191342,-0.05],[0.783868,-0.265419,-0.561296],[0.29765,-0.005596],[0.46194,0.191342,
-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.5,-1.0E-6,0.05],[0.82577,-0.05475,0.561296],[0.490253,1.001],[0.5,0,-0.05],[0.82577,0.05475,-0.561296],[0.490253,-0.005596],[0.353553,0.353553,-0.05],[0.545183,0.622608,-0.561296],[0.846139,-0.005596],[0.353554,0.353553,0.05],[0.622639,0.545183,
0.561296],[0.846138,1.001],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596],[0.353554,0.353553,0.05],[0.622639,0.545183,0.561296],[0.846138,1.001],[0.46194,0.191341,0.05],[0.783868,0.265419,0.561296],[0.682857,1.001],[0.46194,0.191342,-0.05],[0.741966,0.366588,-0.561296],[0.682857,-0.005596]];GameonModelData.getData=function(b){switch(b){case GameonModelData_Type.CUBE:return GameonModelData.modelCube;case GameonModelData_Type.CYLINDER:return GameonModelData.modelCyl;case GameonModelData_Type.SPHERE:return GameonModelData.modelSphere}};function ItemFactory(b){this.mApp=b;this.mInitialized=!1;this.mModels={};this.mWorld=b.mWorld;this.mDefaultTransf=[0,0,0,1,1,1,0,0,0];this.mDefaultUv=[0,0,1,1];this.mDefaultColors=[];this.mDefaultColors[0]=[4294967295]}ItemFactory.prototype.create=function(){};ItemFactory.prototype.createItem=function(b,d){var c=b.split("."),e=this.mModels[c[0]];if(e!=void 0){var f=-1;c.length>1&&(f=parseInt(c[1]));return this.createItemFromModel(e,f,d)}};
ItemFactory.prototype.createItemFromModel=function(b,d,c){c==void 0&&(c=new LayoutItem(this.mApp));c.mType=b.mModelTemplate;c.mModel=b;c.mItemID=d;c.mOwner=d;c.mOwnerMax=b.mSubmodels;return c};ItemFactory.prototype.createCard52=function(b,d,c){d=c;d==void 0&&(d=new LayoutItem);d.mType=GameonModelData_Type.CARD52;d.mModel=this.mCard52;d.mItemID=b;d.mOwner=b;d.mOwnerMax=64;return d};ItemFactory.prototype.newFromTemplate=function(b,d,c){d=this.getFromTemplate(b,d,c);d!=void 0&&(this.mModels[b]=d)};
ItemFactory.prototype.getFromTemplate=function(b,d,c){if(this.mModels[d]!=void 0)return this.mModels[d];var b=this.mApp.textures().mTextureDefault,e=void 0,e=c==void 0?this.mApp.colors().white:this.mApp.colors().getColor(c),c=[1,1,1],f=void 0,g=d.split(".");g.length==1?f=d:(f=g[0],c[0]=parseFloat(g[1]),c[1]=parseFloat(g[2]),c[2]=parseFloat(g[3]));d=new GameonModel(f,this.mApp,void 0);if(f=="cube")return d=this.createFromType(GameonModelData_Type.CUBE,e,b,c),d.mModelTemplate=GameonModelData_Type.CUBE,
d.mIsModel=!0,d;else if(f=="sphere")return d=this.createFromType(GameonModelData_Type.SPHERE,e,b,c),d.mModelTemplate=GameonModelData_Type.SPHERE,d.mIsModel=!0,d;if(f=="cylinder")d.createModel(GameonModelData_Type.CYLINDER,TextureFactory.mTextureDefault),d.mModelTemplate=GameonModelData_Type.SFIGURE,d.mIsModel=!0;else if(f=="plane")d.createPlane(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.white),d.mModelTemplate=GameonModelData_Type.SFIGURE,d.mIsModel=!0;else if(f=="dicemodel")d.createModel(GameonModelData_Type.DICE,
TextureFactory.mTextureDefault),d.mModelTemplate=GameonModelData_Type.DICE,d.mIsModel=!0;else if(f=="card52")d.createCard2(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),d.mModelTemplate=GameonModelData_Type.CARD52,d.mForceHalfTexturing=!0,d.mForcedOwner=32,d.mHasAlpha=!0,d.mIsModel=!0;else if(f=="cardbela")d.createCard(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),d.mModelTemplate=GameonModelData_Type.CARD52,d.mForceHalfTexturing=!0,d.mForcedOwner=32,d.mHasAlpha=!0,d.mIsModel=!0;else if(f==
"background")d.createPlane(-0.5,-0.5,0,0.5,0.5,0,e,c),d.mModelTemplate=GameonModelData_Type.BACKGROUND,d.mHasAlpha=!0,d.mIsModel=!1;else return;return d};ItemFactory.prototype.setTexture=function(b,d){var c=this.mModels[b];if(c!=void 0){var e=0,f=0,g=void 0,h=d.split(";");h.length==1?g=d:(g=h[0],f=h[1].split(","),e=f[0],f=f[1]);c.mTextureID=this.mApp.mTextures.getTexture(g);c.setTextureOffset(e,f)}};
ItemFactory.prototype.createModel=function(b,d){var c=this.mModels[b];if(c!=void 0)c.mIsModel=!0,this.mApp.world().getDomainByName(d),this.mWorld.add(c)};ItemFactory.prototype.setSubmodels=function(b,d){var c=this.mModels[b];if(c!=void 0){var e=[0,0];ServerkoParse.parseIntArray(e,d)==1?c.mSubmodels=e[0]:(c.mSubmodels=e[0],c.mForcedOwner=e[1])}};ItemFactory.prototype.createFromType=function(b,d,c,e){var f=new GameonModel("template",this.mApp,void 0);this.addModelFromType(f,b,d,c,e);return f};
ItemFactory.prototype.addModelFromType=function(b,d,c,e,f){if(d==GameonModelData_Type.SFIGURE)b.createModel(GameonModelData_Type.CYLINDER,TextureFactory.mTextureDefault),b.mModelTemplate=GameonModelData_Type.SFIGURE,b.mIsModel=!0;else if(d==GameonModelData_Type.CUBE)b.createModel(GameonModelData_Type.CUBE,TextureFactory.mTextureDefault,c,f),b.mModelTemplate=GameonModelData_Type.CUBE,b.mIsModel=!0;else if(d==GameonModelData_Type.SPHERE)b.createModel(GameonModelData_Type.SPHERE,TextureFactory.mTextureDefault,
c,f),b.mModelTemplate=GameonModelData_Type.SPHERE,b.mIsModel=!0;else if(d==GameonModelData_Type.CARD52)b.createCard2(-0.5,-0.5,0,0.5,0.5,0,this.mApp.mColors.transparent),b.mModelTemplate=GameonModelData_Type.CARD52,b.mForceHalfTexturing=!0,b.mForcedOwner=32,b.mHasAlpha=!0,b.mIsModel=!0;else if(d==GameonModelData_Type.BACKGROUND)b.createPlane(-0.5,-0.5,0,0.5,0.5,0,c,f),b.mModelTemplate=GameonModelData_Type.BACKGROUND,b.mForceHalfTexturing=!1,b.mHasAlpha=!1,b.setTexture(e);else if(d==GameonModelData_Type.BACKIMAGE)b.createPlane2(-0.5,
-0.5,0,0.5,0.5,0,c),b.mModelTemplate=GameonModelData_Type.BACKGROUND,b.mForceHalfTexturing=!1,b.mHasAlpha=!1,b.setTexture(e);return b};ItemFactory.prototype.initModels=function(b){for(var b=b.model,d=0;d<b.length;d++)this.processObject(b[d])};
ItemFactory.prototype.processObject=function(b){var d=b.name;this.newFromTemplate(d,b.template);if(b.texture!=void 0){var c=b.texture;this.setTexture(d,c)}if(b.texture!=void 0)c=b.texture,this.setTexture(d,c);if(b.submodels!=void 0)c=b.submodels,this.setSubmodels(d,c);this.createModel(d,"")};ItemFactory.prototype.newEmpty=function(b){var d=new GameonModel(b,this.mApp,void 0);d.mIsModel=!0;d!=void 0&&(this.mModels[b]=d)};
ItemFactory.prototype.addShape=function(b,d,c,e,f){b=this.mModels[b];if(b!=void 0){var g;if(c!=void 0){g=Array(9);for(var h=0;h<9;h++)g[h]=this.mDefaultTransf[h];ServerkoParse.parseFloatArray(g,c)}else g=this.mDefaultTransf;c=Array(16);GMath.matrixIdentity(c);GMath.matrixTranslate(c,g[0],g[1],g[2]);GMath.matrixRotate(c,g[6],1,0,0);GMath.matrixRotate(c,g[7],0,1,0);GMath.matrixRotate(c,g[8],0,0,1);GMath.matrixScale(c,g[3],g[4],g[5]);f!=void 0?(g=Array(6),ServerkoParse.parseFloatArray(g,f)):g=this.mDefaultUv;
e=e!=void 0?ServerkoParse.parseColorVector(e):this.mDefaultColors;d=="plane"?b.addPlane(c,e,g):d=="cylinder"?b.createModelFromData2(GameonModelData.modelCyl,c,g,e):d=="cube"&&b.createModelFromData2(GameonModelData.modelCube,c,g,e)}};
ItemFactory.prototype.addShapeFromData=function(b,d,c,e){b=mModels.get[b];if(b!=void 0){var f;c!=void 0?(f=Array(9),ServerkoParse.parseFloatArray(f,c)):f=this.mDefaultTransf;e!=void 0?(c=Array(6),ServerkoParse.parseFloatArray(c,e)):c=this.mDefaultUv;e=Array(16);GMath.matrixIdentity(e);GMath.matrixTranslate(e,f[0],f[1],f[2]);GMath.matrixRotate(e,f[6],1,0,0);GMath.matrixRotate(e,f[7],0,1,0);GMath.matrixRotate(e,f[8],0,0,1);GMath.matrixScale(e,f[3],f[4],f[5]);d=ServerkoParse.parseFloatVector(d);b.createModelFromData(d,
e,c)}};
ItemFactory.prototype.createModelFromFile=function(b,d,c){var e=this.mModels[d];if(e==void 0){var e=new GameonModel(d,this.mApp,void 0),f="";f+=c;var g=[],h=[],j="";c.indexOf("/")!=-1&&(j=c.substring(0,c.indexOf("/")+1));c=this.mApp.getStringFromFile(f).split("\n");for(f=0;f<c.length;f++){var l=c[f],l=l.replace("\r","");l.indexOf("#")!=0&&(l.indexOf("v ")==0?g.push(this.parseVertices(l.substring(2))):l.indexOf("vt ")==0?h.push(this.parseTextureVertices(l.substring(3))):l.indexOf("vn ")!=0&&l.indexOf("vp ")!=
0&&(l.indexOf("f ")==0?e.addShapeFromString(g,h,l.substring(2)):l.indexOf("mtllib ")==0?this.mApp.textures().loadMaterial(b,j,l.substring(7)):l.indexOf("usemtl ")==0&&e.useMaterial(l.substring(7))))}e.normalize();e.invert(!1,!0,!1);this.mModels[d]=e}};ItemFactory.prototype.parseVertices=function(b){b=b.trim();return ServerkoParse.parseFloatArray2(b)};ItemFactory.prototype.parseTextureVertices=function(b){b=b.trim();return ServerkoParse.parseFloatArray2(b)};var MAPPING_XY=0,MAPPING_YZ=1,MAPPING_XZ=2,TYPE_FIXED=0,TYPE_DYNAMIC=1,TYPE_KINEMATIC=2,TYPE_AREA=3,SHAPE_BOX=0,SHAPE_CIRCLE=1,b2Vec2=Box2D.Common.Math.b2Vec2,b2AABB=Box2D.Collision.b2AABB,b2BodyDef=Box2D.Dynamics.b2BodyDef,b2Body=Box2D.Dynamics.b2Body,b2FixtureDef=Box2D.Dynamics.b2FixtureDef,b2Fixture=Box2D.Dynamics.b2Fixture,b2World=Box2D.Dynamics.b2World,b2MassData=Box2D.Collision.Shapes.b2MassData,b2PolygonShape=Box2D.Collision.Shapes.b2PolygonShape,b2CircleShape=Box2D.Collision.Shapes.b2CircleShape,
b2DebugDraw=Box2D.Dynamics.b2DebugDraw,b2MouseJointDef=Box2D.Dynamics.Joints.b2MouseJointDef;function ObjectProps(){this.mType=TYPE_FIXED;this.mShape=SHAPE_BOX;this.mGroupIndex=0;this.mFriction=0.2;this.mRestitution=this.mDensity=0}function BodyData(){this.mProps=this.mBody=this.mRef=this.mArea=void 0}function Box2dData(){this.mAreaModels=[];this.mDynModels=[];this.mFixModels=[];this.mMapping=MAPPING_XY}
function Box2dWrapper(b){this.mBox2dWorlds={};this.mBox2dWorldsVec=[];this.mApp=b;this.mActive=!1}
Box2dWrapper.prototype.initWorld=function(b,d,c){if(this.mBox2dWorlds.worldname==void 0){var e=[0,0];ServerkoParse.parseFloatArray(e,d);e=new Box2D.Common.Math.b2Vec2(e[0],e[1]);d=new Box2dData;e=new Box2D.Dynamics.b2World(e,!0);d.mWorld=e;d.mName=b;if(c=="xy")d.mMapping=MAPPING_XY;else if(c=="xz")d.mMapping=MAPPING_XZ;if(c=="yz")d.mMapping=MAPPING_YZ;this.mActive=!0;this.mBox2dWorldsVec.push(d);this.mBox2dWorlds[b]=d}};
Box2dWrapper.prototype.addDynObject=function(b,d,c,e){b=this.mBox2dWorlds[b];if(b!=void 0){d=new Box2D.Dynamics.b2BodyDef;d.type=b2Body.b2_dynamicBody;d.position.Set(c.mPosition[0],c.mPosition[1]);var d=b.mWorld.CreateBody(d),f=new Box2D.Dynamics.b2FixtureDef;if(e.mShape==SHAPE_BOX){var g=new Box2D.Collision.Shapes.b2PolygonShape;g.SetAsBox(c.mScale[0]/2,c.mScale[1]/2)}else g=new Box2D.Collision.Shapes.b2CircleShape,g.m_radius=c.mScale[0]/2;f.shape=g;f.density=e.mDensity;f.friction=e.mFriction;f.restitution=
e.mRestitution;f.filter.groupIndex=e.mGroupIndex;d.CreateFixture(f);f=new BodyData;f.mRef=c;f.mBody=d;f.mProps=e;c.assignPsyData(f);b.mDynModels.push(f)}};
Box2dWrapper.prototype.addAreaObject=function(b,d,c,e){b=this.mBox2dWorlds[b];if(b!=void 0){d=new Box2D.Dynamics.b2BodyDef;d.type=b2Body.b2_dynamicBody;d.position.Set(c.mLocation[0],c.mLocation[1]);var d=b.mWorld.CreateBody(d),f=new Box2D.Dynamics.b2FixtureDef,g=new Box2D.Collision.Shapes.b2PolygonShape;g.SetAsBox(c.mBounds[0]/2,c.mBounds[1]/2);f.shape=g;f.density=e.mDensity;f.friction=e.mFriction;f.restitution=e.mRestitution;f.filter.groupIndex=e.mGroupIndex;d.CreateFixture(f);f=new BodyData;f.mArea=
c;f.mBody=d;f.mProps=e;c.assignPsyData(f);b.mAreaModels.push(f)}};
Box2dWrapper.prototype.addFixedObject=function(b,d,c,e){b=this.mBox2dWorlds[b];if(b!=void 0){d=new Box2D.Dynamics.b2BodyDef;d.position.Set(c.mPosition[0],c.mPosition[1]);var d=b.mWorld.CreateBody(d),f=new Box2D.Dynamics.b2FixtureDef;if(e.mShape==SHAPE_BOX){var g=new Box2D.Collision.Shapes.b2PolygonShape;g.SetAsBox(c.mScale[0]/2,c.mScale[1]/2)}else g=new Box2D.Collision.Shapes.b2CircleShape,g.m_radius=c.mScale[0]/2;f.shape=g;f.density=e.mDensity;f.friction=e.mFriction;f.restitution=e.mRestitution;
d.CreateFixture(f);f=new BodyData;f.mRef=c;f.mBody=d;f.mProps=e;c.assignPsyData(f);b.mFixModels.push(f)}};
Box2dWrapper.prototype.doFrame=function(b){if(this.mActive){b/=1E3;for(var d=0;d<this.mBox2dWorldsVec.length;d++){var c=this.mBox2dWorldsVec[d];c.mWorld.Step(b,6,2);for(var e=0;e<c.mDynModels.length;e++){var f=c.mDynModels[e];if(f.mRef!=void 0){var g=f.mBody.GetPosition();f.mRef.setPosition(g.x,g.y,0.1);f.mRef.setRotate(0,0,f.mBody.GetAngle()*360/3.14);f.mRef.set()}}for(e=0;e<c.mAreaModels.length;e++)if(f=c.mAreaModels[e],f.mArea!=void 0)g=f.mBody.GetPosition(),f.mArea.mLocation[0]=g.x,f.mArea.mLocation[1]=
g.y,f.mArea.mRotation[2]=f.mBody.GetAngle()*360/3.14,f.mArea.updateModelsTransformation()}}};Box2dWrapper.prototype.initObjects=function(b){var d;if(b!=void 0){d=b.object;for(var b=b.worldid,c=0;c<d.length;c++)this.processObject(b,d[c])}};
Box2dWrapper.prototype.processObject=function(b,d){var c=d.name,e=d.type,f=d.refid,g=new ObjectProps;if(d.template!=void 0){var h=d.template;g.mShape=h=="box"?SHAPE_BOX:SHAPE_CIRCLE}if(d.friction!=void 0)h=d.friction,g.mFriction=parseFloat(h);if(d.density!=void 0)h=d.density,g.mDensity=parseFloat(h);if(d.restitution!=void 0)h=d.restitution,g.mRestitution=parseFloat(h);if(d.groupIndex!=void 0)h=d.groupIndex,g.mGroupIndex=parseInt(h);if(e=="dynamic"){if(e=this.mApp.objects().getRef(f),e!=void 0)g.mType=
TYPE_DYNAMIC,this.addDynObject(b,c,e,g)}else if(e=="fixed"){if(e=this.mApp.objects().getRef(f),e!=void 0)g.mType=TYPE_FIXED,this.addFixedObject(b,c,e,g)}else if(e=="area")e=this.mApp.grid().getArea(f),g.mType=TYPE_AREA,this.addAreaObject(b,c,e,g)};Box2dWrapper.prototype.isActive=function(){return this.mActive};
Box2dWrapper.prototype.removeWorld=function(b){b=this.mBox2dWorlds[b];if(b!=void 0){for(var d=0;d<b.mDynModels.length;d++){var c=b.mDynModels[d];c.mRef.assignPsyData(void 0)}for(d=0;d<b.mFixModels.length;d++)c=b.mFixModels[d],c.mRef.assignPsyData(void 0);for(d=0;d<b.mAreaModels.length;d++)c=b.mAreaModels[d],c.mArea.assignPsyData(void 0);delete this.mBox2dWorlds[b];b=this.mBox2dWorldsVec.indexOf(b);b>=0&&this.mBox2dWorldsVec.splice(b,1);if(this.mBox2dWorldsVec.length==0)this.mActive=!1}};function ObjectsFactory(b){this.mApp=b;this.mItems={}}ObjectsFactory.prototype.get=function(b){return this.mItems[b]};ObjectsFactory.prototype.addModel=function(b,d,c){if(this.mItems[b]==void 0)this.mApp.world().getDomainByName(c)!=void 0?this.mApp.world().add(d.mModel):this.mApp.mWorld.add(d.mModel),d.mModel.mEnabled=!0,this.mItems[b]=d};ObjectsFactory.prototype.removeModel=function(b){if(this.mItems[b]!=void 0){var d=this.mItems[b].mModel;delete this.mItems[b];this.mApp.mWorld.remove(d)}};
ObjectsFactory.prototype.create=function(b,d,c,e){if(this.mItems[b]==void 0&&(d=this.mApp.mItems.getFromTemplate(b,d,e),d!=void 0))d=d.copyOfModel(),e=new LayoutItem(this.mApp),e.mModel=d,c!=void 0?(this.mApp.world().getDomainByName(c),this.addModel(b,e,c)):this.addModel(b,e)};
ObjectsFactory.prototype.place=function(b,d,c){var b=this.refId(b),e=this.mItems[b.name];if(e!=void 0){var f=e.mModel,e=Array(3);ServerkoParse.parseFloatArray(e,d);d=f.getRefById(b,0);d.setPosition(e);d.set();c!=void 0&&(b=!1,c=="visible"&&(b=!0),d.setVisible(b))}};ObjectsFactory.prototype.scale=function(b,d){var c=this.refId(b),e=this.mItems[c.name];if(e!=void 0){var f=e.mModel,e=Array(3);ServerkoParse.parseFloatArray(e,d,0);c=f.getRefById(c,0);c.setScale(e);c.set()}};
ObjectsFactory.prototype.rotate=function(b,d){var c=this.refId(b),e=this.mItems[c.name];if(e!=void 0){var f=e.mModel,e=Array(3);ServerkoParse.parseFloatArray(e,d);c=f.getRefById(c,0);c.setRotate(e);c.set()}};
ObjectsFactory.prototype.texture=function(b,d,c){var e=this.refId(b),b=this.mItems[e.name];if(b!=void 0)b=b.mModel,e=b.getRefById(e,0),d!=void 0&&d.length>0&&(d=this.mApp.mTextures.getTexture(d),b.setTexture(d)),c!=void 0&&c.length>0&&(d=Array(2),ServerkoParse.parseIntArray(d,c),e.setOwner(d[0],d[1]))};
ObjectsFactory.prototype.state=function(b,d){var c=this.refId(b),e=this.mItems[c.name];if(e!=void 0){var e=e.mModel,c=e.getRefById(c,0),f=!1;d=="visible"&&(f=!0);e.mRefs.length==0&&this.place(b,"0,0,0",null);c.setVisible(f)}};ObjectsFactory.prototype.remove=function(b){this.mItems[b]!=void 0&&this.removeModel(b)};ObjectsFactory.prototype.initObjects=function(b){for(var b=b.object,d=0;d<b.length;d++)this.processObject(b[d])};
ObjectsFactory.prototype.processObject=function(b){var d=b.name,c=b.template,e=void 0;b.color!=void 0&&(e=b.color);this.create(d,c,void 0,e);if(b.location!=void 0)c=b.location,this.place(d,c,null);if(b.bounds!=void 0)c=b.bounds,this.scale(d,c);if(b.texture!=void 0)c=b.texture,this.texture(d,c,"");if(b.state!=void 0)c=b.state,this.state(d,c);if(b.rotate!=void 0)c=b.rotate,this.rotate(d,c);if(b.iter!=void 0)c=b.iter,this.setIter(d,c);if(b.onclick!=void 0)c=b.onclick,this.setOnClick(d,c)};
ObjectsFactory.prototype.refId=function(b){var d=new GameonModel_RefId,c=b.split("."),e=c.length;e==2?(d.name=c[0],d.id=parseInt(c[1])):e==3?(d.name=c[0],d.alias=c[2],d.id=-1):(d.name=b,d.id=0);return d};ObjectsFactory.prototype.getRef=function(b){var b=this.refId(b),d=this.mItems[b.name];if(d!=void 0)return d.mModel.getRefById(b,0)};ObjectsFactory.prototype.setIter=function(b,d){var c=this.mItems[this.refId(b).name];if(c!=void 0){var c=c.mModel,e=parseInt(d);c.setupIter(e)}};
ObjectsFactory.prototype.setOnClick=function(b,d){var c=this.mItems[this.refId(b).name];if(c!=void 0)c.mModel.mOnClick=d};function LayoutField(b){this.mParent=b;this.mItemRotZ=this.mItemRotY=this.mItemRotX=this.mRandRotZ=this.mRandY=this.mRandX=this.mH=this.mW=this.mZ=this.mY=this.mX=this.mID=0;this.mText=this.mItem=void 0;this.mGridy=this.mGridx=-1;this.mGridSzY=this.mGridSzX=1;this.mFieldType=LayoutField_FieldType.NONE;this.mOwner=0;this.mApp=b.mApp;this.mRef=new GameonModelRef(void 0,b.mDisplay);this.mActive=!0;this.mState=LayoutArea_State.VISIBLE}
LayoutField_FieldType={NONE:0,PLAYER_START:1,PLAYER_END:2,PLAY_FIELD:3,NORM_FIELD:4,EMPTY:8,EMPTY2:9};LayoutField.prototype.getLoc=function(b){b.setPosition(this.mX,this.mY,this.mZ)};LayoutField.prototype.setItem=function(b,d,c){b[0]=="["&&(b=b.substring(3));if(this.mItem!=void 0)this.mItem.remove(),this.mItem=void 0;this.mItem=this.mApp.mItems.createItem(b,void 0);this.mItem!=void 0&&this.setItem2(this.mItem,d,c)};
LayoutField.prototype.removeFigure=function(){if(this.mItem!=void 0)this.mItem.remove(),this.mItem=void 0};LayoutField.prototype.clear=function(){this.removeFigure();this.mOwner=0;if(this.mText!=void 0)this.mApp.world().getDomain(this.mParent.mDisplay).removeText(this.mText),this.mText=void 0};
LayoutField.prototype.setItem2=function(b,d){if(this.mItem!=void 0)this.mItem.remove(),this.mItem=void 0;this.mItem=b;if(this.mItem!=void 0){var c=this.mW,e=this.mH;c==0||e==0||(this.mItem.setPosition(this.mParent.mDisplay,this.mX,this.mY,this.mZ+0.0010,c,e,d),this.mItem.setRand(this.mRandX,this.mRandY,0,0,0,this.mRandRotZ),this.mItem.setParentLoc(this.mParent),this.mItem.addRotation(this.mItemRotX,this.mItemRotY,this.mItemRotZ),this.mItem.mModelRef.set(),this.setState(this.mState))}};
LayoutField.prototype.setText=function(b,d){var c=this.mW,e=this.mH,f=this.mX,g=this.mY,h=this.mApp.world().getDomain(this.mParent.mDisplay);if(b==void 0||b.length==0){if(this.mText!=void 0)h.removeText(this.mText),this.mText=void 0}else this.mText!=void 0?(this.mText.updateText(b,this.mParent.mDisplay),this.mText.setRef()):(this.mText=d>0?new TextItem(this.mApp,f,g,c,e,this.mZ+0.0020,b,d,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors):new TextItem(this.mApp,f,g,c,e,this.mZ+
0.0020,b,-1,this.mOwner,this.mParent.mDisplay,this.mParent.mLayout,this.mParent.mColors),h.mTexts.add(this.mText,this.mParent.mState==LayoutArea_State.VISIBLE&&this.mParent.mPageVisible),this.mText.setParent(h.mTexts)),c=this.mText.mRef,c.setAreaPosition(this.mParent.mLocation),c.setAreaRotate(this.mParent.mRotation),c.mulScale(this.mParent.mBounds),c.set()};
LayoutField.prototype.setState=function(b){if(this.mActive){if(!this.mParent.mPageVisible)b=LayoutArea_State.HIDDEN;this.mState=b;b==LayoutArea_State.VISIBLE?(this.mText!=void 0&&this.mText.setVisible(!0),this.mItem!=void 0&&this.mItem.mModelRef.setVisible(!0)):(this.mText!=void 0&&this.mText.setVisible(!1),this.mItem!=void 0&&this.mItem.mModelRef.setVisible(!1))}};LayoutField.prototype.setOwner=function(b){this.mOwner=b;this.mText!=void 0&&this.mText.setOffset(b)};
LayoutField.prototype.invertItem=function(){this.mOwner=this.mOwner==0?4:0;this.mText!=void 0&&this.mText.setOffset(this.mOwner)};
LayoutField.prototype.updateLocation=function(){var b=this.mW,d=this.mH;if(this.mItem!=void 0)if(b==0||d==0)return;else this.mItem.setPosition(this.mParent.mDisplay,this.mX,this.mY,this.mZ+0.0010,b,d,!1),this.mItem.setRand(this.mRandX,this.mRandY,0,0,0,this.mRandRotZ),this.mItem.setParentLoc(this.mParent),this.mItem.addRotation(this.mItemRotX,this.mItemRotY,this.mItemRotZ),this.mItem.mModelRef.set();this.mText!=void 0&&(this.mText.setPosition(this.mX,this.mY,this.mZ+0.0020,b,d),this.mText.setParentLoc(this.mParent),
this.mText.ref().set())};LayoutField.prototype.createAnimTrans=function(b,d,c){this.mText!=void 0&&this.mText.mModel!=void 0&&this.mText.mModel.createAnimTrans(b,d,c);if(this.mItem!=void 0){var e=this.mItem.mModel.mRefs.indexOf(this.mItem.mModelRef);this.mItem.mModel.createAnimTrans(b,d,c,e)}};
LayoutField.prototype.setScale=function(){this.mItem!=void 0&&this.mItem.mModelRef!=void 0&&this.mItem.mModelRef.setScale(this.mW,this.mH,this.mW);this.mText!=void 0&&this.mText.setRef();this.mRef!=void 0&&this.mRef.setScale(this.mW,this.mH,this.mW)};LayoutField.prototype.createAnim=function(b,d,c){this.mText!=void 0&&this.mText.mModel!=void 0&&this.mText.mModel.createAnim(b,0,d,c);if(this.mItem!=void 0){var e=this.mItem.mModel.findRef(this.mItem.mModelRef);this.mItem.mModel.createAnim(b,e,d,c)}};
LayoutField.prototype.distToCenter=function(b){var d=this.mX-b[0],c=this.mY-b[1],b=this.mZ-b[2];return Math.sqrt(d*d+c*c+b*b)};function LayoutItem(b){this.mApp=b;this.mType=GameonModelData_Type.NONE;this.mModelRef=this.mModel=void 0;this.mModelRefOld=new GameonModelRef(void 0,0);this.mOwnerMax=this.mOwner=0}LayoutItem.prototype.remove=function(){this.mItemID=-1;this.mModelRef!=void 0&&this.mModelRef.remove();return!0};LayoutItem.prototype.setEffect=function(b){this.mEffect=b};LayoutItem.prototype.setRotation=function(b,d,c){this.mModelRef.setRotate(b,d,c)};
LayoutItem.prototype.addRotation=function(b,d,c){this.mModelRef.addRotation(b,d,c)};LayoutItem.prototype.setRotation2=function(b,d,c){this.mModelRef!=void 0&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRef.setRotate(b,d,c),this.mModelRef.set())};LayoutItem.prototype.setPosition2=function(b,d,c){this.mModelRef!=void 0&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRef.setPosition(b,d,c),this.mModelRef.set())};
LayoutItem.prototype.setPosition=function(b,d,c,e,f,g){var h=!1;this.mModelRef==void 0?(this.mModelRef=new GameonModelRef(this.mModel,b),this.mModelRef.mLoc=b,h=!0):(this.mModelRefOld.copy(this.mModelRef),this.mModelRefOld.copyMat(this.mModelRef));this.mModelRef.setPosition(d,c,e+0.01);this.mModelRef.setScale(f,g,f);this.mModelRef.setRotate(0,0,0);this.mModelRef.apply();h&&(this.mModelRefOld.copy(this.mModelRef),this.mModelRefOld.copyMat(this.mModelRef));this.mOwnerMax>0&&this.mModelRef.setOwner(this.mOwner,
this.mOwnerMax)};LayoutItem.prototype.setRand=function(b,d,c,e,f,g){b>0&&(b=Math.random()*b-b/2,this.mModelRef.mPosition[0]+=b);d>0&&(b=Math.random()*d-d/2,this.mModelRef.mPosition[1]+=b);c>0&&(b=Math.random()*c-c/2,this.mModelRef.mPosition[2]+=b);e>0&&(b=Math.random()*e-e/2,this.mModelRef.mRotation[0]+=b);f>0&&(b=Math.random()*f-f/2,this.mModelRef.mRotation[1]+=b);g>0&&(b=Math.random()*g-g/2,this.mModelRef.mRotation[2]+=b)};
LayoutItem.prototype.setParentLoc=function(b){this.mModelRef!=void 0&&(this.mModelRef.setAreaPosition(b.mLocation),this.mModelRef.setAreaRotate(b.mRotation),this.mModelRef.mulScale(b.mBounds),this.mModelRef.set())};Function.prototype.inheritsFrom=function(b){b.constructor==Function?(this.prototype=new b,this.prototype.constructor=this,this.prototype.parent=b.prototype):(this.prototype=b,this.prototype.constructor=this,this.prototype.parent=b);return this};var LayoutArea_Border={NONE:0,THINRECT:1},LayoutArea_Type={NONE:0,TEXT:1,LABEL:2,TABLE:3,BUTTON:4,LAYOUT:5,CARDS:6};LayoutArea_State={NONE:0,VISIBLE:1,HIDDEN:2};
LayoutArea_Layout={NONE:0,HORIZONTAL:1,VERTICAL:2,NORTH_WEST:3,NORTH_EAST:4,SOUTH_WEST:5,SOUTH_EAST:6,DIAMOND:7,CIRCLE:8,SQUARE:9,NORTH_SOUTH:10,EAST_WEST:11,SOUTH_NORTH:12,WEST_EAST:13};LayoutArea_TextAlign={NONE:0,NORTH:1,SOUTH:2,WEST:3,EAST:4,NORTH_WEST:5,NORTH_EAST:6,SOUTH_WEST:7,SOUTH_EAST:8,CENTER:9};LayoutArea_FieldItemType={ITEM:0,TEXT:1,TEXTH:2};function LayoutArea(){}LayoutArea.prototype.removeFigure=function(b){b>=0&&b<this.mItemFields.length&&this.mItemFields[b].removeFigure()};
LayoutArea.prototype.updateData=function(){};LayoutArea.prototype.setDisplay=function(b){this.mDisplay=b};LayoutArea.prototype.setTextColor=function(b){for(var d=0;d<this.mItemFields.length;d++){var c=this.mItemFields[d];c.mText!=void 0&&c.mText.setOffset(parseInt(b))}};LayoutArea.prototype.setText_impl=function(b){this.mText=b.indexOf("#64#")==0?base64_decode(b.substring(4)):b};LayoutArea.prototype.setText=function(b){this.setText_impl(b)};LayoutArea.prototype.setText_S=function(b){this.setText_impl(b)};
LayoutArea.prototype.fieldSetItem=function(b,d){b>=0&&b<this.mSize&&(this.setField(b),this.mItemFields[b].setItem(d,!1,!1))};LayoutArea.prototype.updateDisplay=function(b){b=this.mApp.world().getDomainByName(b);if(b!=void 0)this.mDisplay=b.mRenderId};LayoutArea.prototype.onKey=function(){return!1};LayoutArea.prototype.findField=function(b,d){for(var c=0;c<this.mItemFields.length;c++)if(this.mItemFields[c].isInside(b,d)==!0)return c;return-1};
LayoutArea.prototype.clear=function(b){if(this.mPsyData!=void 0)this.mPsyData=this.mPsyData.mArea=void 0;if(this.mModelBack!=void 0&&b==!0)this.mApp.world().remove(this.mModelBack),this.mModelBack=void 0;if(this.mModel!=void 0&&b==!0)this.mApp.world().remove(this.mModel),this.mModel=void 0;this.mData=this.mText="";for(a=0;a<this.mItemFields.length;a++)this.mItemFields[a].clear();this.mOwner=[]};
LayoutArea.prototype.updateForeground=function(b){if(b=="none")this.mColorForeground=void 0;else{b=b.split(",");if(b.length>0)this.mColorForeground=this.mApp.colors().getColor(b[0]);if(b.length>1&&(this.mColorForeground2=this.mApp.textures().getTexture(b[1]),this.mModel!=void 0))this.mModel.mTextureID=this.mColorForeground2}};
LayoutArea.prototype.updateBackground=function(b,d){if(b=="none")this.mColorBackground=void 0;else{var c=b.split(",");if(c.length>0)this.mColorBackground=this.mApp.colors().getColor(c[0]);if(c.length>1&&(this.mColorBackground2=this.mApp.textures().getTexture(c[1]),this.mStrColorBackground2=c[1],this.mModelBack!=void 0))this.mModelBack.mTextureID=this.mColorBackground2}if(d&&this.mStrColorBackground2!=void 0&&this.mModelBack!=void 0){var c=this.mStrColorBackground2.split("."),e=c[0];if(c.length>1){var f=
mApp.textures().getTexture(e),e=parseInt(c[1]),g=parseInt(c[2]),c=parseInt(c[3]);this.mModelBack.setTexture(f);f=mModelBack.ref(0);f.mOwner=e;f.mTransformOwner=!0;this.mModelBack.setTextureOffset(g,c);f.mOwnerMax=g*c;this.mModelBack.mSubmodels=g*c}}};
LayoutArea.prototype.updateLayout=function(b){if(b=="hor")this.mLayout=LayoutArea_Layout.HORIZONTAL;else if(b=="ver")this.mLayout=LayoutArea_Layout.VERTICAL;else if(b=="south-east")this.mLayout=LayoutArea_Layout.SOUTH_EAST;else if(b=="south-west")this.mLayout=LayoutArea_Layout.SOUTH_WEST;else if(b=="north-east")this.mLayout=LayoutArea_Layout.NORTH_EAST;else if(b=="north-west")this.mLayout=LayoutArea_Layout.NORTH_WEST;else if(b=="circle")this.mLayout=LayoutArea_Layout.CIRCLE;else if(b=="square")this.mLayout=
LayoutArea_Layout.SQUARE;else if(b=="diamond")this.mLayout=LayoutArea_Layout.DIAMOND;else if(b=="north-south")this.mLayout=LayoutArea_Layout.NORTH_SOUTH;else if(b=="east-west")this.mLayout=LayoutArea_Layout.EAST_WEST;else if(b=="south-north")this.mLayout=LayoutArea_Layout.SOUTH_NORTH;else if(b=="west-east")this.mLayout=LayoutArea_Layout.WEST_EAST};
LayoutArea.prototype.setInitState=function(){this.mPageVisible&&this.mState==LayoutArea_State.VISIBLE?this.mParent.setVisibleArea(this,!0):this.mParent.setVisibleArea(this,!1);this.updateModelState(this.mState)};LayoutArea.prototype.getX=function(b,d,c){return c*(b/d)};LayoutArea.prototype.getY=function(b,d,c){return c*(b/d)};LayoutArea.prototype.getDivX=function(b,d){return d/b};LayoutArea.prototype.getDivY=function(b,d){return d/b};
LayoutArea.prototype.updateInitState=function(b,d){this.mState==LayoutArea_State.VISIBLE?this.mParent.setVisibleArea(this,!0):this.mState==LayoutArea_State.HIDDEN&&this.mParent.setVisibleArea(this,!1);if(d)this.mInitState=this.mState;this.updateModelState(this.mState)};
LayoutArea.prototype.updateState=function(b,d){if(b=="visible")this.mState=LayoutArea_State.VISIBLE,this.mParent.setVisibleArea(this,!0);else if(b=="hidden")this.mState=LayoutArea_State.HIDDEN,this.mParent.setVisibleArea(this,!1);if(d)this.mInitState=this.mState;this.updateModelState(this.mState)};
LayoutArea.prototype.updateModelState=function(b){if(!this.mPageVisible)b=LayoutArea_State.HIDDEN;this.mModelBack!=void 0&&this.mModelBack.setState(b);this.mModel!=void 0&&this.mModel.setState(b);for(a=0;a<this.mItemFields.length;a++)this.mItemFields[a].setState(b)};
LayoutArea.prototype.updateLocation=function(b){b=ServerkoParse.parseFloatArray(this.mLocation,b);b==5?(this.mBounds[0]=this.mLocation[2],this.mBounds[1]=this.mLocation[3],this.mLocation[2]=this.mLocation[4]):b==4&&(this.mBounds[0]=this.mLocation[2],this.mBounds[1]=this.mLocation[3],this.mLocation[2]=0);this.updateModelsTransformation()};LayoutArea.prototype.move=function(b){var d=[0,0,0];ServerkoParse.parseFloatArray(d,b);this.mLocation[0]+=d[0];this.mLocation[1]+=d[1];this.mLocation[2]+=d[2];this.updateModelsTransformation()};
LayoutArea.prototype.updateBounds=function(b){ServerkoParse.parseFloatArray(this.mBounds,b);this.updateModelsTransformation()};LayoutArea.prototype.setRotation=function(b){ServerkoParse.parseFloatArray(this.mRotation,b);this.updateModelsTransformation()};LayoutArea.prototype.setScale=function(b){ServerkoParse.parseFloatArray(this.mScale,b);this.updateModelsTransformation()};
LayoutArea.prototype.setItemScale=function(b){var d=[0,0,0,0];if(ServerkoParse.parseFloatArray(d,b)==4){var c=d[0];c<0||c>=this.mItemFields.length||mItemFields[c]==void 0||(b=[0,0,0,0],b[0]=d[1],b[1]=d[2],b[2]=d[3],d=this.mItemFields[c],d.mItem!=void 0&&(d.mItem.mModelRef.setAddScale(b),d.mItem.mModelRef.set()))}};LayoutArea.prototype.setSize=function(b){b=b.split(",");if(b.length>0)this.mSize=parseInt(b[0]);if(b.length>1)this.mSizeW=parseInt(b[1]);if(b.length>2)this.mSizeH=parseInt(b[2])};
LayoutArea.prototype.setField=function(b){if(!(b<this.mItemFields.length))for(;b>=this.mItemFields.length;){var d=new LayoutField(this);d.mID=b;this.mItemFields.push(d)}};LayoutArea.prototype.getData=function(b){var d=b.indexOf("]");return d==-1?b:b.substring(d+1)};LayoutArea.prototype.getType=function(b){return b[0]!="["?LayoutArea_FieldItemType.TEXT:b[1]=="i"?LayoutArea_FieldItemType.ITEM:b[1]=="t"?LayoutArea_FieldItemType.TEXT:b[1]=="T"?LayoutArea_FieldItemType.TEXTH:LayoutArea_FieldItemType.TEXT};
LayoutArea.prototype.pushFrontItem=function(b){for(var d=this.mItemFields.length-1;d>0;d--){var c=this.mItemFields[d];c.clear();var e=this.mItemFields[d-1];e.mText!=void 0&&e.mText.mText!=void 0&&c.setText(e.mText.mText,this.mSizeText)}this.createItem(0,b,!1)};LayoutArea.prototype.updateItems=function(b){this.createItems(b,!1)};LayoutArea.prototype.updateItem=function(b,d){var c=b.split(",");this.createItem(parseInt(c[0]),c[1],d)};
LayoutArea.prototype.createItem=function(b,d,c){var e=LayoutArea_FieldItemType.TEXT,f=void 0,e=this.getType(d),d=this.getData(d);if(!(b<0||b>this.mSize))if(this.setField(b),this.mActiveItems++,f=this.mItemFields[b],e==LayoutArea_FieldItemType.ITEM)f.mW>0&&f.setItem(d,!1,c),f.mText=void 0;else if(e==LayoutArea_FieldItemType.TEXT)f.setText(d,this.mSizeText),f.mItem=void 0;else if(e==LayoutArea_FieldItemType.TEXTH)f.setText(d,this.mSizeText),f.mItem=void 0};
LayoutArea.prototype.createItems=function(b,d){if(b!=void 0){var c=b.split(","),e,f=LayoutArea_FieldItemType.TEXT,g=void 0,h=0;this.mActiveItems++;for(var j=0;j<c.length;j++)if(e=c[j],f=this.getType(e),e=this.getData(e),this.setField(h),g=this.mItemFields[h++],f==LayoutArea_FieldItemType.ITEM)g.mW>0&&g.setItem(e,d,!1),g.mItemID=e,g.mText=void 0;else if(f==LayoutArea_FieldItemType.TEXT)g.setText(e,this.mSizeText),g.mItem=void 0}};LayoutArea.prototype.updateFields=function(b){this.createFields(b)};
LayoutArea.prototype.getFinfo=function(b,d){var c,e,f=0;e=d.split(",");c=e[0];b[0]=0;b[1]=0;b[2]=1;b[3]=0;b[4]=0;b[5]=1;for(var g=b[6]=1;g<e.length&&f<6;g++)b[f++]=parseInt(e[g]);return c};LayoutArea.prototype.createFields=function(b){this.createFields_impl(b)};LayoutArea.prototype.createFields_S=function(b){this.createFields_impl(b)};
LayoutArea.prototype.createFields_impl=function(b){if(b!=void 0)for(var d=Array(7),c=0,e=new String,b=b.split(";"),f=0,g=0,h=0,j=0,l=0,m=0,k=0,n=0;n<b.length;n++){e=this.getFinfo(d,b[n]);j=d[0];l=d[1];g=d[2];m=d[5];k=d[5];for(f=0;f<g;f++){this.setField(h);var p=this.mItemFields[h++];p.mGridx=j;p.mGridy=l;p.mGridSzX=m;p.mGridSzY=k;if(e=="empty")p.mFieldType=LayoutField_FieldType.EMPTY;else if(e=="empty2")p.mFieldType=LayoutField_FieldType.EMPTY2;else if(e=="norm")p.mFieldType=LayoutField_FieldType.NORM_FIELD;
else if(e=="play")p.mFieldType=LayoutField_FieldType.PLAY_FIELD;else if(e=="norm")p.mFieldType=LayoutField_FieldType.NORM_FIELD;else if(e=="start")p.mFieldType=LayoutField_FieldType.PLAYER_START;else if(e=="end")p.mFieldType=LayoutField_FieldType.PLAYER_END;p.mID=c;j+=d[3];l+=d[4];c++}}};LayoutArea.prototype.getItem=function(b){if(b<this.mItemFields.length)return this.mItemFields[b].mItem};
LayoutArea.prototype.placeFigure=function(b,d,c){b<this.mItemFields.length&&(b=this.mItemFields[b],b.removeFigure(),b.setItem2(d,!1,c))};LayoutArea.prototype.updateOnclick=function(b){this.mOnclick=b};LayoutArea.prototype.updateOnFocusLost=function(b){this.mOnFocusLost=b};LayoutArea.prototype.updateOnFocusGain=function(b){this.mOnFocusGain=b};LayoutArea.prototype.updateItemsA=function(b){this.createItems(b,!0)};
LayoutArea.prototype.createWorldModel=function(){if(this.mModelBack==void 0&&this.mColorBackground!=void 0){var b=new GameonModelRef(void 0,this.mDisplay);if(this.mStrColorBackground2!=void 0){var d=this.mStrColorBackground2.split(".");back=d[0];if(d.length>1){var c=this.mApp.textures().getTexture(back),e=parseInt(d[1]),f=parseInt(d[2]),d=parseInt(d[3]);this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,c,null):
this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,c,null);this.mModelBack.mParentArea=this;b.mOwner=e;b.mTransformOwner=!0;this.mModelBack.setTextureOffset(f,d);b.mOwnerMax=f*d;this.mModelBack.mSubmodels=f*d}else this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,this.mColorBackground2,null):this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,
this.mColorBackground2,null),this.mModelBack.mParentArea=this}else this.mModelBack=this.mType==LayoutArea_Type.LAYOUT?this.mApp.items().createFromType(GameonModelData_Type.BACKIMAGE,this.mColorBackground,this.mColorBackground2,null):this.mApp.items().createFromType(GameonModelData_Type.BACKGROUND,this.mColorBackground,this.mColorBackground2,null),this.mModelBack.mParentArea=this;this.mModelBack.mEnabled=!0;if(this.mColorBackground.alpha<255)this.mModelBack.mHasAlpha=!0;this.mBorder==LayoutArea_Border.THINRECT&&
this.mModelBack.createFrame(-0.5,-0.5,0.0010,0.5,0.5,0.0010,0.03/this.mBounds[0],0.03/this.mBounds[1],this.mColorForeground);b.mLoc=this.mDisplay;b.setAreaPosition(this.mLocation);this.mModelBack.addref(b);this.mModelBack.mName="back "+this.mID;this.mApp.world().add(this.mModelBack)}(this.mType==LayoutArea_Type.LABEL||this.mType==LayoutArea_Type.TABLE)&&this.createWorldModelItems()};
LayoutArea.prototype.createWorldModelItems=function(){if(!(this.mItemFields.length==0||this.mModel!=void 0)){for(var b=0,d=this.mActiveItems=0;d<this.mItemFields.length;d++){var c=this.mItemFields[d];(c.mFieldType==LayoutField_FieldType.NONE||c.mFieldType==LayoutField_FieldType.EMPTY||c.mFieldType==LayoutField_FieldType.EMPTY2)&&b++;(c.mText!=void 0||c.mItem!=void 0)&&this.mActiveItems++}if(b==this.mItemFields.length)this.createCustomModel();else{for(var b=this.mModel=new GameonModel("area"+this.mID,
this.mApp,void 0),d=0;d<this.mItemFields.length;d++){var c=this.mItemFields[d],e=c.mW,f=c.mH,g=c.mX/this.mBounds[0]-e/2,h=c.mY/this.mBounds[1]-f/2,j=c.mZ,l=e/80,m=f/80,k=void 0,k=this.mColorForeground!=void 0?this.mColorForeground:this.mApp.colors().white;switch(c.mFieldType){case LayoutField_FieldType.NORM_FIELD:this.mColorForeground!=void 0?b.createPlane(g,h,j+0.0010,g+e,h+f,j+0.0010,k,null):b.createPlane4(g,h,j+0.0010,g+e,h+f,j+0.0010,k,k);break;case LayoutField_FieldType.PLAY_FIELD:b.createOctogon(g+
l,h+m,j+0.0010,g+e-l-l,h+f-m-m,j+0.0010,k);break;case LayoutField_FieldType.PLAYER_START:b.createPlane(g+l,h+m,j+0.0010,g+e-l-l,h+f-m-m,j+0.0010,k,null);break;case LayoutField_FieldType.PLAYER_END:b.createPlane3(g,h,j+0.0010,g+e,h+f,j+0.0010,k)}c.mRef.setPosition(c.mX,c.mY,c.mZ);c.mRef.setScale(e,f,1)}c=new GameonModelRef(void 0,this.mDisplay);c.mLoc=this.mDisplay;c.setScale(this.mBounds);b.addref(c);b.mEnabled=!0;b.mIsModel=!1;this.mColorForeground2!=void 0&&this.mModel.setTexture(this.mColorForeground2);
this.mApp.world().add(this.mModel)}}};LayoutArea.prototype.distToCenter=function(b){var d=this.mLocation[0]-b[0],c=this.mLocation[1]-b[1],b=this.mLocation[2]-b[2];return Math.sqrt(d*d+c*c+b*b)};
LayoutArea.prototype.fieldClicked=function(b,d){if(this.hasTouchEvent()&&!(this.mPageVisible==!1||this.mState!=LayoutArea_State.VISIBLE)){for(var c=1E6,e=0,f=[0,0,0],g=0;g<this.mItemFields.length;g++){var h=this.mItemFields[g];if(h.mActive&&(h.mText!=void 0||h.mItem!=void 0)){var j=h.mRef,j=j.intersectsRay(b,d,f);j>=0&&j<1E6&&(j=h.distToCenter(f));j<=c&&(c=j,e=g)}}if(c!=1E6)return g=new AreaIndexPair,g.mArea=this.mID,g.mOnclick=this.mOnclick,g.mOnFocusLost=this.mOnFocusLost,g.mOnFocusGain=this.mOnFocusGain,
g.mIndex=e,g.mLoc[0]=f[0],g.mLoc[1]=f[1],g.mLoc[2]=f[2],g.mDist=c,g;this.mModelBack!=void 0&&(j=this.mModelBack.ref(0),j=j.intersectsRay(b,d,f),j>=0&&j<1E6&&(j=this.distToCenter(f)),j<=c&&(c=j,e=-1));this.mModel!=void 0&&(j=this.mModel.ref(0),j=j.intersectsRay(b,d,f),j>=0&&j<1E6&&(j=this.distToCenter(f)),j<=c&&(c=j,e=-1));if(c!=1E6)return g=new AreaIndexPair,g.mArea=this.mID,g.mOnclick=this.mOnclick,g.mOnFocusLost=this.mOnFocusLost,g.mOnFocusGain=this.mOnFocusGain,g.mIndex=e,g.mLoc[0]=f[0],g.mLoc[1]=
f[1],g.mLoc[2]=f[2],g.mDist=c,g}};LayoutArea.prototype.itemsRemoveAnim=function(b){var d=b.split("|"),b=d[0],d=d[1].split(",");parseInt(d[1]);b=b.split(",");for(d=0;d<b.length;d++){var c=this.mItemFields[parseInt(b[d])];c.mItem!=void 0&&c.removeFigure()}};
LayoutArea.prototype.itemsAnim=function(b){var d=b.split(","),b=d[0],c=d[1];d.length>2&&(c+=",",c+=d[2]);for(var d=void 0,e=0;e<this.mItemFields.length;e++){var d=this.mItemFields[e].mItem,f=new GameonModelRef(void 0,this.mDisplay);f.copy(d.mModelRef);f.copyMat(d.mModelRef);this.mApp.mAnims.animRef(b,d.mModelRef,d.mModelRef,c)}};
LayoutArea.prototype.itemAnim=function(b,d){var c=d.split(","),e=c[0],f=c[1];c.length>2&&(f+=",",f+=c[2]);for(var c=void 0,g=b.split(","),h=0;h<g.length;h++)c=this.mItemFields[parseInt(g[h])].mItem,c!=void 0&&this.mApp.mAnims.animRef(e,c.mModelRef,c.mModelRef,f)};LayoutArea.prototype.invertItem=function(b){var b=parseInt(b),d=void 0;this.setField(b);d=this.mItemFields[b];d.invertItem()};
LayoutArea.prototype.updateBorder=function(b){b=b.split(".");if(b[0]=="thinrect")this.mBorder=LayoutArea_Border.THINRECT;if(b.length>1)this.mBorderWidth=parseFloat(b[1])*0.03};LayoutArea.prototype.initAnim=function(b,d){var c=b.split(","),e=c[0],c=parseInt(c[1]);this.mModel!=void 0&&this.mModel.createAnimTrans(e,c,d,0);this.mModelBack!=void 0&&this.mModelBack.createAnimTrans(e,c,d,0);for(var f=0;f<this.mItemFields.length;f++)this.mItemFields[f].createAnimTrans(e,c,d);return c};
LayoutArea.prototype.updateModels=function(){if(this.mModelBack!=void 0){var b=this.mModelBack.ref(0);b.setScale(this.mScale);b.setPosition(this.mLocation);b.set()}};LayoutArea.prototype.hasTouchEvent=function(){return this.mHasScrollH||this.mHasScrollV?!0:this.mOnclick!=void 0&&this.mOnclick.length>0||this.mOnFocusLost!=void 0&&this.mOnFocusLost.length>0||this.mOnFocusGain!=void 0&&this.mOnFocusGain.length>0?!0:!1};
LayoutArea.prototype.updateColors=function(b){b=b.split(",");b.length>0&&(this.mColors[0]=this.mApp.colors().getColor(b[0]));b.length>1&&(this.mColors[1]=this.mApp.colors().getColor(b[1]));b.length>2&&(this.mColors[2]=this.mApp.colors().getColor(b[2]));b.length>3&&(this.mColors[3]=this.mApp.colors().getColor(b[3]))};
LayoutArea.prototype.updateModelsTransformation=function(){if(this.mID=="temparea4")this.mID="temparea4";if(this.mModelBack!=void 0){var b=this.mModelBack.ref(0);b.setAreaPosition(this.mLocation);b.setAreaRotate(this.mRotation);b.setScale(this.mBounds);b.setAddScale(this.mScale);b.set()}this.mModel!=void 0&&(b=this.mModel.ref(0),b.setAreaPosition(this.mLocation),b.addAreaPosition(0,0,0.0010),b.setAreaRotate(this.mRotation),b.setScale(this.mBounds),b.setAddScale(this.mScale),b.set());for(var d=0;d<
this.mItemFields.length;d++){var c=this.mItemFields[d];c.setScale();if(c.mItem!=void 0&&c.mItem.mModelRef!=void 0)b=c.mItem.mModelRef,b.setAreaPosition(this.mLocation),b.setAreaRotate(this.mRotation),b.mulScale(this.mBounds),b.setAddScale(this.mScale),b.set();if(c.mText!=void 0&&c.mText.mRef!=void 0)b=c.mText.mRef,b.setAreaPosition(this.mLocation),b.setAreaRotate(this.mRotation),b.mulScale(this.mBounds),b.setAddScale(this.mScale),b.set();b=c.mRef;b.setAreaPosition(this.mLocation);b.setAreaRotate(this.mRotation);
b.mulScale(this.mBounds);b.setAddScale(this.mScale);b.set()}};LayoutArea.prototype.updateScrollers=function(){};LayoutArea.prototype.createCustomModel=function(){};LayoutArea.prototype.setScrollers=function(b){b=="none"?this.mHasScrollV=this.mHasScrollH=!1:ServerkoParse.parseFloatArray(this.mScrollers,b)>0&&this.updateScrollers()};LayoutArea.prototype.setScrollerVal=function(b){this.mScrollers[0]=b;this.updateScrollers()};
LayoutArea.prototype.onDragg=function(b,d){if(this.mHasScrollH||this.mHasScrollV)if(this.mHasScrollH||this.mHasScrollV){if(this.mScollerAnim==void 0)this.mScollerAnim=this.mApp.anims().getScollerAnim(this),this.mScollerAnim.setActive(!0),this.mScollerAnim.mAreaOwner=this,this.mApp.anims().incCount();this.mScollerAnim!=void 0&&this.mScollerAnim.addScrollerData(this.mHasScrollV?d/this.mBounds[1]:-b/this.mBounds[0],200,this.mScrollers[1],this.mScrollers[2])}};
LayoutArea.prototype.anim=function(b,d,c){this.mModel!=void 0&&this.mModel.createAnim(b,0,d,c);this.mModelBack!=void 0&&this.mModelBack.createAnim(b,0,d,c);for(var e=0;e<this.mItemFields.length;e++)this.mItemFields[e].createAnim(b,d,c)};LayoutArea.prototype.assignPsyData=function(b){this.mPsyData=b};
LayoutArea.prototype.acceptTouch=function(b,d){if(this.mActiveItems==0)return!1;if(d){if(this.mOnclick==void 0||this.mOnclick.length==0)return!1}else if(!this.mHasScrollV&&!this.mHasScrollH&&(this.mOnFocusGain==void 0||this.mOnFocusGain.length==0)&&(this.mOnFocusLost==void 0||this.mOnFocusLost.length==0))return!1;return this.mDisabledInput||!this.hasTouchEvent()?!1:this.mPageVisible==!1||this.mState!=LayoutArea_State.VISIBLE?!1:this.mParent.mPagePopup.length>0&&!this.mPageId==this.mParent.mPagePopup?
!1:!0};LayoutArea.prototype.indexOfRef=function(b){if(this.mModel!=void 0&&b==this.mModel.ref(0))return-1;if(this.mModelBack!=void 0&&b==this.mModelBack.ref(0))return-1;for(var d=0;d<mItemFields.length;d++){var c=mItemFields[d];if(c!=void 0&&c.mRef==b)return d}return-1};
LayoutArea.prototype.acceptTouch=function(b,d){if(this.mActiveItems==0)return!1;if(d){if(this.mOnclick==void 0||this.mOnclick.length==0)return!1}else if(!this.mHasScrollV&&!this.mHasScrollH&&(this.mOnFocusGain==void 0||this.mOnFocusGain.length==0)&&(this.mOnFocusLost==void 0||this.mOnFocusLost.length==0))return!1;return this.mDisabledInput||!this.hasTouchEvent()?!1:this.mPageVisible==!1||this.mState!=LayoutArea_State.VISIBLE?!1:this.mParent.mPagePopup.length>0&&!this.mPageId.equals(this.mParent.mPagePopup)?
!1:!0};LayoutArea.prototype.indexOfRef=function(b){if(this.mModel!=void 0&&b==this.mModel.ref(0))return-1;if(this.mModelBack!=void 0&&b==this.mModelBack.ref(0))return-1;for(var d=0;d<this.mItemFields.length;d++){var c=this.mItemFields[d];if(c!=void 0&&c.mRef==b)return d}return-1};function LayoutAreaCards(b,d){this.mApp=d;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=0;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=
this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mPsyData=void 0;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;this.mRandZ=this.mRandY=this.mRandX=this.mModifier=0;var c=b.charAt(b.length-1);if(c>="0"&&c<="9")this.mModifier=(c-0)*1+1,this.mRandX=this.mModifier*0.01,this.mRandY=
this.mModifier*0.01,this.mRandZ=this.mModifier*0.01;if(b.indexOf("deckback")==0)this.mSubType=LayoutAreaCards_SubType.DECKBACK;else if(b.indexOf("deck")==0)this.mSubType=LayoutAreaCards_SubType.DECK;else if(b.indexOf("hand")==0)this.mSubType=LayoutAreaCards_SubType.HAND;else if(b.indexOf("inhand")==0)this.mSubType=LayoutAreaCards_SubType.INHAND;else if(b.indexOf("cards")==0)this.mSubType=LayoutAreaCards_SubType.CARDS;this.mType=LayoutArea_Type.CARDS;this.mPageVisible=!1;this.mThickness=5.0E-4;this.mActive=
!0;this.mSizeText=-1;this.mScrollers=[0,-0.5,0.5,0,0,0];this.mHasScrollV=this.mHasScrollH=!1;this.mScollerAnim=void 0;this.mActiveItems=1;this.mBorderWidth=0.03}LayoutAreaCards.prototype=new LayoutArea;LayoutAreaCards.prototype.constructor=LayoutAreaCards;LayoutAreaCards_SubType={NONE:0,DECK:1,DECKBACK:2,HAND:3,INHAND:4,CARDS:5};
LayoutAreaCards.prototype.initLayout=function(){this.mSubType==LayoutAreaCards_SubType.DECK?this.initDeck(!1):this.mSubType==LayoutAreaCards_SubType.DECKBACK?this.initDeck(!0):this.mSubType==LayoutAreaCards_SubType.HAND?this.initHand():this.mSubType==LayoutAreaCards_SubType.INHAND?this.initInHand():this.mSubType==LayoutAreaCards_SubType.CARDS&&this.initCards()};
LayoutAreaCards.prototype.initDeck=function(b){for(var d=0,c=0,e=null,f=0;f<this.mSize;f++){this.setField(f);e=this.mItemFields[c++];x=e.mGridx;y=e.mGridy;e.mX=0;e.mY=0;e.mW=1;e.mH=1;e.mZ=this.mThickness+f*this.mThickness;e.mRandX=this.mRandX;e.mRandY=this.mRandY;e.mRandRotZ=this.mRandZ*360;if(b)e.mItemRotY=180;d++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[2]=90:this.mLayout==LayoutArea_Layout.EAST_WEST?this.mRotation[2]=270:this.mLayout==LayoutArea_Layout.NORTH_SOUTH?this.mRotation[2]=
0:this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[2]=180)};LayoutAreaCards.prototype.initHand=function(){for(var b=0,d=this.mBounds[0],c=d-d/2.2,e=0,f=this.mThickness,g=0;g<this.mSize;g++){this.setField(g);var h=this.mItemFields[e++];h.mX=g*c+c/2-d/2+this.mRandX;h.mY=0+this.mRandY;h.mW=1-1/2.2;h.mH=1;h.mZ=0+g*f;if(this.mRandZ>0)h.mItemRotZ=(this.mRandZ-0.05)*360;h.mRef.setPosition(h.mX,0,h.mZ);h.mRef.setScale(c,1,1);b++}};
LayoutAreaCards.prototype.initInHand=function(){for(var b=0,d=this.mBounds[0],c=d/this.mSize,e=d/this.mSizeW,f=0,g=0;g<this.mSize;g++){this.setField(g);var h=this.mItemFields[f++];h.mX=g*c+c/2-d/2;h.mW=1/this.mSizeW;h.mH=1;h.mZ=this.mThickness+g*this.mThickness;h.mY=0;h.mRandRotZ=this.mRandZ*360;h.mRef.setPosition(h.mX,0,h.mZ);h.mRef.setScale(e,1,1);b++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[0]=45:this.mLayout==LayoutArea_Layout.EAST_WEST?(this.mRotation[0]=45,this.mRotation[2]=
180):this.mLayout==LayoutArea_Layout.NORTH_SOUTH?(this.mRotation[0]=90,this.mRotation[1]=90):this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[0]=90,this.mRotation[1]=270)};
LayoutAreaCards.prototype.initCards=function(){for(var b=0,d=this.mBounds[0],c=d/this.mSize,e=d/this.mSizeW,f=this.mBounds[1],g=0,h=this.mThickness,j=0;j<this.mSize;j++){this.setField(j);var l=this.mItemFields[g++];l.mX=j*c+c/2-d/2;l.mW=1/this.mSizeW;l.mH=1;l.mZ=0+h+j*this.mThickness;l.mY=0;if(this.mRandZ>0)l.mItemRotZ=(this.mRandZ-0.05)*360;l.mRef.setPosition(l.mX,0,l.mZ);l.mRef.setScale(e,f,1);b++}this.mLayout==LayoutArea_Layout.WEST_EAST?this.mRotation[2]=0:this.mLayout==LayoutArea_Layout.EAST_WEST?
this.mRotation[2]=180:this.mLayout==LayoutArea_Layout.NORTH_SOUTH?this.mRotation[2]=90:this.mLayout==LayoutArea_Layout.SOUTH_NORTH&&(this.mRotation[2]=270)};function LayoutAreaLayout(b,d){this.mApp=d;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=0;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=
this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mPsyData=void 0;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;if(b=="grid")this.mSubType=LayoutAreaLayout_SubType.GRID;else if(b=="back")this.mSubType=LayoutAreaLayout_SubType.BACK;this.mType=LayoutArea_Type.LAYOUT;this.mPageVisible=
!1;this.mActive=!0;this.mSizeText=-1;this.mScrollers=[0,-0.5,0.5,0,0,0];this.mHasScrollV=this.mHasScrollH=!1;this.mScollerAnim=void 0;this.mActiveItems=1;this.mBorderWidth=0.03}LayoutAreaLayout.prototype=new LayoutArea;LayoutAreaLayout.prototype.constructor=LayoutAreaLayout;LayoutAreaLayout_SubType={NONE:0,GRID:1,BACK:2};LayoutAreaLayout.prototype.initLayout=function(){this.mSubType==LayoutAreaLayout_SubType.GRID&&this.initGrid()};
LayoutAreaLayout.prototype.initGrid=function(){for(var b=null,d=this.mBounds[0],c=this.mBounds[1],e=0,f=0,g=0,h=this.getDivX(this.mSizeW,d),j=this.getDivY(this.mSizeH,c);g<this.mSize;)this.setField(g),b=mItemFields[g++],b.mX=0+this.getX(e,this.mSizeW,d)-d/2,b.mY=0+this.getY(f,this.mSizeH,c)-c/2,b.mW=h,b.mH=j,b.mRef.setPosition(b.mX,b.mY,b.mZ),b.mRef.setScale(h,j,1),e++,e>=this.mSizeW&&(e=0,f++)};function LayoutAreaTable(b,d){this.mApp=d;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=0;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeW=this.mSize=0;this.mSizeH=1;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=
this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mPsyData=void 0;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;var c=b.charAt(b.length-1);if(c>="0"&&c<="9")this.mModifier=c-0;if(b.indexOf("sgrid")==0)this.mSubType=LayoutAreaTable_SubType.SGRID;else if(b.indexOf("cardt")==
0)this.mSubType=LayoutAreaTable_SubType.CARDTABLE;else if(b.indexOf("list")==0)this.mSubType=LayoutAreaTable_SubType.LIST;else if(b.indexOf("hlist")==0)mHasScrollH=!0,this.mSubType=LayoutAreaTable_SubType.HLIST;else if(b.indexOf("plainlist")==0)this.mSubType=LayoutAreaTable_SubType.PLAINLIST;this.mType=LayoutArea_Type.TABLE;this.mPageVisible=!1;this.mActive=!0;this.mSizeText=-1;this.mScrollers=[0,-0.5,0.5,0,0,0];this.mHasScrollV=this.mHasScrollH=!1;this.mScollerAnim=void 0;this.mActiveItems=1;this.mModifier=
0;this.mFieldsData=this.mModifiersH=this.mModifiersW=this.mModifiersZ=this.mListScaleMinH=this.mListScaleMaxH=this.mListScaleMinW=this.mListScaleMaxW=void 0;this.mBorderWidth=0.03}LayoutAreaTable.prototype=new LayoutArea;LayoutAreaTable.prototype.constructor=LayoutAreaTable;LayoutAreaTable_SubType={NONE:0,SGRID:1,CARDTABLE:2,LIST:3,HLIST:4,PLAINLIST:5};
LayoutAreaTable.prototype.initLayout=function(){this.mSubType==LayoutAreaTable_SubType.SGRID?this.initSquareGrid():this.mSubType!=LayoutAreaTable_SubType.CARDTABLE&&(this.mSubType==LayoutAreaTable_SubType.LIST?this.initList():this.mSubType==LayoutAreaTable_SubType.HLIST?this.initHList():mSubType==LayoutAreaTable_SubType.PLAINLIST&&this.initPlainList())};
LayoutAreaTable.prototype.initSquareGrid=function(){for(var b=0,d=0,c=0,e=this.mBounds[0],f=this.mBounds[1],g=0,h=this.getDivX(this.mSizeW,e),j=1/this.mSizeW,l=this.getDivY(this.mSizeH,f),m=1/this.mSizeH,k=0,n=0,p=0;p<this.mSize;p++){this.setField(p);var o=this.mItemFields[g++];o.mGridx>=0?(d=o.mGridx,c=o.mGridy):(d=k,c=n);k++;k>=this.mSizeW&&(k=0,n++);o.mX=this.getX(d,this.mSizeW,e)+h/2-e/2;o.mY=this.getY(c,this.mSizeH,f)+l/2-f/2;o.mW=j*o.mGridSzX;o.mH=m*o.mGridSzY;o.mRef.setPosition(o.mX,o.mY,o.mZ);
o.mRef.setScale(o.mW,o.mH,1);o.mZ=0.0010;if(o.mFieldType==LayoutField_FieldType.EMPTY2)d=o.mW,c=o.mH,d*=0.33,c*=0.33,o.mW-=d,o.mH-=c,o.mX+=d/2,o.mY+=c/2;b++}};LayoutAreaTable.prototype.setTitle=function(){};LayoutAreaTable.prototype.initList=function(){this.mHasScrollV=!0;this.mListScaleMinH=1-this.mModifier/12;this.mListScaleMaxH=1+this.mModifier/12;this.mListScaleMinW=1-this.mModifier/12;this.mListScaleMaxW=1;this.createDefaultFields();this.updateScrollers()};
LayoutAreaTable.prototype.getScrollCoords=function(b,d,c){var e=1/(this.mSizeW-1);d*=e;d-=(this.mScrollers[0]+0.5)*e*(this.mSize/this.mSizeH);var f=d-e/2,g=d+e/2;if(g<-0.5||f>0.5)return!1;c.mX=0;c.mY=0;c.mW=1;c.mH=1;if(this.mHasScrollV){c.mX-=0.05*this.mBounds[0];c.mY-=d*this.mBounds[1];c.mZ=0;c.mW*=0.9;g>0.5?(c.mH*=e-(g-0.5),c.mY+=(g-0.5)*this.mBounds[1]/2):f<-0.5?(c.mH*=e-(-0.5-f),c.mY-=(-0.5-f)*this.mBounds[1]/2):c.mH*=e;if(c.mH<0)return!1;c.mX+=this.mFieldsData[b*4]*this.mBounds[0];c.mY+=this.mFieldsData[b*
4+1]*this.mBounds[1]*e}else if(this.mHasScrollH){c.mX+=d*this.mBounds[0];c.mY-=0.05*this.mBounds[1];c.mZ=0;c.mH*=0.9;g>0.5?(c.mW*=e-(g-0.5),c.mX-=(g-0.5)*this.mBounds[0]/2):f<-0.5?(c.mW*=e-(-0.5-f),c.mX+=(-0.5-f)*this.mBounds[0]/2):c.mW*=e;if(c.mW<0)return!1;c.mX+=this.mFieldsData[b*4]*this.mBounds[0]*e;c.mY+=this.mFieldsData[b*4+1]*this.mBounds[1]}c.mW*=this.mFieldsData[b*4+2];c.mH*=this.mFieldsData[b*4+3];return!0};
LayoutAreaTable.prototype.calcScrollCoords=function(b,d,c,e){var f=1/(this.mSizeW-1),d=(d-c/2)*f+f/2;e.mX=0;e.mY=0;e.mW=1;e.mH=1;if(this.mHasScrollV)e.mX-=0.05*this.mBounds[0],e.mY-=d*this.mBounds[1],e.mZ=0,e.mW*=0.9,e.mH*=f,e.mX+=this.mFieldsData[b*4]*this.mBounds[0],e.mY+=this.mFieldsData[b*4+1]*this.mBounds[1]*f;else if(this.mHasScrollH)e.mX+=d*this.mBounds[0],e.mY-=0.05*this.mBounds[1],e.mZ=0,e.mH*=0.9,e.mW*=f;e.mW*=mFieldsData[b*4+2];e.mH*=mFieldsData[b*4+3]};
LayoutAreaTable.prototype.createCustomModel=function(){if(this.mSubType==LayoutAreaTable_SubType.LIST||this.mSubType==LayoutAreaTable_SubType.HLIST){var b=this.mModel=new GameonModel("scroll"+this.mID,this.mApp),d=void 0,d=this.mColorForeground!=void 0?this.mColorForeground:this.mApp.colors().white,c=this.mSizeW/this.mSize,e=new GameonModelRef(void 0,this.mDisplay,void 0);e.mLoc=this.mDisplay;var f=this.mScrollers[0]*c*2;this.mSubType==LayoutAreaTable_SubType.LIST?(b.createPlane(0.43,-c/2,0.01,0.5,
c/2,0.01,d,null),e.setPosition(0,-f*this.mBounds[1],0.0010)):(b.createPlane(-c/2,0.43,0.01,c/2,0.5,0.01,d,null),e.setPosition(f*this.mBounds[0],0,0.0010));b.addref(e);b.mEnabled=!0;b.mIsModel=!1;this.mColorForeground2>0&&this.mModel.setTexture(this.mColorForeground2);this.mApp.world().add(b);this.mActiveItems==0&&(b.setState(LayoutArea_State.HIDDEN),b.setActive(!1))}};
LayoutAreaTable.prototype.createDefaultFields=function(){var b=this.mSizeW/this.mSize;this.mScrollers[1]=-0.5+b/2;this.mScrollers[2]=0.5-b/2;this.mScrollers[0]<this.mScrollers[1]?this.mScrollers[0]=this.mScrollers[1]:this.mScrollers[0]>this.mScrollers[2]&&(this.mScrollers[0]=this.mScrollers[2]);this.mModifiersW=Array(this.mSizeW);this.mModifiersH=Array(this.mSizeW);this.mModifiersZ=Array(this.mSizeW);var b=(this.mListScaleMaxW-this.mListScaleMinW)/this.mSizeW,d=(this.mListScaleMaxH-this.mListScaleMinH)/
this.mSizeW;b*=2;d*=2;for(var c=0,e=0;e<this.mSizeW;e++)this.mModifiersH[e]=this.mListScaleMinH+c*d,this.mModifiersW[e]=this.mListScaleMinW+c*b,this.mModifiersZ[e]=c*0.01,e<this.mSizeW/2-1?c++:c--;if(this.mFieldsData==void 0)if(this.mFieldsData=Array(this.mSizeH*4),b=1/this.mSizeH,this.mSubType==LayoutAreaTable_SubType.LIST)for(e=0;e<this.mSizeH;e++)this.mFieldsData[e*4]=(-0.5+e*b+b/2)*this.mBounds[0],this.mFieldsData[e*4+1]=0,this.mFieldsData[e*4+2]=b,this.mFieldsData[e*4+3]=1;else for(e=0;e<this.mSizeH;e++)this.mFieldsData[e*
4]=0,this.mFieldsData[e*4+1]=(-0.5+e*b+b/2)*this.mBounds[1],this.mFieldsData[e*4+2]=1,this.mFieldsData[e*4+3]=b};
LayoutAreaTable.prototype.createFields=function(b){if(this.mSubType==LayoutAreaTable_SubType.LIST||this.mSubType==LayoutAreaTable_SubType.HLIST||this.mSubType==LayoutAreaTable_SubType.PLAINLIST){this.createDefaultFields();for(var d=Array(4),c=0,e=b.split(";"),f=0;f<b.length&&c<this.mSizeW;f++)ServerkoParse.parseFloatArray(d,e[f]),this.mFieldsData[c*4]=d[0],this.mFieldsData[c*4+1]=d[1],this.mFieldsData[c*4+2]=d[2],this.mFieldsData[c*4+3]=d[3],c++}else this.createFields_S(b)};
LayoutAreaTable.prototype.initHList=function(){this.mHasScrollH=!0;this.mHasScrollV=!1;this.mListScaleMinW=1-this.mModifier/12;this.mListScaleMaxW=1+this.mModifier/12;this.mListScaleMinH=1-this.mModifier/12;this.mListScaleMaxH=1;this.createDefaultFields();this.updateScrollers()};LayoutAreaTable.prototype.initPlainList=function(){this.mHasScrollH=this.mHasScrollV=!1;this.updateFields()};
LayoutAreaTable.prototype.updateScrollers=function(){var b=!1;!this.mHasScrollH&&!this.mHasScrollV&&(b=!0);for(var d=0,c=0,e=0,f=0;f<this.mSize;f++){this.setField(f);var g=this.mItemFields[f];this.getScrollCoords(c,e,g)||b?(g.mH*=this.mModifiersH[d],g.mW*=this.mModifiersW[d],g.mZ+=this.mModifiersZ[d],c==this.mSizeH-1&&d<this.mModifiersH.length-1&&d++,g.mActive=!0,g.mRef.setPosition(g.mX,g.mY,g.mZ),g.mRef.setScale(g.mW,g.mH,1),g.mRef.set(),g.updateLocation(),g.setState(LayoutArea_State.VISIBLE)):(g.mH=
1,g.mW=1,g.setState(LayoutArea_State.HIDDEN),g.mActive=!1);c++;c>=this.mSizeH&&(c=0,e++)}this.mModel!=void 0&&!b&&(this.mModel.setActive(!0),this.mModel.setState(LayoutArea_State.VISIBLE),b=this.mModel.ref(0),d=this.mScrollers[0],this.mHasScrollV?b.setPosition(0,-d*this.mBounds[1],0.0010):b.setPosition(d*this.mBounds[0],0,0.0010),b.set())};LayoutAreaTable.prototype.setText=function(b){this.setText_S(b);(this.mSubType==LayoutAreaTable_SubType.LIST||this.mSubType==LayoutAreaTable_SubType.HLIST)&&this.pushFrontItem(b)};
LayoutAreaTable.prototype.updateFields=function(){for(var b=0,d=0,c=0,e=0;e<this.mSize;e++){this.setField(e);var f=this.mItemFields[e];this.calcScrollCoords(d,c,this.mSizeW,f);d==this.mSizeH-1&&b++;f.mActive=!0;f.mRef.setPosition(f.mX,f.mY,f.mZ);f.mRef.setScale(f.mW,f.mH,1);f.mRef.set();f.updateLocation();f.setState(LayoutArea_State.VISIBLE);d++;d>=this.mSizeH&&(d=0,c++)}};LayoutAreaText_SubType={MLINE:0,MLINEW:1,LABEL:2,BUTTON:3,BUTTON2:4,BUTTON3:5,NONE:6};
function LayoutAreaText(b,d){this.mApp=d;this.mID=void 0;this.mBounds=[1,1,1];this.mLocation=[0,0,0,0,0];this.mRotation=[0,0,0];this.mScale=[1,1,1];this.mType=LayoutArea_Type.NONE;this.mInitState=this.mState=LayoutArea_State.VISIBLE;this.mOwner=[];this.mParent=void 0;this.mLayout=LayoutArea_Layout.NONE;this.mDisplay=0;this.mItemFields=[];this.mData=this.mText=void 0;this.mSizeH=this.mSizeW=this.mSize=0;this.mModelBack=this.mModel=this.mPageId=this.mWorld=this.mOnFocusGain=this.mOnFocusLost=this.mOnclick=
this.mColorBackground2=this.mColorBackground=this.mColorForeground2=this.mColorForeground=void 0;this.mSubType=LayoutAreaCards_SubType.NONE;this.mColors=Array(4);this.mColors[0]=this.mApp.mColors.white;this.mColors[1]=this.mApp.mColors.white;this.mColors[2]=this.mApp.mColors.white;this.mColors[3]=this.mApp.mColors.white;this.mPsyData=void 0;this.mModifier=0;var c=b.charAt(b.length-1);if(c>="0"&&c<="9")this.mModifier=(c-0)*1+1;if(b.indexOf("mlinew")==0)this.mSubType=LayoutAreaText_SubType.MLINEW;else if(b.indexOf("mline")==
0)this.mSubType=LayoutAreaText_SubType.MLINE;else if(b.indexOf("label")==0)this.mSubType=LayoutAreaText_SubType.LABEL;else if(b.indexOf("button")==0)this.mSubType=LayoutAreaText_SubType.BUTTON;this.mType=LayoutArea_Type.TEXT;this.mPageVisible=!1;this.mActive=!0;this.mSizeText=-1;this.mScrollers=[0,-0.5,0.5,0,0,0];this.mHasScrollV=this.mHasScrollH=!1;this.mScollerAnim=void 0;this.mActiveItems=1;this.mBorderWidth=0.03}LayoutAreaText.prototype=new LayoutArea;LayoutAreaText.prototype.constructor=LayoutAreaText;
LayoutAreaText.prototype.getTextOnLine=function(b){if(this.mText==void 0)return"";var d=b*this.mSizeW,b=(b+1)*this.mSizeW;if(d>=this.mText.length)return"";if(b>=this.mText.length)b=this.mText.length;return this.mText.substring(d,b)};LayoutAreaText.prototype.getTextW=function(b,d){for(var c=new String,e=0;d.length>0;){var f=d[0];if(e+f.length+1>b)break;c+=" ";c+=f;e=c.length;d.splice(0,1)}return c};
function strtrim(b){for(var d=0,c=b.length-1;d<b.length&&b[d]==" ";)d++;for(;c>d&&b[c]==" ";)c-=1;return b.substring(d,c+1)}
LayoutAreaText.prototype.initMLineW=function(){if(this.mText!=void 0)for(var b=this.mBounds[1],d=0,c=strtrim(this.mText).split(" "),e=b/this.mSize,f=1/this.mSize,g=this.mSize-1;g>=0;g--){this.setField(d);var h=this.mItemFields[d];h.mX=0;h.mY=0-b/2+g*e+e/2;h.mZ=0;h.mW=0.95;h.mH=f-f/20;h.mRef.setPosition(h.mX,h.mY,h.mZ);h.mRef.setScale(h.mW,h.mH,1);h.setText(this.getTextW(this.mSizeW,c),this.mSizeW);d++}};
LayoutAreaText.prototype.initMLine=function(){for(var b=this.mBounds[1],d=0,c=b/this.mSize,e=1/this.mSize,f=this.mSize-1;f>=0;f--){this.setField(d);var g=this.mItemFields[d];g.mX=0;g.mY=0-b/2+f*c+c/2;g.mZ=0;g.mW=0.95;g.mH=e-e/20;if(this.mOwner.length>0)g.mOwner=this.mOwner[0];g.mRef.setPosition(g.mX,g.mY,g.mZ);g.mRef.setScale(g.mW,g.mH,1);g.setText(this.getTextOnLine(d),this.mSizeW);d++}};
LayoutAreaText.prototype.initLabel=function(){this.setField(0);var b=this.mItemFields[0];b.mH=1;b.mW=1;b.mX=0;b.mY=0;b.mZ=0;if(this.mOwner.length>0)b.mOwner=this.mOwner[0];b.setText(this.mText,this.mSize)};
LayoutAreaText.prototype.initButton=function(){this.setField(0);var b=this.mBounds[0],d=this.mBounds[0]/this.mBounds[1],c=1-(11-this.mModifier)/10,e=1-c*1.2,f=b*(0.5-e/2),c=b*(-0.5+c/2);this.mModifier==0&&(e=0.8,f=0,c=-b/2.1+1/d);b=this.mItemFields[0];b.mH=1-this.mModifier/10;b.mW=e;b.mX=f;b.mY=0;b.mZ=0;b.mRef.setPosition(b.mX,b.mY,b.mZ);b.mRef.setScale(b.mW,b.mH,1);b.setText(this.mText,this.mSize);this.setField(1);b=this.mItemFields[1];b.mH=1;b.mW=1/d;b.mX=c;b.mY=0;b.mZ=0;b.updateLocation();b.mRef.setPosition(b.mX,
b.mY,b.mZ);b.mRef.setScale(b.mW,b.mH,1)};LayoutAreaText.prototype.initLayout=function(){this.mSizeText=this.mSize;this.mSubType==LayoutAreaText_SubType.LABEL?this.initLabel():this.mSubType==LayoutAreaText_SubType.MLINE?this.initMLine():this.mSubType==LayoutAreaText_SubType.MLINEW?this.initMLineW():this.mSubType==LayoutAreaText_SubType.BUTTON&&this.initButton()};
LayoutAreaText.prototype.setText=function(b){this.setText_S(b);if(b.length==0&&this.mItemFields.length>0)for(b=0;b<this.mItemFields.length;b++)this.mItemFields[b].setText("",0);else if(b.length>0&&this.mItemFields.length>0)if(this.mSubType==LayoutAreaText_SubType.LABEL||this.mSubType==LayoutAreaText_SubType.BUTTON)this.mItemFields[0].setText(b,this.mSize);else if(this.mSubType==LayoutAreaText_SubType.MLINE)for(var d=0,b=this.mSize-1;b>=0;b--){var c=this.mItemFields[d];c.setText(this.getTextOnLine(d),
this.mSizeW);d++}else if(this.mSubType==LayoutAreaText_SubType.MLINEW)for(var d=0,e=this.mText.split(" "),b=this.mSize-1;b>=0;b--)c=this.mItemFields[d],c.setText(this.getTextW(this.mSizeW,e),this.mSizeW),d++};function GMath(){}GMath.tmpV1=Array(3);GMath.tmpV2=Array(3);GMath.tmpV3=Array(3);GMath.tmpV4=Array(3);GMath.tmpW=Array(3);GMath.tmpW0=Array(3);GMath.mPi=3.14159265;GMath.mIdentity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];GMath.multMatrixVec=function(b,d,c){for(var e=0;e<4;e+=1)c[e]=d[0]*b[0+e]+d[1]*b[4+e]+d[2]*b[8+e]+d[3]*b[12+e]};GMath.matricesMultiply=function(b,d,c){var e,f,g;for(e=0;e<4;e++)for(f=0;f<4;f++){var h=4*e+f;for(g=c[h]=0;g<4;g++)c[h]+=b[4*e+g]*d[4*g+f]}};
GMath.matrixVecMultiply=function(b,d,c){var e,f,g;for(e=0;e<4;e++)for(f=0;f<1;f++){var h=4*e+f;for(g=c[h]=0;g<4;g++)c[h]+=b[4*e+g]*d[4*g+f]}};GMath.matrixVecMultiply2=function(b,d,c,e,f){var g,h;for(g=0;g<4;g++)for(h=e[g+f]=0;h<4;h++)e[g+f]+=b[4*h+g]*d[h+c]};
GMath.invertMatrix=function(b,d){var c=[];c[0]=b[5]*b[10]*b[15]-b[5]*b[11]*b[14]-b[9]*b[6]*b[15]+b[9]*b[7]*b[14]+b[13]*b[6]*b[11]-b[13]*b[7]*b[10];c[4]=-b[4]*b[10]*b[15]+b[4]*b[11]*b[14]+b[8]*b[6]*b[15]-b[8]*b[7]*b[14]-b[12]*b[6]*b[11]+b[12]*b[7]*b[10];c[8]=b[4]*b[9]*b[15]-b[4]*b[11]*b[13]-b[8]*b[5]*b[15]+b[8]*b[7]*b[13]+b[12]*b[5]*b[11]-b[12]*b[7]*b[9];c[12]=-b[4]*b[9]*b[14]+b[4]*b[10]*b[13]+b[8]*b[5]*b[14]-b[8]*b[6]*b[13]-b[12]*b[5]*b[10]+b[12]*b[6]*b[9];c[1]=-b[1]*b[10]*b[15]+b[1]*b[11]*b[14]+
b[9]*b[2]*b[15]-b[9]*b[3]*b[14]-b[13]*b[2]*b[11]+b[13]*b[3]*b[10];c[5]=b[0]*b[10]*b[15]-b[0]*b[11]*b[14]-b[8]*b[2]*b[15]+b[8]*b[3]*b[14]+b[12]*b[2]*b[11]-b[12]*b[3]*b[10];c[9]=-b[0]*b[9]*b[15]+b[0]*b[11]*b[13]+b[8]*b[1]*b[15]-b[8]*b[3]*b[13]-b[12]*b[1]*b[11]+b[12]*b[3]*b[9];c[13]=b[0]*b[9]*b[14]-b[0]*b[10]*b[13]-b[8]*b[1]*b[14]+b[8]*b[2]*b[13]+b[12]*b[1]*b[10]-b[12]*b[2]*b[9];c[2]=b[1]*b[6]*b[15]-b[1]*b[7]*b[14]-b[5]*b[2]*b[15]+b[5]*b[3]*b[14]+b[13]*b[2]*b[7]-b[13]*b[3]*b[6];c[6]=-b[0]*b[6]*b[15]+
b[0]*b[7]*b[14]+b[4]*b[2]*b[15]-b[4]*b[3]*b[14]-b[12]*b[2]*b[7]+b[12]*b[3]*b[6];c[10]=b[0]*b[5]*b[15]-b[0]*b[7]*b[13]-b[4]*b[1]*b[15]+b[4]*b[3]*b[13]+b[12]*b[1]*b[7]-b[12]*b[3]*b[5];c[14]=-b[0]*b[5]*b[14]+b[0]*b[6]*b[13]+b[4]*b[1]*b[14]-b[4]*b[2]*b[13]-b[12]*b[1]*b[6]+b[12]*b[2]*b[5];c[3]=-b[1]*b[6]*b[11]+b[1]*b[7]*b[10]+b[5]*b[2]*b[11]-b[5]*b[3]*b[10]-b[9]*b[2]*b[7]+b[9]*b[3]*b[6];c[7]=b[0]*b[6]*b[11]-b[0]*b[7]*b[10]-b[4]*b[2]*b[11]+b[4]*b[3]*b[10]+b[8]*b[2]*b[7]-b[8]*b[3]*b[6];c[11]=-b[0]*b[5]*
b[11]+b[0]*b[7]*b[9]+b[4]*b[1]*b[11]-b[4]*b[3]*b[9]-b[8]*b[1]*b[7]+b[8]*b[3]*b[5];c[15]=b[0]*b[5]*b[10]-b[0]*b[6]*b[9]-b[4]*b[1]*b[10]+b[4]*b[2]*b[9]+b[8]*b[1]*b[6]-b[8]*b[2]*b[5];var e=b[0]*c[0]+b[1]*c[4]+b[2]*c[8]+b[3]*c[12];if(e===0)return!1;for(var e=1/e,f=0;f<16;f+=1)d[f]=c[f]*e;return!0};
GMath.unProject=function(b,d,c,e,f,g,h){b=[b,d,c,1];d=[];GMath.matricesMultiply(e,f,d);if(!GMath.invertMatrix(d,d))return!1;b[0]=(b[0]-g[0])/g[2];b[1]=(b[1]-g[1])/g[3];b[0]=b[0]*2-1;b[1]=b[1]*2-1;b[2]=b[2]*2-1;e=[];GMath.multMatrixVec(d,b,e);if(e[3]===0)return!1;e[0]/=e[3];e[1]/=e[3];e[2]/=e[3];h[0]=e[0];h[1]=e[1];h[2]=e[2];return!0};GMath.normalizeVector=function(b){var d=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],d=Math.sqrt(d);b[0]/=d;b[1]/=d;b[2]/=d};
GMath.normalOfPlane=function(b,d,c){b[0]=d[1]*c[2]-c[1]*d[2];b[1]=d[2]*c[0]-c[2]*d[0];b[2]=d[0]*c[1]-c[0]*d[1]};GMath.matrixTranslate=function(b,d,c,e){d=[1,0,0,0,0,1,0,0,0,0,1,0,d,c,e,1];c=Array(16);for(e=0;e<16;e++)c[e]=b[e];GMath.matricesMultiply(d,c,b)};
GMath.project=function(b,d,c,e,f,g,h){var j=Array(8);j[0]=e[0]*b+e[4]*d+e[8]*c+e[12];j[1]=e[1]*b+e[5]*d+e[9]*c+e[13];j[2]=e[2]*b+e[6]*d+e[10]*c+e[14];j[3]=e[3]*b+e[7]*d+e[11]*c+e[15];j[4]=f[0]*j[0]+f[4]*j[1]+f[8]*j[2]+f[12]*j[3];j[5]=f[1]*j[0]+f[5]*j[1]+f[9]*j[2]+f[13]*j[3];j[6]=f[2]*j[0]+f[6]*j[1]+f[10]*j[2]+f[14]*j[3];j[7]=-j[2];if(j[7]==0)return 0;j[7]=1/j[7];j[4]*=j[7];j[5]*=j[7];j[6]*=j[7];h[0]=(j[4]*0.5+0.5)*g[2]+g[0];h[1]=(j[5]*0.5+0.5)*g[3]+g[1];h[2]=(1+j[6])*0.5;return 1};
GMath.frustrum=function(b,d,c,e,f,g){return[2*f/(d-b),0,(d+b)/(d-b),0,0,2*f/(e-c),(e+c)/(e-c),0,0,0,-(g+f)/(g-f),-1,0,0,-2*g*f/(g-f),0]};
GMath.lookAt=function(b,d,c,e){var f=[0,0,0],g=[0,0,0],h=[0,0,0];f[0]=c[0]-d[0];f[1]=c[1]-d[1];f[2]=c[2]-d[2];GMath.normalizeVector(f);GMath.normalOfPlane(g,f,e);GMath.normalizeVector(g);GMath.normalOfPlane(h,g,f);b[0]=g[0];b[4]=g[1];b[8]=g[2];b[12]=0;b[1]=h[0];b[5]=h[1];b[9]=h[2];b[13]=0;b[2]=-f[0];b[6]=-f[1];b[10]=-f[2];b[14]=0;b[3]=b[7]=b[11]=0;b[15]=1;GMath.matrixTranslate(b,-d[0],-d[1],-d[2])};
GMath.matrixRotate=function(b,d,c,e,f){d*=Math.PI/180;var g=Math.cos(d),d=Math.sin(d),h=1-g,j=[0,0,0,0];j[0]=c;j[1]=e;j[2]=f;GMath.normalizeVector(j);c=j[0];e=j[1];f=j[2];j=Array(16);j[0]=c*c*h+g;j[4]=c*e*h-f*d;j[8]=c*f*h+e*d;j[12]=0;j[1]=e*c*h+f*d;j[5]=e*e*h+g;j[9]=e*f*h-c*d;j[13]=0;j[2]=f*c*h-e*d;j[6]=f*e*h+c*d;j[10]=f*f*h+g;j[14]=0;j[3]=0;j[7]=0;j[11]=0;j[15]=1;c=Array(16);GMath.matricesMultiply(j,b,c);for(e=0;e<16;e++)b[e]=c[e]};
GMath.matrixTranslate=function(b,d,c,e){d=[1,0,0,0,0,1,0,0,0,0,1,0,d,c,e,1];c=Array(16);for(e=0;e<16;e++)c[e]=b[e];GMath.matricesMultiply(d,c,b)};GMath.matrixScale=function(b,d,c,e){d=[d,0,0,0,0,c,0,0,0,0,e,0,0,0,0,1];c=Array(16);for(e=0;e<16;e++)c[e]=b[e];GMath.matricesMultiply(d,c,b)};GMath.matrixIdentity=function(b){for(var d=0;d<16;d++)b[d]=GMath.mIdentity[d]};GMath.matrixNullify=function(b){for(var d=0;d<16;d++)b[d]=0};GMath.vecDot2=function(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]};
GMath.vecDot=function(b,d,c,e,f,g){return b*e+d*f+c*g};GMath.vecCross1=function(b,d,c,e,f,g,h){h[0]=d*g-f*c;h[1]=c*e-g*b;h[2]=b*f-e*d};GMath.vecCross2=function(b,d,c){c[0]=b[1]*d[2]-d[1]*b[2];c[1]=b[2]*d[0]-d[2]*b[0];c[2]=b[0]*d[1]-d[0]*b[1]};GMath.vecSub=function(b,d,c){c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=b[2]-d[2]};GMath.vecSub2=function(b,d,c,e,f){f[0]=b[0+d]-c[0+e];f[1]=b[1+d]-c[1+e];f[2]=b[2+d]-c[2+e]};GMath.vecNull=function(b){return b[0]==0&&b[1]==0&&b[2]==0};
GMath.rayIntersectsBounds=function(b,d,c,e){var f=GMath.rayIntersectsTriangle(b,d,c,e,0,4,8);return f>=0?f:f=GMath.rayIntersectsTriangle(b,d,c,e,12,4,8)};
GMath.rayIntersectsTriangle=function(b,d,c,e,f,g,h){GMath.vecSub2(c,g,c,f,GMath.tmpV1);GMath.vecSub2(c,h,c,f,GMath.tmpV2);GMath.vecCross2(GMath.tmpV1,GMath.tmpV2,GMath.tmpV3);if(GMath.vecNull(GMath.tmpV3))return-1;GMath.vecSub2(b,0,c,f,GMath.tmpW0);g=-GMath.vecDot2(GMath.tmpV3,GMath.tmpW0);h=GMath.vecDot2(GMath.tmpV3,d);if(Math.abs(h)<1.0E-7)return-1;g/=h;if(g<0)return-1;e[0]=b[0]+g*d[0];e[1]=b[1]+g*d[1];e[2]=b[2]+g*d[2];var j,d=GMath.vecDot2(GMath.tmpV1,GMath.tmpV1),g=GMath.vecDot2(GMath.tmpV1,GMath.tmpV2),
h=GMath.vecDot2(GMath.tmpV2,GMath.tmpV2);GMath.tmpV3[0]=e[0]-c[f+0];GMath.tmpV3[1]=e[1]-c[f+1];GMath.tmpV3[2]=e[2]-c[f+2];c=GMath.vecDot2(GMath.tmpV3,GMath.tmpV1);f=GMath.vecDot2(GMath.tmpV3,GMath.tmpV2);j=g*g-d*h;h=(g*f-h*c)/j;if(h<0||h>1)return-1;c=(g*c-d*f)/j;return c<0||h+c>1?-1:Math.sqrt((e[0]-b[0])*(e[0]-b[0])+(e[1]-b[1])*(e[1]-b[1])+(e[2]-b[2])*(e[2]-b[2]))};
GMath.dist=function(b,d){var c=b.matrix().getAsArray(),e=d.matrix().getAsArray(),f=c[12],g=c[13],c=c[14],h=e[12],j=e[13],e=e[14];return Math.sqrt((f-h)*(f-h)+(g-j)*(g-j)+(c-e)*(c-e))};function GameonCS(b){this.mApp=b;this.mCanvasZ=this.mCanvasH=this.mCanvasW=0;this.mViewport=[0,0,0,0];this.mLookAt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mProjection=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.mProjData=[0,0,0,0];this.mSpaceInit=this.mHudInit=!1;this.mBBox=[0,0,0,0,0,0,0,0];this.mScreenWidth=this.mScreenHeight=0;this.mAnimDataEnd=this.mAnimDataStart=this.mCameraData=void 0;this.mCameraData=new GameonModelRef(void 0,0);this.mCameraEye=this.mCameraData.mAreaPosition;this.mCameraLookAt=this.mCameraData.mPosition;
this.mUpZ=this.mCameraData.mScale;this.mCameraEye[0]=0;this.mCameraEye[1]=0;this.mCameraEye[2]=5;this.mUpZ[0]=0;this.mUpZ[1]=1;this.mUpZ[2]=0}GameonCS.prototype.setGlu=function(){};GameonCS.prototype.saveViewport=function(b,d,c){this.mScreenHeight=c;this.mScreenWidth=d;this.mViewport[0]=b[0];this.mViewport[1]=b[1];this.mViewport[2]=b[2];this.mViewport[3]=b[3]};GameonCS.prototype.saveProjection=function(b,d,c,e,f,g){this.mProjection=GMath.frustrum(b,d,c,e,f,g)};
GameonCS.prototype.saveProjectionHud=function(b,d,c,e,f,g){this.mProjectionHud=GMath.frustrum(b,d,c,e,f,g)};GameonCS.prototype.set=function(){};GameonCS.prototype.init=function(b,d,c){this.mCanvasW=b;this.mCanvasH=d;this.mCanvasZ=c};
GameonCS.prototype.screen2space=function(b,d,c){var e=[3],f=[3],d=this.mViewport[3]-d;GMath.unProject(b,d,1,this.mLookAt,this.mProjection,this.mViewport,f);GMath.unProject(b,d,0,this.mLookAt,this.mProjection,this.mViewport,e);f[0]-=e[0];f[1]-=e[1];f[2]-=e[2];b=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);f[0]/=b;f[1]/=b;f[2]/=b;var g=d=b=0;b-=e[0];d-=e[1];g-=e[2];b=(0*b+0*d+-1*g)/(0*f[0]+0*f[1]+-1*f[2]);f[0]*=b;f[1]*=b;c[0]=f[0]+e[0];c[1]=f[1]+e[1]};
GameonCS.prototype.saveLookAt=function(b,d,c){for(var e=0;e<16;e++)this.mLookAt[e]=0;GMath.lookAt(this.mLookAt,b,d,c)};GameonCS.prototype.screen2spaceVec=function(b,d,c){var e=[0,0,0],d=this.mScreenHeight-d;GMath.unProject(b,d,1,this.mLookAt,this.mProjection,this.mViewport,e);c[0]=e[0]-this.mCameraEye[0];c[1]=e[1]-this.mCameraEye[1];c[2]=e[2]-this.mCameraEye[2]};
GameonCS.prototype.screen2spaceVecHud=function(b,d,c){var e=[0,0,0],d=this.mViewport[3]-d;GMath.unProject(b,d,1,this.mLookAtHud,this.mProjectionHud,this.mViewport,e);c[0]=e[0]-this.mCameraEyeHud[0];c[1]=e[1]-this.mCameraEyeHud[1];c[2]=e[2]-this.mCameraEyeHud[2]};
GameonCS.prototype.snap_cam_z=function(b,d,c){for(var e=[16],f=[3],g=0;g<3;g++)f[g]=b[g];for(b=b[2];b<10;b+=0.05){g=this.mCanvasW;f[2]=b;var h=[3];GMath.lookAt(e,f,d,c);if(GMath.project(g,0,0,e,this.mProjection,this.mViewport,h,0)&&h[0]>0&&h[0]<this.mViewport[2])return this.mCameraEye[0]=0,this.mCameraEye[1]=0,this.mCameraEye[2]=b,this.mCameraLookAt[0]=0,this.mCameraLookAt[1]=0,this.mCameraLookAt[2]=0,this.mUpZ[0]=0,this.mUpZ[1]=1,this.mUpZ[2]=0,this.saveLookAt(this.mCameraEye,this.mCameraLookAt,
this.mUpZ),b}return 0};GameonCS.prototype.setCamera=function(b,d){this.mCameraEye[0]=d[0];this.mCameraEye[1]=d[1];this.mCameraEye[2]=d[2];this.mCameraLookAt[0]=b[0];this.mCameraLookAt[1]=b[1];this.mCameraLookAt[2]=b[2];this.saveLookAt(this.mCameraEye,this.mCameraLookAt,this.mUpZ)};
GameonCS.prototype.applyCamera=function(b,d){this.mCameraData.animating()&&(this.mCameraData.animate(d),this.saveLookAt(this.mCameraEye,this.mCameraLookAt,this.mUpZ));if(!this.mSpaceInit)this.mSpaceInit=!0,this.saveLookAt(this.mCameraEye,this.mCameraLookAt,this.mUpZ);b.perspectiveMatrix.makeIdentity();b.perspectiveMatrix.perspective(this.mProjData[0],this.mProjData[1],this.mProjData[2],this.mProjData[3]);var c=new J3DIMatrix4;c.load(this.mLookAt);b.perspectiveMatrix.multiply(c);b.perspectiveMatrix.setUniform(b,
b.u_modelProjMatrixLoc,!1)};GameonCS.prototype.getScreenBounds=function(b){var d=[2];this.screen2space(this.mViewport[0],this.mViewport[1],d);b[0]=d[0];b[1]=d[1];this.screen2space(this.mViewport[2],this.mViewport[1],d);b[2]=d[0];b[3]=d[1];this.screen2space(this.mViewport[2],this.mViewport[3],d);b[4]=d[0];b[5]=d[1];this.screen2space(this.mViewport[0],this.mViewport[3],d);b[6]=d[0];b[7]=d[1];for(d=0;d<8;d++)this.mBBox[d]=b[d]};GameonCS.prototype.getCanvasW=function(){return this.mViewport[2]-this.mViewport[0]};
GameonCS.prototype.getCanvasH=function(){return this.mViewport[3]-this.mViewport[1]};GameonCS.prototype.saveProj=function(b,d,c,e){this.mProjData[0]=b;this.mProjData[1]=d;this.mProjData[2]=c;this.mProjData[3]=e};GameonCS.prototype.getCanvasW=function(){return this.mViewport[2]-this.mViewport[0]};GameonCS.prototype.getCanvasH=function(){return this.mViewport[3]-this.mViewport[1]};GameonCS.prototype.worldWidth=function(){return this.mBBox[2]-this.mBBox[0]};
GameonCS.prototype.worldHeight=function(){return this.mBBox[2]-this.mBBox[0]};GameonCS.prototype.worldCenterX=function(){return(this.mBBox[2]+this.mBBox[0])/2};GameonCS.prototype.worldCenterY=function(){return(this.mBBox[1]+this.mBBox[5])/2};GameonCS.prototype.eye=function(){return this.mCameraEye};
GameonCS.prototype.moveCamera=function(b,d,c){if(this.mAnimDataStart==void 0)this.mAnimDataStart=new GameonModelRef(void 0,0);if(this.mAnimDataEnd==void 0)this.mAnimDataEnd=new GameonModelRef(void 0,0);this.mAnimDataStart.copy(this.mCameraData);this.mAnimDataEnd.copy(this.mCameraData);this.mAnimDataEnd.setAreaPosition(d);this.mAnimDataEnd.setPosition(b);this.mApp.anims().createAnim(this.mAnimDataStart,this.mAnimDataEnd,this.mCameraData,c,2,void 0,1,!1,!1)};GameonCS.prototype.lookat=function(){return this.mCameraLookAt};
GameonCS.prototype.up=function(){return this.mUpZ};function RenderDomain(b,d,c,e){this.mVisibleModelList=[];this.mVisibleModelList2=[];this.mTexts=new TextRender;this.mApp=d;this.mPanY=this.mPanX=!1;this.mPanCoords=[-1E3,1E3,-1E3,1E3];this.mRenderId=this.mLastPanY=this.mLastPanX=-1;this.mSpaceBottomLeft=[0,0];this.mSpaceTopRight=[0,0];this.mName=b;this.mFov=45;this.mNear=0.1;this.mFar=8.7;this.mOffsetY=this.mOffsetX=0;this.mWidth=c;this.mHeight=e;this.mViewport=[0,0,c,e];this.mOffYPerct=this.mOffXPerct=0;this.mAspect=this.mHeightPerct=this.mWidthPerct=
1;this.mCS=new GameonCS(d);this.mVisible=!1;this.mVerticalScroller=this.mHorizontalScroller=void 0}
RenderDomain.prototype.draw=function(b,d){if(this.mVisible){b.viewport(this.mViewport[0],this.mViewport[1],this.mViewport[2],this.mViewport[3]);b.clear(b.DEPTH_BUFFER_BIT);this.mCS.applyCamera(b,d);for(var c=this.mVisibleModelList.length,e=0;e<c;e++){var f=this.mVisibleModelList[e];f.mHasAlpha||f.draw(b,this.mRenderId)}for(e=0;e<c;e++)f=this.mVisibleModelList[e],f.mHasAlpha&&f.draw(b,this.mRenderId);c=this.mVisibleModelList2.length;for(e=0;e<c;e++)f=this.mVisibleModelList2[e],f.mHasAlpha||f.draw(b,
this.mRenderId);for(e=0;e<c;e++)f=this.mVisibleModelList2[e],f.mHasAlpha&&f.draw(b,this.mRenderId);this.mTexts.render(b)}};RenderDomain.prototype.clear=function(){for(var b=0;b<this.mVisibleModelList.length;b++){var d=this.mVisibleModelList[b];d.hideDomainRefs(this.mRenderId)}for(b=0;b<this.mVisibleModelList2.length;b++)d=this.mVisibleModelList2[b],d.hideDomainRefs(this.mRenderId);this.mTexts.clear()};
RenderDomain.prototype.setVisible=function(b){if(b.mIsModel){if(this.mVisibleModelList2.indexOf(b)<0){for(var d=0;d<this.mVisibleModelList2.length;d++)if(this.mVisibleModelList2[d].mTextureID==b.mTextureID){this.mVisibleModelList2.splice(d,0,b);return}this.mVisibleModelList2.push(b)}}else if(this.mVisibleModelList.indexOf(b)<0){for(d=0;d<this.mVisibleModelList.length;d++)if(this.mVisibleModelList[d].mTextureID==b.mTextureID){this.mVisibleModelList.splice(d,0,b);return}this.mVisibleModelList.push(b)}};
RenderDomain.prototype.remVisible=function(b,d){if(!(b.getVisibleRefs(this.mRenderId)>0)||d)if(b.mIsModel){var c=this.mVisibleModelList2.indexOf(b);c>=0&&this.mVisibleModelList2.splice(c,1)}else c=this.mVisibleModelList.indexOf(b),c>=0&&this.mVisibleModelList.splice(c,1)};RenderDomain.prototype.texts=function(){return this.mTexts};
RenderDomain.prototype.perspective=function(b,d,c,e,f,g){var h,j,l,m;m=e*Math.tan(d*Math.PI/360);l=-m;h=l*c;j=m*c;g?b.perspectiveMatrix.perspective(d,c,e,f):(this.mCS.saveProjection(h,j,l,m,e,f),this.mCS.saveProj(d,c,e,f))};RenderDomain.prototype.setFov=function(b,d,c){this.mFar=c;this.mNear=d;this.mFov=b;this.perspective(gl,this.mFov,this.mWidth/this.mHeight,this.mNear,this.mFar,!1)};
RenderDomain.prototype.onSurfaceChanged=function(b,d,c){this.mWidth=this.mWidthPerct*d;this.mHeight=this.mHeightPerct*c;this.mOffsetX=this.mOffXPerct*d;this.mOffsetY=this.mOffYPerct*c;this.mViewport[0]=this.mOffsetX;this.mViewport[1]=this.mOffsetY;this.mViewport[2]=this.mWidth;this.mViewport[3]=this.mHeight;this.mCS.saveViewport(this.mViewport,d,c);this.perspective(b,this.mFov,this.mWidth/this.mHeight,this.mNear,this.mFar,!1)};RenderDomain.prototype.onSurfaceCreated=function(){};
RenderDomain.prototype.removeText=function(b){this.mTexts.remove(b)};RenderDomain.prototype.setBounds=function(b,d,c){this.mOffXPerct=c[0];this.mOffYPerct=c[1];this.mWidthPerct=c[2];this.mHeightPerct=c[3];this.onSurfaceChanged(gl,b,d)};RenderDomain.prototype.show=function(){this.mVisible=!0};RenderDomain.prototype.hide=function(){this.mVisible=!1};
RenderDomain.prototype.onTouchModel=function(b,d,c,e){var f=[0,0,0],g=void 0;this.mCS.screen2spaceVec(b,d,f);for(var g=this.mCS.eye(),h=void 0,b=this.mVisibleModelList.length,d=0;d<b;d++)if(h=this.mVisibleModelList[d],!(e&&h.mParentArea!=void 0)&&(h=h.onTouch(g,f,this.mRenderId,c),h!=void 0))return h;b=this.mVisibleModelList2.length;for(d=0;d<b;d++)if(h=this.mVisibleModelList2[d],!(e&&h.mParentArea!=void 0)&&(h=h.onTouch(g,f,this.mRenderId,c),h!=void 0))return h};
RenderDomain.prototype.pan=function(b,d,c){this.mPanY=this.mPanX=!0;c!=void 0&&ServerkoParse.parseFloatArray(this.mPanCoords,c)};
RenderDomain.prototype.onPan=function(b,d){if(!this.mPanX&&!this.mPanY)return!1;if(b<this.mOffsetX||b>this.mOffsetX+this.mWidth||d<this.mOffsetY||d>this.mOffsetY+this.mHeight)return!1;if(this.mLastPanX==-1)return this.mLastPanX=b,this.mLastPanY=d,!0;var c=b-this.mLastPanX,e=d-this.mLastPanY,f=this.mCS.eye(),g=this.mCS.lookat(),h=f[0],j=f[1],l=g[0],m=g[1];this.mPanX&&(f[0]-=c/50,g[0]-=c/50);this.mPanY&&(f[1]+=e/50,g[1]+=e/50);this.mCS.setCamera(g,f);this.mLastPanX=b;this.mLastPanY=d;var c=!1,e=f[0],
k=f[1];do{e=f[0];k=f[1];this.mCS.screen2space(this.mOffsetX+this.mWidth,-this.mOffsetY,this.mSpaceTopRight);this.mCS.screen2space(this.mOffsetX,-this.mOffsetY+this.mHeight,this.mSpaceBottomLeft);c=!0;if(this.mPanCoords[0]!=-1E3){if(this.mPanX)if(this.mPanCoords[1]-this.mPanCoords[0]<this.mSpaceTopRight[0]-this.mSpaceBottomLeft[0])f[0]=h,g[0]=l,this.mCS.setCamera(g,f),c=!0;else if(this.mSpaceBottomLeft[0]<this.mPanCoords[0]+0.0010||this.mSpaceTopRight[0]>this.mPanCoords[1]-0.0010)f[0]=(h+f[0])/2,g[0]=
(l+g[0])/2,this.mCS.setCamera(g,f),c=!1;if(this.mPanY)if(this.mPanCoords[3]-this.mPanCoords[2]<this.mSpaceTopRight[1]-this.mSpaceBottomLeft[1])f[1]=j,g[1]=m,this.mCS.setCamera(g,f),c=!0;else if(this.mSpaceBottomLeft[1]<this.mPanCoords[2]+0.0010||this.mSpaceTopRight[1]>this.mPanCoords[3]-0.0010)f[1]=(j+f[1])/2,g[1]=(m+g[1])/2,this.mCS.setCamera(g,f),c=!1}if(e==f[0]&&k==f[1])break}while(!c);return!0};RenderDomain.prototype.resetPan=function(){this.mLastPanY=this.mLastPanX=-1};function GameonModel_RefId(){this.id=this.alias=this.name=void 0}
function GameonModel(b,d,c){this.mName=b;this.mRefs=[];this.mVisibleRefs=[];this.mSubmodels=0;this.mModelTemplate=GameonModelData_Type.NONE;this.mIsModel=this.mHasAlpha=!1;this.mApp=d;this.mWorld=d.mWorld;this.mName="";this.mTextureOffset=0;this.mTextureH=this.mTextureW=1;this.mTextureHDiv=this.mTextureWDiv=0;this.mForceHalfTexturing=this.mEnabled=!1;this.mForcedOwner=0;this.mShapeList=[];this.mVertexList=[];this.mIndexCount=0;this.mTextureBuffer=this.mIndexBuffer=this.mColorBuffer=this.mVertexBuffer=
void 0;this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT);this.mTransform=!1;this.mBBoxMin=[1.0E20,1.0E20,1.0E20];this.mBBoxMax=[-1.0E20,-1.0E20,-1.0E20];this.mColorOffset=this.mVertexOffset=0;this.mGenerated=!1;this.mActive=!0;this.mIterQueue=[];this.mParentArea=c;this.mCurrentMaterial=this.mOnClick=void 0}GameonModel.mStaticBoundsPlane=[-0.5,-0.5,0,1,0.5,-0.5,0,1,-0.5,0.5,0,1,0.5,0.5,0,1];GameonModel.mStaticBounds=[0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1];GameonModel.inheritsFrom(GLModel);
GameonModel.prototype.createPlaneTex=function(b,d,c,e,f,g,h,j,l,m,k){var c=new GLShape(this),n=c.addVertex(b,d,g,h,m,k),d=c.addVertex(e,d,g,l,m,k),b=c.addVertex(b,f,g,h,j,k),e=c.addVertex(e,f,g,l,j,k);c.addFace(new GLFace(n,e,b));c.addFace(new GLFace(n,d,e));this.addShape(c)};
GameonModel.prototype.createModel3=function(b,d,c,e,f,g,h,j){for(var l=f-d,m=h-c,k=g-e,b=GameonModelData.getData(b),n=this.mApp.colors().white,p=b.length,o=new GLShape(this),d=(f+d)/2,c=(g+c)/2,e=(h+e)/2,h=0;h<p;h+=9){var g=b[h][0],f=b[h][1],q=b[h][2],r=b[h+2][0],s=1-b[h+2][1];g*=l;g+=d;f*=m;f+=c;q*=k;q+=e;var g=o.addVertex(g,f,q,r,s,n),f=b[h+3][0],q=b[h+3][1],r=b[h+3][2],s=b[h+5][0],t=1-b[h+5][1];f*=l;f+=d;q*=m;q+=c;r*=k;r+=e;var f=o.addVertex(f,q,r,s,t,n),q=b[h+6][0],r=b[h+6][1],s=b[h+6][2],t=b[h+
8][0],u=1-b[h+8][1];q*=l;q+=d;r*=m;r+=c;s*=k;s+=e;q=o.addVertex(q,r,s,t,u,n);o.addFace(new GLFace(g,f,q))}this.addShape(o);this.mTextureID=j};
GameonModel.prototype.createModel=function(b,d,c,e){var b=GameonModelData.getData(b),f=b.length,g=1,h=1,j=1,l=1,m=1,k=1;e!=void 0&&(g=1/e[0],h=1/e[1],j=1/e[2],l=e[0]*2,m=e[1]*2,k=e[2]*2);for(e=1;e<=l;e+=2)for(var n=1;n<=m;n+=2)for(var p=1;p<=k;p+=2){for(var o=new GLShape(this),q=0;q<f;q+=9){var r=o.addVertex(b[q][0]*g+-0.5+g*e/2,b[q][1]*h+-0.5+h*n/2,b[q][2]*j+-0.5+j*p/2,b[q+2][0],1-b[q+2][1],c),s=o.addVertex(b[q+3][0]*g+-0.5+g*e/2,b[q+3][1]*h+-0.5+h*n/2,b[q+3][2]*j+-0.5+j*p/2,b[q+5][0],1-b[q+5][1],
c),t=o.addVertex(b[q+6][0]*g+-0.5+g*e/2,b[q+6][1]*h+-0.5+h*n/2,b[q+6][2]*j+-0.5+j*p/2,b[q+8][0],1-b[q+8][1],c);o.addFace(new GLFace(r,s,t))}this.addShape(o)}this.mTextureID=d};
GameonModel.prototype.createModel2=function(b,d,c,e,f,g,h,j){var l=f-d,m=h-c,k=g-e;if(j==void 0)j=this.mApp.colors().white;for(var b=GameonModelData.getData(b),n=b.length,p=new GLShape(this),d=(f+d)/2,c=(g+c)/2,e=(h+e)/2,h=0;h<n;h+=9){var g=b[h][0],f=b[h][1],o=b[h][2];g*=l;g+=d;f*=m;f+=c;o*=k;o+=e;var g=p.addVertex(g,f,o,b[h+2][0],1-b[h+2][1],j),f=b[h+3][0],o=b[h+3][1],q=b[h+3][2];f*=l;f+=d;o*=m;o+=c;q*=k;q+=e;var f=p.addVertex(f,o,q,b[h+5][0],1-b[h+5][1],j),o=b[h+6][0],q=b[h+6][1],r=b[h+6][2];o*=
l;o+=d;q*=m;q+=c;r*=k;r+=e;o=p.addVertex(o,q,r,b[h+8][0],1-b[h+8][1],j);p.addFace(new GLFace(g,f,o))}this.addShape(p)};
GameonModel.prototype.createOctogon=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=(e-b)/4,l=(f-d)/4,m=c.addVertex(b+j,f,g,0,1,h),k=c.addVertex(b+3*j,f,g,0,1,h),n=c.addVertex(e,d+3*l,g,0,1,h),p=c.addVertex(e,d+l,g,0,1,h),o=c.addVertex(b+3*j,d,g,0,1,h),j=c.addVertex(b+j,d,g,0,1,h),q=c.addVertex(b,d+l,g,0,1,h),h=c.addVertex(b,d+3*l,g,0,1,h),b=c.addVertex((e+b)/2,(f+d)/2,g,0.5,0.5,this.mApp.colors().white);c.addFace(new GLFace(b,m,h));c.addFace(new GLFace(b,k,m));c.addFace(new GLFace(b,n,k));c.addFace(new GLFace(b,
p,n));c.addFace(new GLFace(b,o,p));c.addFace(new GLFace(b,j,o));c.addFace(new GLFace(b,q,j));c.addFace(new GLFace(b,h,q));this.addShape(c)};
GameonModel.prototype.createPlane=function(b,d,c,e,f,g,h,j){var l=c=1,m=e-b,k=f-d;j!=void 0&&(c=m/j[0],l=k/j[1]);for(;b<e;b+=c)for(j=d;j<f;j+=l){var n=b,p=c+b;p>e&&(p=e);var o=l+j;o>f&&(o=f);var q=j,m=new GLShape(this),k=m.addVertex(n,q,g,0,1,h),q=m.addVertex(p,q,g,1,1,h),n=m.addVertex(n,o,g,0,0,h),p=m.addVertex(p,o,g,1,0,h);m.addFace(new GLFace(k,p,n));m.addFace(new GLFace(k,q,p));this.addShape(m)}};
GameonModel.prototype.createPlane4=function(b,d,c,e,f,g,h,j){c=new GLShape(this);if(h==void 0)h=this.mApp.colors().white;if(j==void 0)j=this.mApp.colors().white;var l=c.addVertex(b,d,g,0,1,h),d=c.addVertex(e,d,g,1,1,h),b=c.addVertex(b,f,g,0,0,j),e=c.addVertex(e,f,g,1,0,j);c.addFace(new GLFace(l,e,b));c.addFace(new GLFace(l,d,e));this.addShape(c)};
GameonModel.prototype.createPlaneForLetter=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=c.addVertex(b,d,g,0.01,0.99,h),d=c.addVertex(e,d,g,0.99,0.99,h),b=c.addVertex(b,f,g,0.01,0.01,h),e=c.addVertex(e,f,g,0.99,0.01,h);c.addFace(new GLFace(j,e,b));c.addFace(new GLFace(j,d,e));this.addShape(c)};
GameonModel.prototype.createPlane2=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=c.addVertex(b,d,g,0,1,h),d=c.addVertex(e,d,g,1,1,h),b=c.addVertex(b,f,g,0,0,h),e=c.addVertex(e,f,g,1,0,h);c.addFace(new GLFace(j,e,b));c.addFace(new GLFace(j,d,e));this.addShape(c)};
GameonModel.prototype.createPlane3=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=c.addVertex(b,d,g,0,1,h),d=c.addVertex(e,d,g,1,1,this.mApp.colors().white),b=c.addVertex(b,f,g,0.1,0,h),e=c.addVertex(e,f,g,0.9,0,h);c.addFace(new GLFace(j,e,b));c.addFace(new GLFace(j,d,e));this.addShape(c)};
GameonModel.prototype.createCube=function(b,d,c,e,f,g,h){var j=new GLShape(this),l=this.mApp.colors().white,m=j.addVertex(b,d,c,0,0,l),k=j.addVertex(e,d,c,0,0,l),n=j.addVertex(b,f,c,0,0,l),c=j.addVertex(e,f,c,0,0,l),p=j.addVertex(b,d,g,0,0,h),d=j.addVertex(e,d,g,0,0,h),b=j.addVertex(b,f,g,0,0,h),e=j.addVertex(e,f,g,0,0,l);j.addFace(new GLFace(m,d,p));j.addFace(new GLFace(m,k,d));j.addFace(new GLFace(p,e,b));j.addFace(new GLFace(p,d,e));j.addFace(new GLFace(m,b,n));j.addFace(new GLFace(m,p,b));j.addFace(new GLFace(k,
e,d));j.addFace(new GLFace(k,c,e));j.addFace(new GLFace(m,c,k));j.addFace(new GLFace(m,n,c));j.addFace(new GLFace(n,e,c));j.addFace(new GLFace(n,b,e));this.addShape(j)};GameonModel.prototype.addref=function(b){if(this.mRefs.indexOf(b)<0)this.mRefs.push(b),b.set(),this.mEnabled=!0;b.setParent(this);b.getVisible()&&this.addVisibleRef(b)};
GameonModel.prototype.draw=function(b,d){if(this.mEnabled&&this.mVisibleRefs.length>0){this.setupRef(b);for(var c=0;c<this.mVisibleRefs.length;c++){var e=this.mVisibleRefs[c];e.mLoc==d&&this.drawRef(b,e)}}};GameonModel.prototype.removeref=function(b){b=this.mRefs.indexOf(b);if(b>=0&&(this.mRefs.splice(b,1),this.mRefs.length==0))this.mEnabled=!1};GameonModel.prototype.setTexture=function(b){this.mTextureID=b};
GameonModel.prototype.createCard=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=c.addVertex(b,d,g+0.0020,0,0,h),l=c.addVertex(e,d,g+0.0020,1,0,h),m=c.addVertex(b,(d+f)/2,g+0.0020,0,1,h),k=c.addVertex(e,(d+f)/2,g+0.0020,1,1,h),n=c.addVertex(b,f,g+0.0020,0,0,h),p=c.addVertex(e,f,g+0.0020,1,0,h);c.addFace(new GLFace(m,p,n));c.addFace(new GLFace(m,k,p));c.addFace(new GLFace(j,k,m));c.addFace(new GLFace(j,l,k));j=c.addVertex(b,d,g-0.0020,0,0,h);l=c.addVertex(e,d,g-0.0020,1,0,h);m=c.addVertex(b,(d+f)/
2,g-0.0020,0,1,h);d=c.addVertex(e,(d+f)/2,g-0.0020,1,1,h);b=c.addVertex(b,f,g-0.0020,0,0,h);e=c.addVertex(e,f,g-0.0020,1,0,h);c.addFace(new GLFace(m,b,e));c.addFace(new GLFace(m,e,d));c.addFace(new GLFace(d,j,m));c.addFace(new GLFace(l,j,d));this.addShape(c)};
GameonModel.prototype.createCard2=function(b,d,c,e,f,g,h){var c=new GLShape(this),j=(e-b)/30,l=c.addVertex(b+j,d+j,g+0.0020,0.01,0.99,h),m=c.addVertex(e-j,d+j,g+0.0020,0.99,0.99,h),k=c.addVertex(b+j,f-j,g+0.0020,0.01,0.01,h),n=c.addVertex(e-j,f-j,g+0.0020,0.99,0.01,h);c.addFace(new GLFace(l,n,k));c.addFace(new GLFace(l,m,n));l=c.addVertex(b+j,d+j,g-0.0020,0.01,0.99,h);d=c.addVertex(e-j,d+j,g-0.0020,0.99,0.99,h);b=c.addVertex(b+j,f-j,g-0.0020,0.01,0.01,h);e=c.addVertex(e-j,f-j,g-0.0020,0.99,0.01,h);
c.addFace(new GLFace(l,b,e));c.addFace(new GLFace(l,e,d));this.addShape(c)};GameonModel.prototype.setState=function(b){if(this.mActive)for(var d=0;d<this.mRefs.length;d++){var c=this.mRefs[d];b==LayoutArea_State.HIDDEN?c.setVisible(!1):c.setVisible(!0)}};
GameonModel.prototype.createFrame=function(b,d,c,e,f,g,h,j,l){l==void 0&&this.mApp.colors();this.createPlane(b-h/2,d-j/2,g,b+h/2,f+j/2,g,l,void 0);this.createPlane(e-h/2,d-j/2,g,e+h/2,f+j/2,g,l,void 0);this.createPlane(b+h/2,d-j/2,g,e-h/2,d+j/2,g,l,void 0);this.createPlane(b+h/2,f-j/2,g,e-h/2,f+j/2,g,l,void 0)};
GameonModel.prototype.createPlaneTex=function(b,d,c,e,f,g,h,j,l,m,k,n,p){var c=new GLShape(this),o=c.addVertex(b,d,g,h,m,this.mApp.colors().white),d=c.addVertex(e,d,g,l,m,this.mApp.colors().white),b=c.addVertex(b,f,g,h,j,this.mApp.colors().white),e=c.addVertex(e,f,g,l,j,this.mApp.colors().white),f=n*p,n=(n+1)*p;o.red=k[0].red+(k[2].red-k[0].red)*f;o.green=k[0].green+(k[2].green-k[0].green)*f;o.blue=k[0].blue+(k[2].blue-k[0].blue)*f;o.alpha=k[0].alpha+(k[2].alpha-k[0].alpha)*f;d.red=k[1].red+(k[3].red-
k[1].red)*f;d.green=k[1].green+(k[3].green-k[1].green)*f;d.blue=k[1].blue+(k[3].blue-k[1].blue)*f;d.alpha=k[1].alpha+(k[3].alpha-k[1].alpha)*f;b.red=k[0].red+(k[2].red-k[0].red)*n;b.green=k[0].green+(k[2].green-k[0].green)*n;b.blue=k[0].blue+(k[2].blue-k[0].blue)*n;b.alpha=k[0].alpha+(k[2].alpha-k[0].alpha)*n;e.red=k[1].red+(k[3].red-k[1].red)*n;e.green=k[1].green+(k[3].green-k[1].green)*n;e.blue=k[1].blue+(k[3].blue-k[1].blue)*n;e.alpha=k[1].alpha+(k[3].alpha-k[1].alpha)*n;c.addFace(new GLFace(o,
e,b));c.addFace(new GLFace(o,d,e));this.addShape(c)};
GameonModel.prototype.createPlaneTex2=function(b,d,c,e,f,g,h,j,l,m,k,n,p){var c=new GLShape(this),o=c.addVertex(b,d,g,h,m,this.mApp.colors().white),d=c.addVertex(e,d,g,l,m,this.mApp.colors().white),b=c.addVertex(b,f,g,h,j,this.mApp.colors().white),e=c.addVertex(e,f,g,l,j,this.mApp.colors().white),f=n*p,n=(n+1)*p;o.red=k[0].red+(k[2].red-k[0].red)*f;o.green=k[0].green+(k[2].green-k[0].green)*f;o.blue=k[0].blue+(k[2].blue-k[0].blue)*f;o.alpha=k[0].alpha+(k[2].alpha-k[0].alpha)*f;d.red=k[0].red+(k[2].red-
k[0].red)*n;d.green=k[0].green+(k[2].green-k[0].green)*n;d.blue=k[0].blue+(k[2].blue-k[0].blue)*n;d.alpha=k[0].alpha+(k[2].alpha-k[0].alpha)*n;b.red=k[1].red+(k[3].red-k[1].red)*f;b.green=k[1].green+(k[3].green-k[1].green)*f;b.blue=k[1].blue+(k[3].blue-k[1].blue)*f;b.alpha=k[1].alpha+(k[3].alpha-k[1].alpha)*f;e.red=k[1].red+(k[3].red-k[1].red)*n;e.green=k[1].green+(k[3].green-k[1].green)*n;e.blue=k[1].blue+(k[3].blue-k[1].blue)*n;e.alpha=k[1].alpha+(k[3].alpha-k[1].alpha)*n;c.addFace(new GLFace(o,
e,b));c.addFace(new GLFace(o,d,e));this.addShape(c)};
GameonModel.prototype.createAnimTrans=function(b,d,c,e){e==void 0&&(e=0);var f=new GameonModelRef(void 0,-1);f.copy(this.mRefs[e]);f.copyMat(this.mRefs[e]);var g=new GameonModelRef(void 0,-1);g.copy(f);var h,j;j=this.mApp.world().getDomain(f.loc());h=j.mCS.mBBox[2]-j.mCS.mBBox[0];j=j.mCS.mBBox[1]-j.mCS.mBBox[5];b=="left"?g.addAreaPosition(-h,0,0):b=="right"?g.addAreaPosition(h,0,0):b=="top"?g.addAreaPosition(0,+j,0):b=="tophigh"?g.addAreaPosition(0,+j+j,0):b=="bottom"?g.addAreaPosition(0,-j,0):b==
"scaleout"?g.mulScale(30,30,30):b=="scalein"?g.mulScale(30,30,30):b=="swirlin"?(g.mulScale(30,30,30),g.addAreaRotation(0,0,720)):b=="swirlout"&&(g.mulScale(30,30,30),g.addAreaRotation(0,0,720));anim=c?this.mApp.anims().createAnim(f,g,this.mRefs[e],d,2,void 0,1,!0,!0):this.mApp.anims().createAnim(g,f,this.mRefs[e],d,2,void 0,1,!1,!0)};
GameonModel.prototype.addVisibleRef=function(b){this.mWorld!=void 0&&b.getVisible()&&this.mVisibleRefs.indexOf(b)<0&&(this.mVisibleRefs.push(b),b=this.mApp.world().getDomain(b.loc()),b!=void 0&&b.setVisible(this))};GameonModel.prototype.remVisibleRef=function(b){if(b.getVisible()==!1){var d=this.mVisibleRefs.indexOf(b);d>=0&&(this.mVisibleRefs.splice(d,1),b=this.mApp.world().getDomain(b.loc()),b!=void 0&&b.remVisible(this,!1))}};
GameonModel.prototype.ref=function(b){return b<0||b>=this.mRefs.length?void 0:this.mRefs[b]};GameonModel.prototype.findRef=function(b){return this.mRefs.indexOf(b)};GameonModel.prototype.unsetWorld=function(){this.mWorld=void 0};GameonModel.prototype.createAnim=function(b,d,c,e){d<0&&d>=mRefs.length||(d=this.mRefs[d],this.mApp.anims().animModelRef(b,d,c,e))};GameonModel.prototype.setActive=function(b){this.mActive=b};
GameonModel.prototype.createModelFromData=function(b,d,c){for(var e=(c[1]+c[0])/2,c=c[1]-c[0],f=[0,0,0,1],g=[0,0,0,0],h,j,l=b.length,m,k=new GLShape(this),n=0;n<l;n+=27){m=n;GMath.matrixVecMultiply2(d,b,m,f,0);g[0]=b[m+3];g[1]=b[m+4];g[2]=b[m+5];g[4]=b[m+6];h=b[m+7]*c+e;j=b[m+8]*c+e;var p=k.addVertexColor(f[0],f[1],f[2],h,j,g);m+=9;GMath.matrixVecMultiply2(d,b,m,f,0);g[0]=b[m+3];g[1]=b[m+4];g[2]=b[m+5];g[4]=b[m+6];h=b[m+7]*c+e;j=b[m+8]*c+e;var o=k.addVertexColor(f[0],f[1],f[2],h,j,g);m+=9;GMath.matrixVecMultiply2(d,
b,m,f,0);g[0]=b[m+3];g[1]=b[m+4];g[2]=b[m+5];g[4]=b[m+6];h=b[m+7]*c+e;j=b[m+8]*c+e;h=k.addVertexColor(f[0],f[1],f[2],h,j,g);k.addFace(new GLFace(p,o,h))}this.addShape(k);this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT)};
GameonModel.prototype.createModelFromData2=function(b,d,c,e){for(var f=c[0],c=c[2]-c[0],g=[0,0,0,1],h,j,l=b.length,m=new GLShape(this),k=Array(4),n=0;n<l;n+=9){k[0]=b[n+0][0];k[1]=b[n+0][1];k[2]=b[n+0][2];GMath.matrixVecMultiply2(d,k,0,g,0);h=b[n+2][0]*c+f;j=b[n+2][1]*c+f;var p=m.addVertexColorInt(g[0],g[1],g[2],h,j,e[0]);k[0]=b[n+3][0];k[1]=b[n+3][1];k[2]=b[n+3][2];GMath.matrixVecMultiply2(d,k,0,g,0);h=b[n+5][0]*c+f;j=b[n+5][1]*c+f;var o=m.addVertexColorInt(g[0],g[1],g[2],h,j,e[0]);k[0]=b[n+6][0];
k[1]=b[n+6][1];k[2]=b[n+6][2];GMath.matrixVecMultiply2(d,k,0,g,0);h=b[n+8][0]*c+f;j=b[n+8][1]*c+f;h=m.addVertexColorInt(g[0],g[1],g[2],h,j,e[0]);m.addFace(new GLFace(p,o,h))}this.addShape(m);this.mTextureID=this.mApp.textures().get(TextureFactory_Type.DEFAULT)};
GameonModel.prototype.addPlane=function(b,d,c){var e=c[0],f=c[2],g=c[1],h=c[3],c=new GLShape(this);GMath.matrixVecMultiply2(b,GameonModel.mStaticBoundsPlane,0,GameonModel.mStaticBounds,0);GMath.matrixVecMultiply2(b,GameonModel.mStaticBoundsPlane,4,GameonModel.mStaticBounds,4);GMath.matrixVecMultiply2(b,GameonModel.mStaticBoundsPlane,8,GameonModel.mStaticBounds,8);GMath.matrixVecMultiply2(b,GameonModel.mStaticBoundsPlane,12,GameonModel.mStaticBounds,12);var j=0,b=c.addVertexColorInt(GameonModel.mStaticBounds[0],
GameonModel.mStaticBounds[1],GameonModel.mStaticBounds[2],e,h,d[j]);j++;j>=d.length&&(j=0);h=c.addVertexColorInt(GameonModel.mStaticBounds[4],GameonModel.mStaticBounds[5],GameonModel.mStaticBounds[6],f,h,d[j]);j++;j>=d.length&&(j=0);e=c.addVertexColorInt(GameonModel.mStaticBounds[8],GameonModel.mStaticBounds[9],GameonModel.mStaticBounds[10],e,g,d[j]);j++;j>=d.length&&(j=0);d=c.addVertexColorInt(GameonModel.mStaticBounds[12],GameonModel.mStaticBounds[13],GameonModel.mStaticBounds[14],f,g,d[j]);c.addFace(new GLFace(b,
d,e));c.addFace(new GLFace(b,h,d));this.addShape(c)};GameonModel.prototype.copyOfModel=function(){var b=new GameonModel(this.mName,this.mApp,this.mParentArea);b.mEnabled=this.mEnabled;b.mForceHalfTexturing=!1;b.mForcedOwner=0;b.mShapeList=this.mShapeList;b.mVertexList=this.mVertexList;b.mVertexOffset=this.mVertexOffset;b.mTextureID=this.mTextureID;b.mIndexCount=this.mIndexCount;b.mForcedOwner=this.mForcedOwner;b.mTextureW=this.mTextureW;b.mTextureH=this.mTextureH;return b};
GameonModel.prototype.getRef=function(b,d){if(!(b<this.mRefs.length))for(;b>=this.mRefs.length;){var c=new GameonModelRef(this,d);this.mRefs.push(c);this.mRefs.length>1&&(c.copyData(this.mRefs[0]),c.set())}return this.mRefs[b]};GameonModel.prototype.getVisibleRefs=function(b){for(var d=0,c=0;c<this.mVisibleRefs.length;c++){var e=this.mVisibleRefs[c];e.loc()==b&&e.mVisible&&d++}return d};
GameonModel.prototype.hideDomainRefs=function(b){for(var d=0;d<this.mRefs.length;d++)ref.loc()==b&&this.remVisibleRef(ref,!1)};GameonModel.prototype.setupIter=function(b){for(this.mIterQueue=[];this.mRefs.length<b;){var d=new GameonModelRef(this,0);this.mRefs.push(d);this.mRefs.length>1&&(d.copyData(this.mRefs[0]),d.set())}for(d=0;d<b;d++)this.mIterQueue.push(d)};
GameonModel.prototype.getRefById=function(b,d){if(b.id>=0)return this.getRef(b.id,d);for(var c=0;c<this.mIterQueue.length;c++){var e=this.mIterQueue[c],f=this.mRefs[e];if(b.alias==f.mRefAlias)return this.mIterQueue.splice(c,1),this.mIterQueue.push(e),b.id=e,f}e=this.mIterQueue[0];f=this.mRefs[e];f.mRefAlias=b.alias;this.mIterQueue.splice(0,1);this.mIterQueue.push(e);b.id=e;return f};
GameonModel.prototype.onTouch=function(b,d,c,e){var f=[0,0,0];if(this.mParentArea!=void 0){if(!this.mParentArea.acceptTouch(this,e))return}else if(this.mOnClick==void 0)return;for(var g=e=0;g<this.mRefs.length;g++){var h=this.mRefs[g];if(h.mVisible&&h.loc()==c){var j=h.intersectsRay(b,d,f);if(j>=0&&j<1E6)return j=h.distToCenter(f),b=new AreaIndexPair,b.mLoc[0]=f[0],b.mLoc[1]=f[1],b.mLoc[2]=f[2],b.mDist=j,this.mParentArea!=void 0?(b.mArea=this.mParentArea.mID,b.mOnclick=this.mParentArea.mOnclick,b.mOnFocusLost=
this.mParentArea.mOnFocusLost,b.mOnFocusGain=this.mParentArea.mOnFocusGain,b.mIndex=this.mParentArea.indexOfRef(h)):(b.mArea=this.mName,b.mOnclick=this.mOnClick,b.mAlias=h.mRefAlias,b.mOnFocusLost=void 0,b.mOnFocusGain=void 0,b.mIndex=e),b}e++}};
GameonModel.prototype.addShapeFromString=function(b,d,c){for(var e=new GLShape(this),f=c.split(" "),c=Array(4),g=0,h=this.mApp.colors().white,h=this.mCurrentMaterial!=void 0&&this.mCurrentMaterial.diffuse!=void 0?this.mCurrentMaterial.diffuse:this.mCurrentMaterial!=void 0&&this.mCurrentMaterial.ambient!=void 0?this.mCurrentMaterial.ambient:this.mApp.colors().white,j=0;j<f.length;j++){var l=f[j];if(l.length!=0){if(l.indexOf("/")>=0){var m=l.split("/"),l=parseInt(m[0])-1,m=parseInt(m[1])-1,l=b[l],m=
d[m],k=void 0;if(this.mCurrentMaterial.t!=void 0){var n=k=0;m[0]<0&&(m[0]=0);m[0]>1&&(m[0]=1);m[1]<0&&(m[1]=0);m[1]>1&&(m[1]=1);k=m[0]/this.mCurrentMaterial.t[2];n=(1-m[1])/this.mCurrentMaterial.t[3];k+=this.mCurrentMaterial.t[0];n+=this.mCurrentMaterial.t[1];k=e.addVertex(l[0],l[2],l[1],k,n,h)}else k=e.addVertex(l[0],l[2],l[1],m[0],1-m[1],h)}else l=parseInt(l)-1,l=b[l],l==void 0&&console.log("dasdasdas"),k=e.addVertex(l[0],l[2],l[1],0,0,h);c[g]=k;g++}}g==3?(b=new GLFace(c[0],c[1],c[2]),e.addFace(b)):
g==4&&(b=new GLFace(c[0],c[1],c[2]),e.addFace(b),b=new GLFace(c[0],c[2],c[3]),e.addFace(b));this.addShape(e)};GameonModel.prototype.useMaterial=function(b){var d=this.mApp.textures().get(TextureFactory_Type.DEFAULT);this.mCurrentMaterial=this.mApp.textures().getMaterial(b);if(this.mTextureID==d)if(this.mCurrentMaterial.diffuseMapId!=d)this.mTextureID=this.mCurrentMaterial.diffuseMapId;else if(this.mCurrentMaterial.ambientMapId!=d)this.mTextureID=this.mCurrentMaterial.ambientMapId};function GameonWorldView(b,d){this.mWorld=b;this.mDoOnce=!1;this.mApp=d;this.mLockedDraw=!1;this.mSplashLookat=new J3DIMatrix4}GameonWorldView.prototype.onDrawFrame=function(b,d){if(!this.mLockedDraw)b.colorMask(!0,!0,!0,!1),b.clearDepth(1),b.clear(b.COLOR_BUFFER_BIT),this.mWorld.mInDraw=!0,this.mWorld.draw(b,d),this.mWorld.mInDraw=!1,b.colorMask(!0,!0,!0,!0)};
GameonWorldView.prototype.onSurfaceChanged=function(b,d,c){this.mWidth=d;this.mHeight=c;this.mWorld.prepare(b);b.viewport(0,0,d,c);this.mWorld.onSurfaceChanged(b,d,c);this.mApp.setScreenBounds();b.perspectiveMatrix=new J3DIMatrix4};
GameonWorldView.prototype.onSurfaceCreated=function(b){this.doOnce?this.mApp.textures().init(b):(this.mApp.textures().init(b),this.mApp.sounds().init(this.mApp),this.mApp.mSplashScreen!=void 0&&this.mApp.mSplashScreen.length>0&&this.mWorld.initSplash(b,this.mApp.mSplashScreen),this.doOnce=!0);this.mWorld.onSurfaceCreated(b)};GameonWorldView.prototype.perspective=function(b,d,c,e,f){Math.tan(d*Math.PI/360);b.perspectiveMatrix.perspective(d,c,e,f)};
GameonWorldView.prototype.drawSplash=function(b){this.perspectiveHud(b,this.mFovHud,this.mWidth/this.mHeight,this.mNearHud,this.mFarHud);var d=new J3DIMatrix4,c=Array(16);GMath.lookAt(c,[0,0,5],[0,0,0],[0,1,0]);d.load(c);b.perspectiveMatrix.multiply(d);b.perspectiveMatrix.setUniform(b,b.u_modelProjMatrixLoc,!1);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);this.mWorld.drawSplash(b);return!0};GameonWorldView.prototype.lockDraw=function(b){this.mLockedDraw=b};function Areas(){this.areas=[];this.mVisible=!1}function LayoutGrid(b,d){this.mVisibleAreas=[];this.mAreas={};this.mPageIds={};this.mWorld=b;this.mApp=d;this.mPagePopup=""}LayoutGrid.prototype.getWorld=function(){return this.mWorld};LayoutGrid.prototype.initLayout2=function(b){var d;d=b.area;for(var c=0;c<d.length;c++){var e=this.processAreaData2(d[c]),f=b.pageid;this.addToPage(e,f);if(f=="*")e.mPageVisible=!0,e.updateState("visible",!1)}};
LayoutGrid.prototype.processAreaData2=function(b){var d=b.type,c=this.getArea(b.id);c!=void 0&&this.removeArea(c);d=this.createArea(d);if(d!=void 0){d.mWorld=this.mWorld;d.mParent=this;d.mID=b.id;d.mParent=this;b.size!=void 0&&d.setSize(b.size);b.location!=void 0&&d.updateLocation(b.location);b.rotation!=void 0&&d.setRotation(b.rotation);if(b.bounds!=void 0)c=b.bounds,d.updateBounds(c);if(b.scrollers!=void 0)c=b.scrollers,d.setScrollers(c);b.state!=void 0&&d.updateState(b.state,!0);b.display!=void 0&&
d.updateDisplay(b.display);b.layout!=void 0&&d.updateLayout(b.layout);b.text!=void 0&&d.setText(b.text);b.onclick!=void 0&&d.updateOnclick(b.onclick);b.onfocusgain!=void 0&&d.updateOnFocusGain(b.onfocusgain);b.onfocuslost!=void 0&&d.updateOnFocusLost(b.onfocuslost);if(b.data!=void 0)d.mData=b.data;b.background!=void 0&&d.updateBackground(b.background);b.foreground!=void 0&&d.updateForeground(b.foreground);b.colors!=void 0&&d.updateColors(b.colors);b.border!=void 0&&d.updateBorder(b.border);b.fields!=
void 0&&d.createFields(b.fields);d.initLayout();b.items!=void 0&&d.createItems(b.items,!1);this.mAreas[d.mID]=d;d.createWorldModel();d.updateModelsTransformation();return d}};
LayoutGrid.prototype.createArea=function(b){var d=void 0,c=void 0,b=b.split(".");b.length>0&&(d=b[0]);b.length>1&&(c=b[1]);if(d!=void 0)if(d=="table")return new LayoutAreaTable(c,this.mApp);else if(d=="text")return new LayoutAreaText(c,this.mApp);else if(d=="layout")return new LayoutAreaLayout(c,this.mApp);else if(d=="cards")return new LayoutAreaCards(c,this.mApp)};
LayoutGrid.prototype.moveFigure=function(b,d,c,e){var f=void 0,g=void 0,h=void 0,g=this.getArea(b),h=this.getArea(c);g!=void 0&&(f=g.getItem(d),g.removeFigure(d));f!=void 0&&h!=void 0&&h.placeFigure(e,f,!1)};LayoutGrid.prototype.setAreaState=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateState(d,!1)};LayoutGrid.prototype.setAreaLocation=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateLocation(d)};LayoutGrid.prototype.areaMove=function(b,d){var c=this.getArea(b);c!=void 0&&c.move(d)};
LayoutGrid.prototype.setAreaRotation=function(b,d){var c=this.getArea(b);c!=void 0&&c.setRotation(d)};LayoutGrid.prototype.setAreaScrollers=function(b,d){var c=this.getArea(b);c!=void 0&&c.setScrollers(d)};LayoutGrid.prototype.setAreaScale=function(b,d){var c=this.getArea(b);c!=void 0&&c.setScale(d)};LayoutGrid.prototype.setAreaItemScale=function(b,d){var c=this.getArea(b);c!=void 0&&c.setItemScale(d)};LayoutGrid.prototype.setAreaSize=function(b,d){var c=this.getArea(b);c!=void 0&&c.setSize(d)};
LayoutGrid.prototype.areaDataUpdate=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateData(d)};LayoutGrid.prototype.getArea=function(b){b=this.mAreas[b];if(b!=void 0)return b};LayoutGrid.prototype.areaFieldSetItem=function(b,d,c){d=this.getArea(d);d!=void 0&&d.fieldSetItem(c,b)};LayoutGrid.prototype.areaUpdateItems=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateItems(d)};LayoutGrid.prototype.areaUpdateText=function(b,d){var c=this.getArea(b);c!=void 0&&c.setText(d)};
LayoutGrid.prototype.areaUpdateTextColor=function(b,d){var c=this.getArea(b);c!=void 0&&c.setTextColor(d)};LayoutGrid.prototype.onAreaDelete=function(b){b=this.getArea(b);b!=void 0&&this.removeArea(b)};LayoutGrid.prototype.clearArea=function(b){if(b=="*")for(b=this.mAreas.length-1;b>=0;b--)this.mAreas[b].clear();else b=this.getArea(b),b!=void 0&&b.clear()};LayoutGrid.prototype.areaUpdateForeground=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateForeground(d)};
LayoutGrid.prototype.areaUpdateBackground=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateBackground(d,!0)};LayoutGrid.prototype.areaUpdateFields=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateFields(d)};LayoutGrid.prototype.areaUpdateLayout=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateLayout(d)};LayoutGrid.prototype.onAreaUpdateLocation=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateLocation(d)};
LayoutGrid.prototype.removeFigure=function(b,d){var c=this.getArea(b);c!=void 0&&c.removeFigure(d)};LayoutGrid.prototype.onAreaUpdateOnclick=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateOnclick(d)};LayoutGrid.prototype.onAreaUpdateOnFocusLost=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateOnFocusLost(d)};LayoutGrid.prototype.onAreaUpdateOnFocusGain=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateOnFocusGain(d)};LayoutGrid.prototype.clearAll=function(){this.mAreas.clear()};
LayoutGrid.prototype.onEvent2=function(b){var d=b.data,c=b.type,e=b.data2,f=b.data3;switch(parseInt(b.id)){case 2012:this.mPagePopup=c;case 2010:this.showPage(c,void 0);break;case 2013:this.mPagePopup=c;case 2011:this.showPage(c,d);break;case 2015:this.clearPage(c);case 2020:if(this.mPagePopup==c)this.mPagePopup="";this.hidePage(c,void 0);break;case 2021:if(this.mPagePopup==c)this.mPagePopup="";this.hidePage(c,d);break;case 2030:this.animScreen(c,d);break;case 2500:this.onCameraFit(c,d,e);break;case 2501:this.onCameraSet(c,
d,e);break;case 2502:this.onCameraProj(c,d,e,f);break;case 2504:this.onCameraMove(c,d,e,f);break;case 3001:this.onAreaDelete(c,d);break;case 3002:this.onAreaClear(c,d,!0);break;case 3003:this.onAreaSwapId(c,d);break;case 3004:this.onAreaClear(c,d,!1);break;case 3050:this.onAreaFieldSetItem(c,d);break;case 3051:this.onAreaFieldMoveItem(c,d);break;case 3053:this.onAreaFieldMoveItemA(c,d);break;case 3054:this.onItemsAnim(c,d);break;case 3055:this.onItemAnim(c,d);break;case 3052:this.onAreaFieldRemoveItem(c,
d);break;case 3110:this.setAreaState(c,d);break;case 3130:this.setAreaSize(c,d);break;case 3190:this.setAreaLocation(c,d);break;case 3196:this.areaMove(c,d);break;case 3191:this.setAreaScale(c,d);break;case 3195:this.setAreaRotation(c,d);break;case 3192:this.setAreaItemScale(c,d);break;case 3220:this.onAreaUpdateItems(c,d);break;case 3221:this.onAreaUpdateItemsA(c,d);break;case 3222:this.onAreaUpdateItem(c,d,!1);break;case 3223:this.onAreaInvertItem(c,d);break;case 3224:this.onAreaUpdateItem(c,d,
!0);break;case 3225:this.onAreaPushFrontItem(c,d);break;case 3240:this.areaUpdateForeground(c,d);break;case 3250:this.areaUpdateBackground(c,d);break;case 3200:this.onAreaUpdateOnclick(c,d);break;case 3201:this.onAreaUpdateOnFocusGain(c,d);break;case 3202:this.onAreaUpdateOnFocusLost(c,d);break;case 3180:this.areaUpdateText(c,d);break;case 3120:this.areaUpdateTextColor(c,d);break;case 3400:this.areaSetScrollers(c,d);break;case 3210:this.areaAnim(c,d,e,f)}};
LayoutGrid.prototype.areaAnim=function(b,d,c,e){b=this.getArea(b);b!=void 0&&b.anim(d,c,e)};LayoutGrid.prototype.onAreaClear=function(b){b=this.getArea(b);b!=void 0&&b.clear(!1)};LayoutGrid.prototype.onItemsAnim=function(b,d){var c=this.getArea(b);c!=void 0&&c.itemsAnim(d)};LayoutGrid.prototype.onItemAnim=function(b,d){var c=this.getArea(b);if(c!=void 0){var e=d.split("|");c.itemAnim(e[0],e[1])}};LayoutGrid.prototype.onAreaPushFrontItem=function(b,d){var c=this.getArea(b);c!=void 0&&c.pushFrontItem(d)};
LayoutGrid.prototype.onAreaUpdateItemsA=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateItemsA(d)};LayoutGrid.prototype.onAreaFieldSetItem=function(b,d){var c=d.split(","),e=c[0],c=parseInt(c[1]),e=this.getArea(e);e!=void 0&&e.fieldSetItem(c,b)};LayoutGrid.prototype.onAreaFieldMoveItem=function(b,d){var c=d.split(","),e=c[0],f=parseInt(c[1]),g=c[2],c=parseInt(c[3]);this.moveFigure(e,f,g,c)};
LayoutGrid.prototype.onAreaFieldMoveItemA=function(b,d){for(var c=d.split(","),e=c[0],f=parseInt(c[1]),g=c[2],h=parseInt(c[3]),j=c[4],l=c[5],m=[],k=6;k<c.length;k+=2){var n=new AreaIndexPair;n.mArea=c[k];n.mIndex=parseInt(c[k+1]);m.push(n)}this.moveFigureA(e,f,g,h,j,l,m)};LayoutGrid.prototype.onAreaFieldRemoveItem=function(b,d){var c=parseInt(d),e=this.getArea(b);e!=void 0&&e.removeFigure(c)};LayoutGrid.prototype.onAreaUpdateItems=function(b,d){var c=this.getArea(b);c!=void 0&&c.updateItems(d)};
LayoutGrid.prototype.onAreaInvertItem=function(b,d){var c=this.getArea(b);c!=void 0&&c.invertItem(d)};LayoutGrid.prototype.onAreaUpdateItem=function(b,d,c){b=this.getArea(b);b!=void 0&&b.updateItem(d,c)};
LayoutGrid.prototype.moveFigureA=function(b,d,c,e,f,g){if(d<0||e<0)console.error("moveFigureA "+b+" "+d+" "+c+" "+e);else{var h=void 0,j=void 0,l=void 0,m=void 0,k=void 0,m=this.getArea(b),k=this.getArea(c);if(m!=void 0){l=m.getItem(d);if(l==void 0)return;h=new GameonModelRef(void 0,m.mDisplay);h.copy(l.mModelRef);h.copyMat(l.mModelRef);m.removeFigure(d)}if(l!=void 0){if(k!=void 0)f=="walk2back"?k.placeFigure(e,l,!0):k.placeFigure(e,l,!1),j=l.mModelRef;h!=void 0&&j!=void 0&&this.mApp.anims().animRef(f,
h,j,g)}}};LayoutGrid.prototype.pathRefsFromPath=function(b,d,c){for(var e,f=0;f<d.length;f++)if(e=this.getArea(d[f].mArea),e!=void 0){var g=new GameonModelRef(void 0);e.getModelRef(d[f].mIndex,g,c);b.push(g)}};LayoutGrid.prototype.onDragNearest=function(b,d){return this.findNearest(b,d,!1)};LayoutGrid.prototype.onClickNearest=function(b,d){return this.findNearest(b,d,!0)};
LayoutGrid.prototype.findNearest=function(b,d,c){for(var e=void 0,f=1E7,g=[0,0,0],h=void 0,j=-1,l=this.mVisibleAreas.length-1;l>=0;l--){var m=this.mVisibleAreas[l];if(m.mActiveItems!=0){if(c==!0){if(m.mOnclick==void 0||m.mOnclick.length==0)continue}else if(!m.mHasScrollV&&!m.mHasScrollH&&(m.mOnFocusGain==void 0||m.mOnFocusGain.length==0)&&(m.mOnFocusLost==void 0||m.mOnFocusLost.length==0))continue;if(j!=m.mDisplay){var k=this.mApp.world().getDomain(m.mDisplay);if(k==void 0||k.mVisible==!1)continue;
j=m.mDisplay;k.mCS.screen2spaceVec(b,d,g);h=k.mCS.eye()}m=m.fieldClicked(h,g);if(m!=void 0&&m.mDist<=f)e=m,f=m.mDist}}if(f!=1E7)return e};LayoutGrid.prototype.onCameraFit=function(b,d,c){if(b=="fit"){var e=d.split(","),d=b=0;e.length>1&&(b=parseFloat(e[0]),d=parseFloat(e[1]));e=this.mApp.world().getDomainByName(c);e!=void 0&&(e.mCS.init(b/2,d/2,0),e.mCS.snap_cam_z([0,0,1],[0,0,0],[0,1,0]),(c=="hud"||c=="world")&&this.mApp.setScreenBounds())}};
LayoutGrid.prototype.onCameraSet=function(b,d,c){var e=b.split(","),b=Array(3);e.length>0&&(b[0]=parseFloat(e[0]));e.length>1&&(b[1]=parseFloat(e[1]));e.length>2&&(b[2]=parseFloat(e[2]));e=d.split(",");d=Array(3);e.length>0&&(d[0]=parseFloat(e[0]));e.length>1&&(d[1]=parseFloat(e[1]));e.length>2&&(d[2]=parseFloat(e[2]));e=this.mApp.world().getDomainByName(c);e!=void 0&&(e.mCS.setCamera(b,d),(c=="hud"||c=="world")&&this.mApp.setScreenBounds())};
LayoutGrid.prototype.onCameraMove=function(b,d,c,e){var f=b.split(","),b=Array(3);f.length>0&&(b[0]=parseFloat(f[0]));f.length>1&&(b[1]=parseFloat(f[1]));f.length>2&&(b[2]=parseFloat(f[2]));f=d.split(",");d=Array(3);f.length>0&&(d[0]=parseFloat(f[0]));f.length>1&&(d[1]=parseFloat(f[1]));f.length>2&&(d[2]=parseFloat(f[2]));c=this.mApp.world().getDomainByName(c);c!=void 0&&(e=parseInt(e),c.mCS.moveCamera(b,d,e))};
LayoutGrid.prototype.onCameraProj=function(b,d,c,e){var b=parseFloat(b),d=parseFloat(d),c=parseFloat(c),f=this.mApp.world().getDomainByName(e);f!=void 0&&(f.setFov(b,d,c),(e=="hud"||e=="world")&&this.mApp.setScreenBounds())};
LayoutGrid.prototype.setVisibleArea=function(b,d){var c=this.mPageIds[b.mPageId];if(c!=void 0)if(c=c.mVisible,d&&c){if(this.mVisibleAreas.indexOf(b)<0){for(var c=!1,e=0;e<this.mVisibleAreas.length;e++)if(this.mVisibleAreas[e].mDisplay>b.mDisplay){this.mVisibleAreas.splice(e,0,b);c=!0;break}c||this.mVisibleAreas.push(b)}}else d||(c=this.mVisibleAreas.indexOf(b),c>=0&&this.mVisibleAreas.splice(c,1))};
LayoutGrid.prototype.addToPage=function(b,d){if(b!=void 0){var c=this.mPageIds[d];if(c==void 0){c=new Areas;if(d=="*")c.mVisible=!0;this.mPageIds[d]=c}b.mPageId=d;if(c.areas.indexOf(b)<0)c.areas.push(b),b.mPageVisible=c.mVisible}};LayoutGrid.prototype.showPage=function(b,d){var c=this.mPageIds[b];if(c!=void 0){c.mVisible=!0;for(var e=0;e<c.areas.length;e++){var f=c.areas[e];d!=void 0&&f.initAnim(d,!1);f.mPageVisible=!0;f.setInitState()}}};
LayoutGrid.prototype.hidePage=function(b,d){var c=this.mPageIds[b];if(c!=void 0){c.mVisible=!1;for(var e=0,f=0;f<c.areas.length;f++){var g=c.areas[f];d!=void 0?e=g.initAnim(d,!0):(g.mPageVisible=!1,g.setInitState())}d!=void 0&&this.mApp.sendExec(e,"Q.layout.hide('"+b+"').now();")}};function array_removeElement(b,d){for(var c=0;c<b.length;c++)b[c]==d&&b.splice(c,1)}
LayoutGrid.prototype.removeArea=function(b){b.clear(!0);this.mVisibleAreas.indexOf(b)>=0&&array_removeElement(this.mVisibleAreas,b);this.mAreas[b.mID]!=void 0&&array_removeElement(this.mAreas,b);var d=this.mPageIds[b.mPageId];d!=void 0&&array_removeElement(d.areas,b)};
LayoutGrid.prototype.onAreaSwapId=function(b,d){var c=this.getArea(b),e=this.getArea(d);if(!(c==void 0||e==void 0)){this.mAreas[c.mID]!=void 0&&array_removeElement(this.mAreas,c);this.mAreas[e.mID]!=void 0&&array_removeElement(this.mAreas,e);var f=c.mID;c.mID=e.mID;e.mID=f;this.mAreas[c.mID]=c;this.mAreas[e.mID]=e}};
LayoutGrid.prototype.animScreen=function(b,d){if(b=="color"){var c=d.split(","),e=this.mApp.colors().white,f=this.mApp.colors().black,g=void 0,h=parseInt(c[0]);c.length>1&&(e=this.mApp.colors().getColor(c[1]));c.length>2&&(f=this.mApp.colors().getColor(c[2]));c.length>3&&(g=this.mApp.colors().getColor(c[3]));this.mApp.anims().createAnimColor(h,e,f,g)}};
LayoutGrid.prototype.clearPage=function(b){var d=this.mPageIds[b];if(d!=void 0){this.hidePage(b,void 0);for(var b=d.areas.length,c=0;c<b;c++)d.areas[c].clear(!0);delete this.mPageIds[d]}};function ServerkoParse(b){this.mApp=b;this.mUsername="Dembinjo";this.mOptions="";this.mLoadedScripts=[];this.mSocket=void 0;this.mRoot="10000";this.mCache=""}ServerkoParse.prototype.set=function(){this.showData(!0)};ServerkoParse.prototype.readJavascriptLogger=function(){var b=void 0;do b=console.shift(),b instanceof String?print("JS :"+b+"\n"):b!=void 0&&print("JS :"+str(b)+"\n");while(b!=void 0&&b.length>0);window.setTimeout("q_serverparser.readJavascriptLogger();",50)};
var q_serverparser=void 0,q_serverConnected=!1;ServerkoParse.prototype.showData=function(b){q_serverparser=this;for(var d=void 0;(d=this.execScript("Q.serverko.getData();"))!=void 0&&d.length!=0;)if(d.length>0)this.onJSONData(d);b&&window.setInterval("q_serverparser.showData(false);",50)};ServerkoParse.prototype.execScript=function(b,d){if(d!=void 0)d==0&&(d=1),window.setTimeout(b,d);else{var c=eval(b);if(c!=void 0)return c}};
ServerkoParse.prototype.execScriptFromFile=function(b){var d="res/";d+=b;q_getScript(d)};ServerkoParse.prototype.execQScriptFromFile=function(b){var d="qres/";d+=b;q_getScript(d)};ServerkoParse.prototype.startScript=function(b,d){this.mUsername=b;this.mOptions=d};ServerkoParse.prototype.sendUserData=function(b){this.execScript("Q.handlers.script_userData('"+this.mUsername+"', '"+b+"');")};ServerkoParse.prototype.stop=function(){};ServerkoParse.prototype.loadFramework=function(){};
ServerkoParse.prototype.loadScript=function(b,d){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule2('"+b+"');",d)};ServerkoParse.prototype.loadModule2=function(b){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule2('"+b+"');",0)};ServerkoParse.prototype.loadModule=function(b){GameonApp.lock=!0;window.setTimeout("q_serverparser.execLoadModule('"+b+"');",0)};
ServerkoParse.prototype.execLoadModule=function(b){this.mLoadedScripts.indexOf(b)<0&&(this.mLoadedScripts.push(b),this.execScriptFromFile(b))};ServerkoParse.prototype.execLoadModule2=function(b){this.execScriptFromFile(b)};ServerkoParse.prototype.onJSONData=function(b){b=eval("("+b+")");b!=void 0&&this.mApp.queueResponse(b)};var q_script_reqs=[],q_req_working=!1;
function q_getScript(b){console.log(" get script "+b);var d=document.getElementsByTagName("head")[0],c=document.createElement("script");c.src=b;var e=!1;GameonApp.lock=!0;c.onload=c.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete"))e=!0,c.onload=c.onreadystatechange=void 0,GameonApp.lock=!1};d.appendChild(c)}
function q_onLoadScript(b){q_serverparser.execScript(b.response,10);q_req_working=!1;q_script_reqs.length>0&&(b=q_script_reqs.shift(),q_req_working=True,b.send(void 0))}ServerkoParse.prototype.sendConnect=function(b){this.execScript(this.mConnectScript+"("+b+",'"+this.mServerAddr+"');")};
ServerkoParse.prototype.onSocketData=function(b){this.mCache+=b;do{console.log("data cache: "+this.mCache);var d=this.mCache.indexOf("\r\n\r\n");if(d>=0)b=this.mCache.substr(0,d+4),this.mCache=this.mCache.substr(d+4),this.onData(b)}while(d>=0)};
ServerkoParse.prototype.onData=function(b){console.log("rec -> ",b);if(this.mWaitingForContent)this.onJSONData(b),this.mWaitingForContent=!1;else for(var b=b.split("\r\n"),d=0;d<b.length;d++){var c=b[d];if(c.indexOf("HTTP/1.0 300")==0){this.sendJoin(-1);break}else if(c.indexOf("HTTP/1.0 202")==0){if(this.mWaitingForJoin)this.mWaitingForJoin=!1,this.sendJoin(1)}else if(c.indexOf("Content-length")==0){this.mWaitingForContent=!0;break}}};
ServerkoParse.prototype.connect=function(b,d){q_serverConnected==!0&&this.disconnect();q_serverConnected=!1;b.split(":");this.mSocket=io.connect("http://"+b);this.mServerAddr=b;this.mConnectScript=d;this.mSocket.on("connect",function(){q_serverConnected=!0;q_serverparser.sendConnect(1)});this.mSocket.on("message",function(b){console.log(" MESSAGE ="+b);b=base64_decode(b);console.log(" MESSAGE "+b);q_serverparser.onSocketData(b)});this.mSocket.on("disconnect",function(){q_serverConnected=!1;q_serverparser.sendConnect(-1)})};
ServerkoParse.prototype.disconnect=function(){this.mCache="";if(this.mSocket!=void 0)this.mSocket.disconnect(),q_serverConnected=!1,this.mSocket=void 0};ServerkoParse.prototype.sendJoin=function(b){this.execScript(this.mJoinScript+"("+b+",'"+this.mServerAddr+"');")};
ServerkoParse.prototype.join=function(b,d,c){if(this.mSocket!=void 0&&q_serverConnected!=!1)this.mRoom=b,this.mUser=d,this.mJoinScript=c,this.mWaitingForJoin=!0,b="POST "+("/"+this.mRoot+"/"+this.mRoom+"/"+this.mUser)+" HTTP/1.1\r\n",b+="Host: qframework\r\n",b+="User-Agent: webgl\r\n",b+="\r\n",console.log("send -> ",b),this.mSocket.send(base64_encode(b))};
ServerkoParse.prototype.send=function(b){if(q_serverConnected!=!1){var d="PUT "+("/"+this.mRoot+"/"+this.mRoom+"/"+this.mUser)+" HTTP/1.1\r\n";d+="Host: qframework\r\n";d+="User-Agent: jogampapp\r\n";d+="Data: "+b+"\r\n";d+="\r\n";console.log("send -> ",d);this.mSocket.send(base64_encode(d))}};ServerkoParse.parseFloatArray=function(b,d){if(d==void 0||d=="")return 0;for(var c=0,e=d.split(","),f=0;f<e.length;f++)b[c++]=parseFloat(e[f]);return c};
ServerkoParse.parseFloatArray2=function(b){for(var d=[],c=0,b=b.split(" "),e=0;e<b.length;e++)c=parseFloat(b[e]),d.push(c);return d};ServerkoParse.parseIntArray=function(b,d){if(d==void 0||d=="")return 0;for(var c=0,e=d.split(","),f=0;f<e.length;f++)b[c++]=parseInt(e[f]);return c};ServerkoParse.parseFloatData=function(b,d,c){for(var e=0,f=0,g=0,h=void 0,j=0,d=d.split(","),l=0;l<d.length;l++)f==0&&(j=c[g++],g%=c.length,h=Array(j)),e=parseFloat(d[l]),h[f++]=e,f>=j&&(b.push(h),f=0);return b.size()};
ServerkoParse.parseIntData=function(b,d,c){for(var e=0,f=0,g=0,h=void 0,j=0,d=d.split(","),l=0;l<d.length;l++)f==0&&(j=c[g++],g%=c.length,h=Array(j)),e=parseInt(d[l]),h[f++]=e,f>=j&&(b.push(h),f=0);return b.size()};ServerkoParse.parseIntVector=function(b){for(var d=0,c=Array(f),e=0,b=b.split(","),f=b.length,f=0;f<b.length;f++)d=parseInt(b[f]),c[e++]=d;return c};
ServerkoParse.parseColorVector=function(b){for(var d=0,b=b.split(","),c=Array(b.length),e=0,f=0;f<b.length;f++)d=ColorFactory.getColorVal(b[f]),c[e++]=d;return c};ServerkoParse.parseFloatVector=function(b){for(var d=0,b=b.split(","),c=Array(b.length),e=0,f=0;f<b.length;f++)d=parseFloat(b[f]),c[e++]=d;return c};var getcounter=0;
ServerkoParse.prototype.get=function(b){b+="?"+getcounter;getcounter++;var d=new XMLHttpRequest;d.onload=function(){var b=d.response;console.log(b);q_serverparser.onJSONData(b)};d.open("GET",b,!0);d.send(null)};function Q_Settings(b){this.mApp=b;this.mPrefsName="";this.mParser=void 0;this.mSettings={};this.storage=void 0}Q_Settings.prototype.init=function(b,d,c){this.mPrefsName=c+"_prefs_";this.mParser=b;this.mSettings={};if("localStorage"in window&&window.localStorage!==null)this.storage=window.localStorage};Q_Settings.prototype.setParser=function(b){mParser=b};Q_Settings.prototype.open=function(){this.mSettings={}};Q_Settings.prototype.save=function(){};
Q_Settings.prototype.writeInt=function(b,d){this.storage!=void 0?this.storage.setItem(this.mPrefsName+b,d):this.mSettings[b]=d};Q_Settings.prototype.writeStr=function(b,d){this.storage!=void 0?this.storage.setItem(this.mPrefsName+b,d):this.mSettings[b]=d};Q_Settings.prototype.loadInt=function(b,d){var c="0";this.storage!=void 0?c=this.storage.getItem(this.mPrefsName+b):this.mSettings[b]!=void 0&&(c=this.mSettings[b]);c==void 0&&(c="0");this.mParser.execScript(d+"="+c+";")};
Q_Settings.prototype.loadStr=function(b,d){var c="";this.storage!=void 0?c=this.storage.getItem(this.mPrefsName+b):this.mSettings[b]!=void 0&&(c=this.mSettings.get(b));c==void 0&&(c="");this.mParser.execScript(d+"='"+c+"';")};Q_Settings.prototype.loadArray=function(b,d){var c="";this.storage!=void 0?c=this.storage.getItem(this.mPrefsName+b):this.mSettings[b]!=void 0&&(c=this.mSettings.get(b));c==void 0||c.length==0||this.mParser.execScript(d+"=eval(["+c+"]);")};function GameonApp(b,d){this.mWorld=new GameonWorld(this);this.mView=new GameonWorldView(this.mWorld,this);this.mDataGrid=new LayoutGrid(this.mWorld,this);this.mScript=new ServerkoParse(this);this.mPreExec=void 0;this.mUsername="Dembinjo";this.mContext=b;this.mAppName=d;this.mResponsesQueue=[];this.mScreenb=Array(8);this.mHudb=Array(8);this.mSplashScreen="";this.mSplashTimeStart=this.mSplashTime=0;this.mSplashOutStart=this.mDrawSPlash=!1;this.mFocused=void 0;this.mAnims=new AnimFactory(this);this.mItems=
new ItemFactory(this);this.mTextures=new TextureFactory(this);this.mColors=new ColorFactory;this.mSounds=new SoundFactory;this.mSettings=new Q_Settings(this);this.mObjectsFact=new ObjectsFactory(this);this.mBox2dWrapper=new Box2dWrapper(this);this.mFrameLastTime=this.mFrameDeltaTime=-1;this.mLock=!1;this.mSettings.init(this.mScript,b,d);this.gl=void 0;this.mRendering=this.mDataChange=this.mCameraSet=!1;this.mLastDrag=[1E7,0,0];this.mLastDist=this.mLastClickTime=this.mLastDragTime=0;this.mTouchEnabled=
!0;this.mOnTouchStartCallback=this.mOnTouchEndCallback=this.mOnTouchCallback=void 0;this.mRenderThisFrame=!1}GameonApp.prototype.processData=function(b,d){this.mBox2dWrapper.doFrame(this.mFrameDeltaTime);this.mAnims.process(d);this.execResponses(b);this.mWorld.addModels(b);this.mTextures.flushTextures(b)};
GameonApp.prototype.hasData=function(){if(this.mRenderThisFrame)return this.mRenderThisFrame=!1,!0;if(this.mDrawSPlash||this.mBox2dWrapper.isActive())return!0;if(this.mDataChange==!0)return this.mDataChange=!1,!0;if(this.mRendering)return!1;return this.mResponsesQueue.length==0&&this.mAnims.getCount()==0?(this.mFrameLastTime=-1,!1):!0};
GameonApp.prototype.drawFrame=function(b){if(!this.mRendering){this.mRendering=!0;this.calcFrameDelay();this.gl=b;this.processData(b,this.mFrameDeltaTime);if(this.mDrawSPlash){this.mSplashTimeStart+=this.mFrameDeltaTime;if(this.mSplashTimeStart>this.mSplashTime-500&&this.mSplashOutStart==!1)this.mDataGrid.animScreen("color","500,FFFFFFFF,00000000"),this.mSplashOutStart=!0;this.mSplashTimeStart>this.mSplashTime?(this.mDrawSPlash=!1,this.mView.lockDraw(!1),this.mDataGrid.animScreen("color","500,00000000,FFFFFFFF")):
(this.mView.lockDraw(!0),this.mView.drawSplash(b))}else this.mView.onDrawFrame(b,this.mFrameDeltaTime);if(!this.mCameraSet)this.mDataGrid.onCameraFit("fit","4.0,0","world"),this.mDataGrid.onCameraFit("fit","4.0,0","hud"),this.mCameraSet=!0;this.mRendering=!1}};GameonApp.prototype.surfaceChanged=function(b,d,c){this.mView.onSurfaceChanged(b,d,c);this.mView.onSurfaceCreated(b,d,c)};GameonApp.prototype.context=function(){return this.mContext};GameonApp.prototype.view=function(){return this.mView};
GameonApp.prototype.onJSONData=function(b,d){for(var c=d.gs.room,e=0;e<c.length;e++){var f=c[e];if(f!=void 0){var g=f.res;if(g=="event")this.onEvent2(b,f);else g=="layout"?this.mDataGrid.initLayout2(f):g=="texts"?this.mTextures.initTextures(f):g=="objs"?this.mObjectsFact.initObjects(f):g=="models"?this.mItems.initModels(f):g=="animation"?this.mAnims.initAnimation(f):g=="box2dobjs"&&this.mBox2dWrapper.initObjects(f)}}};
GameonApp.prototype.execResponses=function(b){if(GameonApp.lock!=!0){if(this.mCameraSet==!1)this.mDataGrid.onCameraSet("0,0,0","0,0,5"),this.mDataGrid.onCameraSetHud("0,0,0","0,0,5"),this.mCameraSet=!0;for(;this.mResponsesQueue.length>0;){var d=this.mResponsesQueue[0];this.mDataChanged=!0;this.onJSONData(b,d);this.mResponsesQueue.splice(0,1);if(GameonApp.lock==!0)break}}};GameonApp.prototype.queueResponse=function(b){this.mResponsesQueue.push(b)};
GameonApp.prototype.start=function(b,d){this.mPreExec=d;this.mSettings.setParser(this.mScript);this.mPreExec!=void 0&&this.mScript.execScript(this.mPreExec);this.mScript.loadScript(b,100)};
GameonApp.prototype.onClick=function(b,d){var c=(new Date).getTime()-this.mLastClickTime,e=this.mDataGrid.onClickNearest(b,d);e==void 0&&(e=this.mWorld.onTouchModel(b,d,!0));if(e!=void 0&&e.mOnclick!=void 0){var f=e.mOnclick;f.indexOf("js:")==0?f.indexOf(";")==f.length-1?this.mScript.execScript(f.substring(3)):(f=f.substring(3),f+=e.mAlias==void 0?"('"+e.mArea+"',"+e.mIndex:"('"+e.mArea+"',"+e.mIndex+",'"+e.mAlias+"'",f+=","+c+",["+e.mLoc[0]+","+e.mLoc[1]+","+e.mLoc[2]+"]",f+=","+this.mLastDist,f+=
");",this.mScript.execScript(f)):(f+=","+e.mArea+","+e.mIndex,this.mScript.sendUserData(f))}if(this.mFocused!=void 0)this.onFocusLost(this.mFocused),this.mFocused=void 0;this.mLastDist=0};GameonApp.prototype.endScript=function(){};GameonApp.prototype.startScripts=function(){};GameonApp.prototype.init=function(){this.mScript.loadFramework();this.mScript.set()};
GameonApp.prototype.setScreenBounds=function(){var b=this.mWorld.getDomainByName("hud"),d=this.mWorld.getDomainByName("world");b.mCS.getScreenBounds(this.mHudb);d.mCS.getScreenBounds(this.mScreenb);b="Q.layout.canvasw =";b+=d.mCS.getCanvasW();b+=";Q.layout.canvash = ";b+=d.mCS.getCanvasH();b+=";Q.layout.worldxmin = ";b+=this.mScreenb[0];b+=";Q.layout.worldxmax = ";b+=this.mScreenb[2];b+=";Q.layout.worldymin = ";b+=this.mScreenb[5];b+=";Q.layout.worldymax = ";b+=this.mScreenb[3];b+=";Q.layout.hudxmin = ";
b+=this.mHudb[0];b+=";Q.layout.hudxmax = ";b+=this.mHudb[2];b+=";Q.layout.hudymin = ";b+=this.mHudb[5];b+=";Q.layout.hudymax = ";b+=this.mHudb[3];b+=";";this.mScript.execScript(b)};GameonApp.prototype.onTextInput=function(b,d){var c=prompt("",b);c!=void 0?(c=c.replace("[^A-Za-z0-9 ]",""),c=d+"('"+c+"' , 1);"):c=d+"(undefined, 1);";this.mScript.execScript(c)};GameonApp.prototype.sendEvent=function(b,d){var c=parseInt(b);this.mScript.execScript(d,c)};
GameonApp.prototype.sendExec=function(b,d){var c=parseInt(b);this.mScript.execScript(d,c)};GameonApp.prototype.onPause=function(){};GameonApp.prototype.loadModule=function(b){this.mScript.loadModule(b)};GameonApp.prototype.loadModule2=function(b){this.mScript.loadModule2(b)};GameonApp.prototype.execScript=function(b){this.mScript.execScript(b,10)};GameonApp.prototype.goUrl=function(){};GameonApp.prototype.touchStart=function(b,d){this.mTouchEnabled&&this.fireTouchEvent(1,b,d,0)};
GameonApp.prototype.touchEnd=function(b,d,c,e){this.mTouchEnabled&&(e&&this.fireTouchEvent(2,b,d,c),this.onClick(b,d),this.mWorld.resetDomainPan())};GameonApp.prototype.connect=function(b,d){this.mScript.connect(b,d)};GameonApp.prototype.disconnect=function(){this.mScript.disconnect()};GameonApp.prototype.join=function(b,d){var c=b.split("|"),e=void 0,f=void 0;c.length>0&&(e=c[0]);c.length>1&&(f=c[1]);this.mScript.join(e,f,d)};GameonApp.prototype.send=function(b){this.mScript.send(b)};
GameonApp.prototype.stop=function(){this.mScript.disconnect()};
GameonApp.prototype.mouseDragged=function(b,d){if(!this.mTouchEnabled)return!1;this.mLastDragTime+=this.mFrameDeltaTime==0?100:this.mFrameDeltaTime;this.fireTouchEvent(0,b,d,0);this.mLastDragTime=0;var c=this.mDataGrid.onDragNearest(b,d);c==void 0&&(c=this.mWorld.onTouchModel(b,d,!1));if(c!=void 0&&this.mFocused!=void 0){if(c.mArea==this.mFocused.mArea){if(this.mLastDrag[0]==1E7)return this.mLastDrag[0]=c.mLoc[0],this.mLastDrag[1]=c.mLoc[1],this.mLastDrag[2]=c.mLoc[2],!0;else{var e=c.mLoc[0]-this.mLastDrag[0],
f=c.mLoc[1]-this.mLastDrag[1],g=c.mLoc[2]-this.mLastDrag[2];this.mLastDist=Math.sqrt(e*e+f*f+g*g);e=this.mDataGrid.getArea(c.mArea);if(e!=void 0)e.onDragg(c.mLoc[0]-this.mLastDrag[0],c.mLoc[1]-this.mLastDrag[1],c.mLoc[2]-this.mLastDrag[2])}this.mLastDrag[0]=c.mLoc[0];this.mLastDrag[1]=c.mLoc[1];this.mLastDrag[2]=c.mLoc[2]}if(c.mArea==this.mFocused.mArea&&c.mIndex==this.mFocused.mIndex)return!0;else this.onFocusLost(this.mFocused),this.mFocused=void 0,this.mLastDrag[0]=1E7}else if(this.mFocused!=void 0)this.onFocusLost(this.mFocused),
this.mFocused=void 0;this.mFocused=c;if(c!=void 0)this.onFocusGain(c);if(c==void 0&&this.mWorld.panDomain(b,d))this.mRenderThisFrame=!0;this.mLastDrag[0]=1E7;return c!=null?!0:!1};
GameonApp.prototype.onFocusGain=function(b){if(!(b==void 0||b.mOnFocusGain==void 0)){var d=b.mOnFocusGain;d.indexOf("js:")==0?d.indexOf(";")==d.length-1?this.mScript.execScript(d.substring(3)):(d=d.substring(3),d+="('"+b.mArea+"',"+b.mIndex+");",d+="('"+b.mArea+"',"+b.mIndex+");",this.mScript.execScript(d)):(d+=","+b.mArea+","+b.mIndex,this.mScript.sendUserData(d))}};
GameonApp.prototype.onFocusLost=function(b){if(b!=void 0&&!(b==void 0||b.mOnFocusLost==void 0)){var d=b.mOnFocusLost;d.indexOf("js:")==0?d.indexOf(";")==d.length?this.mScript.execScript(d.substring(3)):(d=d.substring(3),d+="('"+b.mArea+"',"+b.mIndex+");",this.mScript.execScript(d)):(d+=","+b.mArea+","+b.mIndex,this.mScript.sendUserData(d))}};GameonApp.prototype.onFocusProbe=function(b,d){this.mLastClickTime=(new Date).getTime();return this.mouseDragged(b,d,!0)};
GameonApp.prototype.setSplash=function(b,d){this.mSplashTime=d;this.mSplashScreen=b;this.mSplashTimeStart=0;if(this.mSplashScreen!=void 0&&this.mSplashScreen.length>0)this.mDrawSPlash=!0};GameonApp.prototype.setEnv=function(b,d){if(b=="textparam"){var c=d.split(","),e=0;c.length==5&&(e=parseFloat(c[4]));this.mTextures.setParam(parseFloat(c[0]),parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]),e)}};
GameonApp.prototype.onEvent2=function(b,d){var c=d.data,e=d.data2,f=d.data3,g=d.data4,h=d.type;switch(parseInt(d.id)){case 100:this.sendEvent(h,c);break;case 101:this.sendExec(h,c);break;case 102:this.loadModule(h,c);break;case 103:this.loadModule2(h,c);break;case 200:this.setEnv(h,c);break;case 201:this.registerOnTouch(h,0);break;case 202:this.registerOnTouch(h,1);break;case 203:this.registerOnTouch(h,2);break;case 1002:this.onTextInput(h,c);break;case 1200:this.goUrl(h,c);break;case 2600:this.mSettings.open();
break;case 2601:this.mSettings.save();break;case 2610:this.mSettings.writeInt(h,c);break;case 2611:this.mSettings.writeStr(h,c);break;case 2620:this.mSettings.loadInt(h,c);break;case 2621:this.mSettings.loadStr(h,c);break;case 2622:this.mSettings.loadArray(h,c);break;case 4E3:this.mTextures.newTexture(b,h,c,!0);break;case 4001:this.mTextures.deleteTexture(b,h);break;case 4100:this.mObjectsFact.create(h,c,e,f);break;case 4110:this.mObjectsFact.place(h,c,e);break;case 4120:this.mObjectsFact.scale(h,
c);break;case 4130:this.mObjectsFact.texture(h,c,e);break;case 4140:this.mObjectsFact.state(h,c);break;case 4150:this.mObjectsFact.remove(h,c);break;case 4200:this.mAnims.move(h,c,e,f);break;case 4210:this.mAnims.rotate(h,c,e,f);break;case 5E3:this.mSounds.newSound(h,c);break;case 5010:this.mSounds.onPlaySound(h,c);break;case 5011:this.mSounds.setVolume(parseFloat(h));break;case 5012:this.mSounds.setMute(parseInt(c));break;case 6001:this.mItems.newFromTemplate(h,c,void 0);break;case 6002:this.mItems.setTexture(h,
c);break;case 6003:this.mItems.createModel(h,c);break;case 6004:this.mItems.setSubmodels(h,c);break;case 6005:this.mItems.newEmpty(h);break;case 6006:this.mItems.addShape(h,c,e,f,g);break;case 6007:this.mItems.addShapeFromData(h,c,e,f);break;case 6008:this.mItems.createModelFromFile(b,h,c);break;case 7E3:this.connect(h,c);break;case 7001:this.join(h,c);break;case 7002:this.send(h);break;case 7003:this.disconnect();break;case 7005:this.get(h,c);break;case 8E3:this.mWorld.domainCreate(h,c,e);break;
case 8001:this.mWorld.domainRemove(h);break;case 8002:this.mWorld.domainShow(h);break;case 8003:this.mWorld.domainHide(h);break;case 8004:this.mWorld.domainPan(h,c,e,f);break;case 9E3:this.mBox2dWrapper.initWorld(h,c,e);break;case 9001:this.mBox2dWrapper.removeWorld(h);break;case 4300:this.mAnims.animObject(h,c,e,f,void 0);default:this.mDataGrid.onEvent2(d)}};
GameonApp.prototype.calcFrameDelay=function(){this.mFrameLastTime==-1?(this.mFrameLastTime=(new Date).getTime(),this.mFrameDeltaTime=0):(this.mFrameDeltaTime=(new Date).getTime()-this.mFrameLastTime,this.mFrameLastTime+=this.mFrameDeltaTime)};GameonApp.prototype.anims=function(){return this.mAnims};GameonApp.prototype.colors=function(){return this.mColors};GameonApp.prototype.items=function(){return this.mItems};GameonApp.prototype.textures=function(){return this.mTextures};
GameonApp.prototype.sounds=function(){return this.mSounds};GameonApp.prototype.settings=function(){return this.mSettings};GameonApp.prototype.objects=function(){return this.mObjectsFact};GameonApp.prototype.cs=function(){return this.mCS};GameonApp.prototype.world=function(){return this.mWorld};GameonApp.prototype.grid=function(){return this.mDataGrid};GameonApp.prototype.script=function(){return this.mScript};GameonApp.prototype.view=function(){return this.mView};GameonApp.prototype.frameDelta=function(){return this.mFrameDeltaTime};
GameonApp.prototype.get=function(b,d){this.mScript.get(b,d)};GameonApp.prototype.registerOnTouch=function(b,d){if(d==0)this.mOnTouchCallback=b;if(d==1)this.mOnTouchStartCallback=b;if(d==2)this.mOnTouchEndCallback=b};
GameonApp.prototype.fireTouchEvent=function(b,d,c,e){if(b==0&&this.mOnTouchCallback!=void 0&&this.mOnTouchCallback.length>0){var f=this.mOnTouchCallback+"("+this.mWorld.gerRelativeX(d)+","+this.mWorld.gerRelativeY(c)+");";this.mScript.execScript(f,0)}b==1&&this.mOnTouchStartCallback!=void 0&&this.mOnTouchStartCallback.length>0&&(f=this.mOnTouchStartCallback+"("+this.mWorld.gerRelativeX(d)+","+this.mWorld.gerRelativeY(c)+");",this.mScript.execScript(f,0));b==2&&this.mOnTouchEndCallback!=void 0&&this.mOnTouchEndCallback.length>
0&&(f=this.mOnTouchEndCallback+"("+this.mWorld.gerRelativeX(d)+","+this.mWorld.gerRelativeY(c)+", "+e+");",this.mScript.execScript(f,0))};GameonApp.prototype.getStringFromFile=function(b){var d=new XMLHttpRequest;d.open("GET","res/"+b,!1);d.send();return d.responseText};function color_get(b){b=b.toLowerCase();b=colors.color[b];return b==void 0?"000000":b}
function Colors(){this.color=[];this.color.aliceblue="F0F8FF";this.color.antiquewhite="FAEBD7";this.color.aqua="00FFFF";this.color.aquamarine="7FFFD4";this.color.azure="F0FFFF";this.color.beige="F5F5DC";this.color.bisque="FFE4C4";this.color.black="000000";this.color.blanchedalmond="FFEBCD";this.color.blue="0000FF";this.color.blueviolet="8A2BE2";this.color.brown="A52A2A";this.color.burlywood="DEB887";this.color.cadetblue="5F9EA0";this.color.chartreuse="7FFF00";this.color.chocolate="D2691E";this.color.coral=
"FF7F50";this.color.cornflowerblue="6495ED";this.color.cornsilk="FFF8DC";this.color.crimson="DC143C";this.color.cyan="00FFFF";this.color.darkblue="00008B";this.color.darkcyan="008B8B";this.color.darkgoldenrod="B8860B";this.color.darkgray="A9A9A9";this.color.darkgreen="006400";this.color.darkkhaki="BDB76B";this.color.darkmagenta="8B008B";this.color.darkolivegreen="556B2F";this.color.darkorange="FF8C00";this.color.darkorchid="9932CC";this.color.darkred="8B0000";this.color.darksalmon="E9967A";this.color.darkseagreen=
"8FBC8F";this.color.darkslateblue="483D8B";this.color.darkslategray="2F4F4F";this.color.darkturquoise="00CED1";this.color.darkviolet="9400D3";this.color.deeppink="FF1493";this.color.deepskyblue="00BFFF";this.color.dimgray="696969";this.color.dodgerblue="1E90FF";this.color.firebrick="B22222";this.color.floralwhite="FFFAF0";this.color.forestgreen="228B22";this.color.fuchsia="FF00FF";this.color.gainsboro="DCDCDC";this.color.ghostwhite="F8F8FF";this.color.gold="FFD700";this.color.goldenrod="DAA520";this.color.gray=
"808080";this.color.green="008000";this.color.greenyellow="ADFF2F";this.color.honeydew="F0FFF0";this.color.hotpink="FF69B4";this.color["indianred "]="CD5C5C";this.color["indigo "]="4B0082";this.color.ivory="FFFFF0";this.color.khaki="F0E68C";this.color.lavender="E6E6FA";this.color.lavenderblush="FFF0F5";this.color.lawngreen="7CFC00";this.color.lemonchiffon="FFFACD";this.color.lightblue="ADD8E6";this.color.lightcoral="F08080";this.color.lightcyan="E0FFFF";this.color.lightgoldenrodyellow="FAFAD2";this.color.lightgrey=
"D3D3D3";this.color.lightgreen="90EE90";this.color.lightpink="FFB6C1";this.color.lightsalmon="FFA07A";this.color.lightseagreen="20B2AA";this.color.lightskyblue="87CEFA";this.color.lightslategray="778899";this.color.lightsteelblue="B0C4DE";this.color.lightyellow="FFFFE0";this.color.lime="00FF00";this.color.limegreen="32CD32";this.color.linen="FAF0E6";this.color.magenta="FF00FF";this.color.maroon="800000";this.color.mediumaquamarine="66CDAA";this.color.mediumblue="0000CD";this.color.mediumorchid="BA55D3";
this.color.mediumpurple="9370D8";this.color.mediumseagreen="3CB371";this.color.mediumslateblue="7B68EE";this.color.mediumspringgreen="00FA9A";this.color.mediumturquoise="48D1CC";this.color.mediumvioletred="C71585";this.color.midnightblue="191970";this.color.mintcream="F5FFFA";this.color.mistyrose="FFE4E1";this.color.moccasin="FFE4B5";this.color.navajowhite="FFDEAD";this.color.navy="000080";this.color.oldlace="FDF5E6";this.color.olive="808000";this.color.olivedrab="6B8E23";this.color.orange="FFA500";
this.color.orangered="FF4500";this.color.orchid="DA70D6";this.color.palegoldenrod="EEE8AA";this.color.palegreen="98FB98";this.color.paleturquoise="AFEEEE";this.color.palevioletred="D87093";this.color.papayawhip="FFEFD5";this.color.peachpuff="FFDAB9";this.color.peru="CD853F";this.color.pink="FFC0CB";this.color.plum="DDA0DD";this.color.powderblue="B0E0E6";this.color.purple="800080";this.color.red="FF0000";this.color.rosybrown="BC8F8F";this.color.royalblue="4169E1";this.color.saddlebrown="8B4513";this.color.salmon=
"FA8072";this.color.sandybrown="F4A460";this.color.seagreen="2E8B57";this.color.seashell="FFF5EE";this.color.sienna="A0522D";this.color.silver="C0C0C0";this.color.skyblue="87CEEB";this.color.slateblue="6A5ACD";this.color.slategray="708090";this.color.snow="FFFAFA";this.color.springgreen="00FF7F";this.color.steelblue="4682B4";this.color.tan="D2B48C";this.color.teal="008080";this.color.thistle="D8BFD8";this.color.tomato="FF6347";this.color.turquoise="40E0D0";this.color.violet="EE82EE";this.color.wheat=
"F5DEB3";this.color.white="FFFFFF";this.color.whitesmoke="F5F5F5";this.color.yellow="FFFF00";this.color.yellowgreen="9ACD32";this.get=color_get}var colors=new Colors;function Room(b){this.qapp=b;this.onInit=[];this.onInfo=[];this.onStart=[];this.onEnd=[];this.onEvent=[];this.onUserJoined=[];this.onUserLeft=[];this.onData=[]}function Q_handlers_script_info(){var b,d,c="";for(d=0;d<Q.handlers.onInfo.length;d++)b=this.onInfo[d],c+=b();return c}function Q_handlers_script_init(){var b,d;for(d=0;d<Q.handlers.onInit.length;d++)b=Q.handlers.onInit[d],b()}function Q_handlers_script_start(){var b,d;for(d=0;d<Q.handlers.onStart.length;d++)b=Q.handlers.onStart[d],b()}
function Q_handlers_script_end(){var b,d;for(d=0;d<Q.handlers.onEnd.length;d++)b=Q.handlers.onEnd[d],b()}function Q_handlers_script_onEvent(b,d){var c,e;for(e=0;e<Q.handlers.onEvent.length;e++)c=Q.handlers.onEvent[e],c(b,d)}function Q_handlers_script_userJoined(b){var d,c;for(c=0;c<Q.handlers.onUserJoined.length;c++)d=Q.handlers.onUserJoined[c],d(b)}function Q_handlers_script_userLeft(b){var d,c;for(d=0;d<Q.handlers.onUserLeft.length;d++)c=Q.handlers.onUserLeft[d],c(b)}
function Q_handlers_script_userData(b,d){var c,e;for(c=0;c<Q.handlers.onData.length;c++)e=Q.handlers.onData[c],e(b,d)};function LayoutArea(){this.scrollers=this.colors=this.border=this.background=this.foreground=this.fields=this.items=this.onfocusgain=this.onfocuslost=this.onclick=this.scale=this.rotation=this.location=this.text=this.items=this.display=this.size=this.bounds=this.state=this.layout=this.id=this.type=void 0}
function Layout(b){this.qapp=b;this.pageid="";this.areacount=this.hudymax=this.hudymin=this.hudxmax=this.hudxmin=this.worldymax=this.worldymin=this.worldxmax=this.worldxmin=this.canvash=this.canvasw=0;this.createLayout=function(b,c,e){var f;e==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","layout");this.qapp.serverko.addSeparator();this.qapp.serverko.appendTag("pageid",b);this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("area");
for(f=0;f<c.length;f++)if(c[f].type!=""){f>0&&this.qapp.serverko.addSeparator();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("type",c[f].type);this.qapp.serverko.addSeparator();if(c[f].id==""||c[f].id==void 0)c[f].id="temparea"+this.areacount,this.areacount++;this.qapp.serverko.appendTag("id",c[f].id);c[f].layout!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("layout",c[f].layout));c[f].state!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("state",
c[f].state));c[f].bounds!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("bounds",c[f].bounds));c[f].size!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("size",c[f].size));c[f].display!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("display",c[f].display));c[f].items!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("items",c[f].items));c[f].text!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("text",
c[f].text));c[f].location!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("location",c[f].location));c[f].onclick!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onclick",c[f].onclick));c[f].onfocuslost!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onfocuslost",c[f].onfocuslost));c[f].onfocusgain!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onfocusgain",c[f].onfocusgain));c[f].foreground!=void 0&&
(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("foreground",c[f].foreground));c[f].background!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("background",c[f].background));c[f].border!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("border",c[f].border));c[f].fields!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("fields",c[f].fields));c[f].colors!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("colors",
c[f].colors));c[f].translation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translation",c[f].translation));c[f].rotation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotation",c[f].rotation));c[f].scale!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale",c[f].scale));c[f].scrollers!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scrollers",c[f].scrollers));this.qapp.serverko.endTag("area")}this.qapp.serverko.endTags("area");
this.qapp.serverko.endTag();e==1&&this.qapp.serverko.sendData(b)};this.println=function(b){this.qapp.serverko.appendEvent_(3180,"stdout",b);return this.qapp.serverko};this.scriptEnd=function(){this.qapp.serverko.appendEvent(2E3,"","");return this.qapp.serverko};this.areaDelete=function(b){this.qapp.serverko.appendEvent(3001,b,"");return this.qapp.serverko};this.areaClear=function(b){this.qapp.serverko.appendEvent(3002,b,"");return this.qapp.serverko};this.areaClearItems=function(b){this.qapp.serverko.appendEvent(3004,
b,"");return this.qapp.serverko};this.itemPlace=function(b,c,e,f,g){this.qapp.serverko.appendEvent(3050,b+"."+c+"|"+g,e+","+f);return this.qapp.serverko};this.itemMove=function(b,c,e,f){this.qapp.serverko.appendEvent(3051,"",b+","+c+","+e+","+f)};this.clientItemMove=function(b,c,e,f,g){this.qapp.serverko.clientAppendEvent(b,3051,"",c+","+e+","+f+","+g)};this.itemMove_=function(b,c,e,f){this.qapp.serverko.appendEvent_(3051,"",b+","+c+","+e+","+f)};this.clientItemMove_=function(b,c,e,f,g){this.qapp.serverko.clientAppendEvent_(b,
3051,"",c+","+e+","+f+","+g)};this.itemRemove=function(b,c){this.qapp.serverko.appendEvent(3052,b,c);return this.qapp.serverko};this.itemMoveA=function(b,c,e,f,g,h,j){this.qapp.serverko.appendEvent(3053,"",b+","+c+","+e+","+f+","+g+","+h+","+j);return this.qapp.serverko};this.itemsAnim=function(b,c,e){this.qapp.serverko.appendEvent(3054,b,c+","+e);return this.qapp.serverko};this.itemAnim=function(b,c,e,f){this.qapp.serverko.appendEvent(3055,b,c+"|"+e+","+f);return this.qapp.serverko};this.areaSetState=
function(b,c){this.qapp.serverko.appendEvent(3110,b,c);return this.qapp.serverko};this.areaSetBounds=function(b,c){this.qapp.serverko.appendEvent(3120,b,c);return this.qapp.serverko};this.areaSetText=function(b,c){this.qapp.serverko.appendEvent(3180,b,c);return this.qapp.serverko};this.areaSetLocation=function(b,c){this.qapp.serverko.appendEvent(3190,b,c);return this.qapp.serverko};this.areaSetScale=function(b,c){this.qapp.serverko.appendEvent(3191,b,c);return this.qapp.serverko};this.areaSetItemScale=
function(b,c,e){this.qapp.serverko.appendEvent(3192,b,c+","+e);return this.qapp.serverko};this.areaSetRotation=function(b,c){this.qapp.serverko.appendEvent(3195,b,c);return this.qapp.serverko};this.areaMove=function(b,c){this.qapp.serverko.appendEvent(3196,b,c);return this.qapp.serverko};this.areaSetOnclick=function(b,c){this.qapp.serverko.appendEvent(3200,b,c);return this.qapp.serverko};this.areaSetOnFocusGain=function(b,c){this.qapp.serverko.appendEvent(3201,b,c);return this.qapp.serverko};this.areaSetOnFocusLost=
function(b,c){this.qapp.serverko.appendEvent(3202,b,c);return this.qapp.serverko};this.areaSetItems=function(b,c){this.qapp.serverko.appendEvent(3220,b,c);return this.qapp.serverko};this.areaAnim=function(b,c,e,f){this.qapp.serverko.appendEvent(3210,b,c,e,f);return this.qapp.serverko};this.areaSetItem=function(b,c,e){this.qapp.serverko.appendEvent(3222,b,c+","+e);return this.qapp.serverko};this.areaInvertItem=function(b,c){this.qapp.serverko.appendEvent(3223,b,c);return this.qapp.serverko};this.areaSetItemB=
function(b,c,e){this.qapp.serverko.appendEvent(3224,b,c+","+e);return this.qapp.serverko};this.areaSetBackground=function(b,c){this.qapp.serverko.appendEvent(3250,b,c);return this.qapp.serverko};this.areaSetFields=function(b,c){this.qapp.serverko.appendEvent(3270,b,c);return this.qapp.serverko};this.updateBack=function(b,c,e,f){this.areaSetBackground(b,e);e="Q.startUpdate();Q.layout.areaSetBackground(";e+="'"+b+"','"+f+"'";e+=");Q.sendUpdate();";this.qapp.evals_(c,e)};this.updateBack_=function(b,
c,e,f){this.startUpdate();this.areaSetBackground(b,e);this.sendUpdate();e="Q.startUpdate();Q.layout.areaSetBackground(";e+="'"+b+"','"+f+"'";e+=");Q.sendUpdate();";this.qapp.evals_(c,e)};this.add=function(b,c){this.createLayout(b,c,0);return this.qapp.serverko};this.show=function(b){this.qapp.serverko.appendEvent(2010,b,"");return this.qapp.serverko};this.showAnim=function(b,c){this.qapp.serverko.appendEvent(2011,b,c);return this.qapp.serverko};this.popup=function(b){this.qapp.serverko.appendEvent(2012,
b,"");return this.qapp.serverko};this.popupAnim=function(b,c){this.qapp.serverko.appendEvent(2013,b,c);return this.qapp.serverko};this.clear=function(b){this.qapp.serverko.appendEvent(2015,b,"");return this.qapp.serverko};this.hide=function(b){this.qapp.serverko.appendEvent(2020,b,"");return this.qapp.serverko};this.hideAnim=function(b,c){this.qapp.serverko.appendEvent(2021,b,c);return this.qapp.serverko};this.editText=function(b,c){this.qapp.serverko.appendEvent(1002,b,c);return this.qapp.serverko};
this.anim=function(b,c){this.qapp.serverko.appendEvent(2030,b,c);return this.qapp.serverko};this.startUpdate=function(){this.qapp.startUpdate()};this.sendUpdate=function(){this.qapp.sendUpdate()};this.areaSetScrollers=function(b,c){this.qapp.serverko.appendEvent(3400,b,c);return this.qapp.serverko};this.areaPushItemFront=function(b,c){this.qapp.serverko.appendEvent(3225,b,c);return this.qapp.serverko}}
function Textures(b){this.qapp=b;this.newFromFile=function(b,c){this.qapp.serverko.appendEvent(4E3,b,c);return this.qapp.serverko};this.remove=function(b){this.qapp.serverko.appendEvent(4001,b);return this.qapp.serverko};this.createTextures=function(b,c){var e;c==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","texts");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("texture");for(e=0;e<b.length;e++)e>
0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),b[e].name!=void 0&&this.qapp.serverko.appendTag("name",b[e].name),b[e].file!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("file",b[e].file)),this.qapp.serverko.endTag("texture");this.qapp.serverko.endTags("texture");this.qapp.serverko.endTag();c==1&&this.qapp.serverko.sendData()};this.add=function(b){this.createTextures(b,0);return this.qapp.serverko}}function Texture(){this.file=this.name=void 0}
function Sounds(b){this.qapp=b;this.newFromFile=function(b,c){this.qapp.serverko.appendEvent(5E3,b,c);return this.qapp.serverko};this.play=function(b){this.qapp.serverko.appendEvent(5010,"play",b);return this.qapp.serverko};this.volume=function(b){this.qapp.serverko.appendEvent(5011,b,"");return this.qapp.serverko};this.mute=function(b){this.qapp.serverko.appendEvent(5012,"mute",b);return this.qapp.serverko}}function Model(){this.submodels=this.texture=this.template=this.name=void 0}
function Models(b){this.qapp=b;this.newFromTemplate=function(b,c){this.qapp.serverko.appendEvent(6001,b,c);return this.qapp.serverko};this.setTexture=function(b,c,e){e!=void 0?this.qapp.serverko.appendEvent(6002,b,c+";"+e):this.qapp.serverko.appendEvent(6002,b,c);return this.qapp.serverko};this.create=function(b){this.qapp.serverko.appendEvent(6003,b,"");return this.qapp.serverko};this.setSubmodels=function(b,c){this.qapp.serverko.appendEvent(6004,b,c);return this.qapp.serverko};this.newEmpty=function(b){this.qapp.serverko.appendEvent(6005,
b,"");return this.qapp.serverko};this.addShape=function(b,c,e,f,g){this.qapp.serverko.appendEvent(6006,b,c,e,f,g);return this.qapp.serverko};this.addShapeFromData=function(b,c,e){this.qapp.serverko.appendEvent(6007,b,c,e);return this.qapp.serverko};this.newFromFile=function(b,c){this.qapp.serverko.appendEvent(6008,b,c);return this.qapp.serverko};this.createModels=function(b,c){var e;c==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res",
"models");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("model");for(e=0;e<b.length;e++)e>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),b[e].name!=void 0&&this.qapp.serverko.appendTag("name",b[e].name),b[e].template!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("template",b[e].template)),b[e].texture!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("texture",b[e].texture)),b[e].submodels!=void 0&&(this.qapp.serverko.addSeparator(),
this.qapp.serverko.appendTag("submodels",b[e].submodels)),this.qapp.serverko.endTag("model");this.qapp.serverko.endTags("model");this.qapp.serverko.endTag();c==1&&this.qapp.serverko.sendData()};this.add=function(b){this.createModels(b,0);return this.qapp.serverko}}function PadDigits2(b,d,c){b=b.toString();b.length>d&&(b=b.slice(0,d));var e="",f="";if(d>b.length)for(i=0;i<(d-b.length)/2;i++)e+=c,f+=c;return e+b.toString()+f}
function PadDigits(b,d){b=b.toString();b.length>d&&(b=b.slice(0,d));var c="";if(d>b.length)for(i=0;i<d-b.length;i++)c+="0";return c+b.toString()}function PadStringC(b,d,c){var b=b.toString(),e="",f="";if(d>b.length)for(i=0;i<d-b.length;i++)i%2==0?e+=c:f+=c;return e+b.toString()+f}function PadString(b,d,c){b=b.toString();b.length>d&&(b=b.slice(0,d));var e=b;if(d>b.length)for(i=0;i<d-b.length;i++)e+=c;return e};var qsupportold=0;function print(b){console.log(b+"\n\r")}
function Serverko(){this.databuffer=[];this.clientbuffer=[];this.sendbuffer=[];this.startData=function(){this.databuffer.length>300&&console.log("ERROR: data push large "+this.databuffer[300]);this.databuffer.push([])};this.appendEvent=function(b,d,c,e,f,g){this.databuffer.length==0&&this.databuffer.push([]);var h="";this.databuffer.length>0&&this.databuffer[this.databuffer.length-1].length!=0&&(h+=",");h+='{"res":"event","id":"'+b+'","type":"'+d;c!=void 0&&(h+='","data":"'+c);e!=void 0&&(h+='","data2":"'+
e);f!=void 0&&(h+='","data3":"'+f);g!=void 0&&(h+='","data4":"'+g);h+='"}';this.databuffer[this.databuffer.length-1].push(h)};this.appendEvent_=function(b,d,c,e,f,g){this.startData();var h="";this.databuffer.length>0&&this.databuffer[this.databuffer.length-1].length!=0&&(h+=",");h+='{"res":"event","id":"'+b+'","type":"'+d;c!=void 0&&(h+='","data":"'+c);e!=void 0&&(h+='","data2":"'+e);f!=void 0&&(h+='","data3":"'+f);g!=void 0&&(h+='","data4":"'+g);h+='"}';this.databuffer[this.databuffer.length-1].push(h);
this.sendData()};this.sendData=function(){if(this.databuffer.length>0){arr=this.databuffer.pop();for(data="";arr.length>0;)data+=arr.shift();this.sendbuffer.push('{"gs":{"room":['+data+"]}}\r\n")}};this.clientStartData=function(){this.lastLen=0;this.clientbuffer.length>300&&console.error("ERROR: client data push large "+this.clientbuffer[3]);this.clientbuffer.push([])};this.clientAppendEvent=function(b,d,c,e,f,g,h){b="";this.clientbuffer[this.clientbuffer.length-1].length!=0&&(b+=",");b+='{"res":"event","id":"'+
d+'","type":"'+c+'","data":"'+e+'"}';f!=void 0&&(b+='","data2":"'+f);g!=void 0&&(b+='","data3":"'+g);h!=void 0&&(b+='","data4":"'+h);this.clientbuffer[this.clientbuffer.length-1].push(b)};this.clientAppendEvent_=function(b,d,c,e,f,g,h){this.clientStartData(b);var j="";this.clientbuffer[this.clientbuffer.length-1].length!=0&&(j+=",");j+='{"res":"event","id":"'+d+'","type":"'+c+'","data":"'+e+'"}';f!=void 0&&(j+='","data2":"'+f);g!=void 0&&(j+='","data3":"'+g);h!=void 0&&(j+='","data4":"'+h);this.clientbuffer[this.clientbuffer.length-
1].push(j);this.clientSendData(b)};this.clientSendData=function(){if(this.clientbuffer.length>0){arr=this.clientbuffer.pop();for(data="";arr.length>0;)data+=arr.shift();this.sendbuffer.push('{"gs":{"room":['+data+"]}}\r\n")}};this.reserveSpace=function(){this.databuffer.length==0&&this.databuffer.push([]);arr=this.databuffer[this.databuffer.length-1];arr.push("")};this.startTag=function(b){if(this.databuffer.length>0)this.lastLen=this.databuffer[this.databuffer.length-1].length;arr=this.databuffer[this.databuffer.length-
1];arr[arr.length-1]+=b!=void 0?'{"'+b+'": ':"{"};this.startTags=function(b){arr=this.databuffer[this.databuffer.length-1];arr[arr.length-1]+='"'+b+'": ['};this.appendTag=function(b,d){arr=this.databuffer[this.databuffer.length-1];arr[arr.length-1]+='"'+b+'": "'+d+'"'};this.endTag=function(){arr=this.databuffer[this.databuffer.length-1];arr[arr.length-1]+="}"};this.endTags=function(){arr=this.databuffer[this.databuffer.length-1];arr[arr.length-1]+="]"};this.addSeparator=function(){arr=this.databuffer[this.databuffer.length-
1];arr[arr.length-1]+=","};this.loadModule=function(b){this.appendEvent(102,b)};this.loadModule2=function(b){this.appendEvent(103,b,"")};this.trace=function(b){console.log(b)};this.sendEvent=function(b,d,c){this.appendEvent(100,d,"Q.handlers.script_onEvent("+b+",'"+c+"');")};this.clientSpectate=function(){};this.getData=function(){return this.sendbuffer.length>0?this.sendbuffer.shift():""};this.toUser=function(){arr=this.databuffer[this.databuffer.length-1];str=arr.pop();this.clientbuffer[this.clientbuffer.length-
1].push(str);return this};this.toUserNow=function(){arr=this.databuffer[this.databuffer.length-1];str=arr.pop();this.sendbuffer.push('{"gs":{"room":['+str+"]}}\r\n");return this};this.now=function(){arr=this.databuffer[this.databuffer.length-1];str=arr.pop();this.sendbuffer.push('{"gs":{"room":['+str+"]}}\r\n");return this}}console.log(" serverko bridge load ok");function Camera(b){this.qapp=b;this.fit=function(b,c,e){e==void 0?this.qapp.appendEvent(2500,"fit",b+","+c,"world"):this.qapp.appendEvent(2500,"fit",b+","+c,e);return this.qapp.serverko};this.set=function(b,c,e,f,g,h,j){j==void 0?this.qapp.appendEvent(2501,b+","+c+","+e,f+","+g+","+h,"world"):this.qapp.appendEvent(2501,b+","+c+","+e,f+","+g+","+h,j);return this.qapp.serverko};this.move=function(b,c,e,f,g,h,j,l){l==void 0?this.qapp.appendEvent(2504,c+","+e+","+f,g+","+h+","+j,"world",b):this.qapp.appendEvent(2504,
c+","+e+","+f,g+","+h+","+j,l,b);return this.qapp.serverko};this.proj=function(b,c,e,f){f==void 0?this.qapp.appendEvent(2502,b,c,e,"world"):this.qapp.appendEvent(2502,b,c,e,f);return this.qapp.serverko};this.projHud=function(b,c,e){this.qapp.appendEvent(2502,b,c,e,"hud");return this.qapp.serverko};this.fitHud=function(b,c){this.qapp.appendEvent(2500,"fit",b+","+c,"hud");return this.qapp.serverko};this.setHud=function(b,c,e,f,g,h){this.qapp.appendEvent(2501,b+","+c+","+e,f+","+g+","+h,"hud");return this.qapp.serverko}}
function Connect(b){this.qapp=b;this.connect=function(b,c){this.qapp.appendEvent(7E3,b,c);return this.qapp.serverko};this.disconnect=function(){this.qapp.appendEvent(7003,"","");return this.qapp.serverko};this.join=function(b,c,e){this.qapp.appendEvent(7001,b+"|"+c,e);return this.qapp.serverko};this.send=function(b){this.qapp.appendEvent(7002,b,"");return this.qapp.serverko};this.get=function(b,c){this.qapp.appendEvent(7005,b,c);return this.qapp.serverko}}
function Env(b){this.qapp=b;this.set=function(b,c){this.qapp.appendEvent(200,b,c);return this.qapp.serverko};this.registerOnTouch=function(b){this.qapp.appendEvent(201,b);return this.qapp.serverko};this.registerOnTouchStart=function(b){this.qapp.appendEvent(202,b);return this.qapp.serverko};this.registerOnTouchEnd=function(b){this.qapp.appendEvent(203,b);return this.qapp.serverko}}
function Settings(b){this.qapp=b;this.open=function(){this.qapp.appendEvent(2600,"","");return this.qapp.serverko};this.save=function(){this.qapp.appendEvent(2601,"","");return this.qapp.serverko};this.writeInt=function(b,c){this.qapp.appendEvent(2610,b,c);return this.qapp.serverko};this.writeString=function(b,c){this.qapp.appendEvent(2611,b,c);return this.qapp.serverko};this.loadInt=function(b,c){this.qapp.appendEvent(2620,b,c);return this.qapp.serverko};this.loadString=function(b,c){this.qapp.appendEvent(2621,
b,c);return this.qapp.serverko};this.loadArray=function(b,c){this.qapp.appendEvent(2622,b,c);return this.qapp.serverko}}function Client(b){this.qapp=b;this.allevals=function(b,c){this.qapp.appendEvent(101,b,c);return this.qapp.serverko};this.evals=function(b,c,e){this.qapp.clientAppendEvent(b,101,c,e);return this.qapp.serverko}}
function Util(b){this.qapp=b;this.touchonoff=function(b){b==void 0&&(b=1E3);this.qapp.env.set("touch","off");this.qapp.evals(b,"Q.env.set('touch','on').now();")};this.touchonoff_=function(b){b==void 0&&(b=1E3);this.qapp.env.set("touch","off").now();this.qapp.evals(b,"Q.env.set('touch','on').now();").now()};this.indexOf=function(b,c,e){for(var f=b.length,e=e==null?0:e;e<f;e++)if(b[e]==c)return e;return-1};this.arrayRemove=function(b,c){for(var e=0;e<b.length;e++)b[e]==c&&b.splice(e,1)};this.tob64=
function(b){return"#64#"+Base64.encode(b)}}function Anim(b){this.qapp=b;this.move=function(b,c,e,f){this.qapp.appendEvent(4200,b,c,e,f);return this.qapp.serverko};this.rotate=function(b,c,e,f){this.qapp.appendEvent(4210,b,c,e,f);return this.qapp.serverko};this.object=function(b,c,e,f){this.qapp.appendEvent3(4300,b,c,e,f);return this.qapp.serverko}}function WorldObject(){this.onclick=this.iter=this.state=this.color=this.texture=this.rotate=this.bounds=this.location=this.template=this.name=void 0}
function Objects(b){this.qapp=b;this.create=function(b,c){this.qapp.appendEvent(4100,b,c);return this.qapp.serverko};this.place=function(b,c){this.qapp.appendEvent(4110,b,c);return this.qapp.serverko};this.remove=function(b,c){this.qapp.appendEvent(4150,b,c);return this.qapp.serverko};this.scale=function(b,c){this.qapp.appendEvent(4120,b,c);return this.qapp.serverko};this.rotate=function(b,c){this.qapp.appendEvent(4160,b,c);return this.qapp.serverko};this.texture=function(b,c,e){this.qapp.appendEvent(4130,
b,c,e);return this.qapp.serverko};this.state=function(b,c){this.qapp.appendEvent(4140,b,c);return this.qapp.serverko};this.createObjects=function(b,c){var e;c==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","objs");this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("object");for(e=0;e<b.length;e++)e>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),b[e].name!=void 0&&this.qapp.serverko.appendTag("name",
b[e].name),b[e].template!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("template",b[e].template)),b[e].location!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("location",b[e].location)),b[e].bounds!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("bounds",b[e].bounds)),b[e].texture!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("texture",b[e].texture)),b[e].color!=void 0&&(this.qapp.serverko.addSeparator(),
this.qapp.serverko.appendTag("color",b[e].color)),b[e].state!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("state",b[e].state)),b[e].iter!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("iter",b[e].iter)),b[e].onclick!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("onclick",b[e].onclick)),this.qapp.serverko.endTag("object");this.qapp.serverko.endTags("object");this.qapp.serverko.endTag();c==1&&this.qapp.serverko.sendData()};
this.add=function(b){this.createObjects(b,0);return this.qapp.serverko}}function Box2dModel(){this.template=this.type=this.refid=this.name=void 0}
function Box2DClass(b){this.qapp=b;this.create=function(b,c,e){this.qapp.appendEvent(9E3,b,c,e);return this.qapp.serverko};this.remove=function(b){this.qapp.appendEvent(9001,b);return this.qapp.serverko};this.createObjects=function(b,c,e){e==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","box2dobjs");this.qapp.serverko.addSeparator();this.qapp.serverko.appendTag("worldid",b);this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("object");
for(b=0;b<c.length;b++)b>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),c[b].name!=void 0&&this.qapp.serverko.appendTag("name",c[b].name),c[b].type!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("type",c[b].type)),c[b].refid!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("refid",c[b].refid)),c[b].template!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("template",c[b].template)),c[b].groupIndex!=void 0&&
(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("groupIndex",c[b].groupIndex)),c[b].friction!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("friction",c[b].friction)),c[b].density!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("density",c[b].density)),c[b].restitution!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("restitution",c[b].restitution)),this.qapp.serverko.endTag("object");this.qapp.serverko.endTags("object");
this.qapp.serverko.endTag();e==1&&this.qapp.serverko.sendData()};this.add=function(b,c){this.createObjects(b,c,0);return this.qapp.serverko}}
function RenderDomains(b){this.qapp=b;this.create=function(b,c,e){this.qapp.serverko.appendEvent(8E3,b,c,e);return this.qapp.serverko};this.remove=function(b){this.qapp.serverko.appendEvent(8001,b,"");return this.qapp.serverko};this.show=function(b){this.qapp.serverko.appendEvent(8002,b);return this.qapp.serverko};this.hide=function(b){this.qapp.serverko.appendEvent(8003,b);return this.qapp.serverko};this.panning=function(b,c,e,f,g,h,j){this.qapp.serverko.appendEvent(8004,b,c,e,f+","+g+","+h+","+
j);return this.qapp.serverko}}function AnimFrame(){this.operation=this.offset=this.translate2=this.scale2=this.rotate2=this.translate=this.scale=this.rotate=void 0}function AnimType(){this.id=void 0;this.frames=[];this.repeat=this.delay=void 0}
function Animations(b){this.qapp=b;this.add=function(b){this.createAnim(b,0);return this.qapp.serverko};this.createAnim=function(b,c){var e;c==1&&this.qapp.serverko.startData();this.qapp.serverko.reserveSpace();this.qapp.serverko.startTag();this.qapp.serverko.appendTag("res","animation");this.qapp.serverko.addSeparator();this.qapp.serverko.appendTag("id",b.id);b.delay!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("delay",b.delay));b.repeat!=void 0&&(this.qapp.serverko.addSeparator(),
this.qapp.serverko.appendTag("repeat",b.repeat));this.qapp.serverko.addSeparator();this.qapp.serverko.startTags("frames");for(e=0;e<b.frames.length;e++)b.frames[e].id!=""&&(e>0&&this.qapp.serverko.addSeparator(),this.qapp.serverko.startTag(),this.qapp.serverko.appendTag("id",b.frames[e].id),b.frames[e].rotate!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotate",b.frames[e].rotate)),b.frames[e].scale!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale",
b.frames[e].scale)),b.frames[e].translate!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translate",b.frames[e].translate)),b.frames[e].rotate2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("rotate2",b.frames[e].rotate2)),b.frames[e].scale2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("scale2",b.frames[e].scale2)),b.frames[e].translate2!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("translate2",
b.frames[e].translate2)),b.frames[e].operation!=void 0&&(this.qapp.serverko.addSeparator(),this.qapp.serverko.appendTag("operation",b.frames[e].operation)),this.qapp.serverko.endTag());this.qapp.serverko.endTags("frames");this.qapp.serverko.endTag();c==1&&this.qapp.serverko.sendData()}}
function Scores(){this.login=function(b){serverko.appendEvent(500,"",b);return this.qapp.serverko};this.submit=function(b,d){serverko.appendEvent(510,b,d);return this.qapp.serverko};this.showscores=function(b,d){serverko.appendEvent(520,b,d);return this.qapp.serverko};this.reload=function(b,d){serverko.appendEvent(521,b,d);return this.qapp.serverko}}
function QApp(){this.evals=function(b,d){this.appendEvent(101,b,d);return this.serverko};this.goUrl=function(b,d){this.appendEvent(1200,b,d);return this.serverko};this.serverko=new Serverko;this.layout=new Layout(this);this.textures=new Textures(this);this.sounds=new Sounds(this);this.models=new Models(this);this.settings=new Settings(this);this.camera=new Camera(this);this.env=new Env(this);this.connect=new Connect(this);this.handlers=new Room(this);this.util=new Util(this);this.client=new Client(this);
this.objects=new Objects(this);this.anim=new Anim(this);this.animations=new Animations(this);this.scores=new Scores(this);this.domains=new RenderDomains(this);this.box2d=new Box2DClass(this);this.startUpdate=function(){this.serverko.startData()};this.sendUpdate=function(){this.serverko.sendData()};this.clientStartUpdate=function(b){this.serverko.clientStartData(b)};this.clientSendUpdate=function(b){this.serverko.clientSendData(b)};this.appendEvent=function(b,d,c,e,f,g){this.serverko.appendEvent(b,
d,c,e,f,g)};this.clientAppendEvent=function(b,d,c,e,f,g,h){this.serverko.clientAppendEvent(b,d,c,e,f,g,h)};this.println=function(b){this.layout.print(b);return this.serverko};this.event=function(b,d,c){this.serverko.sendEvent(b,d,c);return this.serverko};this.include=function(b){this.serverko.loadModule(b);return this.serverko};this.load=function(b){this.serverko.loadModule2(b);return this.serverko}}var Q=new QApp;console.log(" q ok");var sysareas=[];areaStdOut=new LayoutArea;areaStdOut.type="table.list";
areaStdOut.id="stdout";areaStdOut.location="0,0,2,2";areaStdOut.size="20,10,1";areaStdOut.display="hud";sysareas.push(areaStdOut);Q.layout.add("*",sysareas).now();var frame=new AnimFrame;frame.translate2="0,0,0";var anim=new AnimType;anim.id="move";anim.frames.push(frame);Q.animations.add(anim).now();frame=new AnimFrame;frame.rotate="0,0,0";anim=new AnimType;anim.id="rotate";anim.frames.push(frame);Q.animations.add(anim).now();frame=new AnimFrame;frame.rotate="0,0,360";frame.operation="add";
anim=new AnimType;anim.id="rotateadd";anim.frames.push(frame);Q.animations.add(anim).now();var frame1=new AnimFrame;frame1.scale="0.001,0.001,0.001";var frame2=new AnimFrame;frame2.scale="1.0,1.0,1.0";anim=new AnimType;anim.id="spawn";anim.frames.push(frame1);anim.frames.push(frame2);Q.animations.add(anim).now();frame1=new AnimFrame;frame1.scale="1.0,1.0,1.0";frame2=new AnimFrame;frame2.scale="1000.0,1000.0,1000.0";anim=new AnimType;anim.id="away";anim.frames.push(frame1);anim.frames.push(frame2);
Q.animations.add(anim).now();frame=new AnimFrame;frame.translate="0,0,0";frame.rotate="0,0,0";frame.scale="0,0,0";frame.translate2="0,0,0";frame.rotate2="0,0,0";frame.scale2="0,0,0";anim=new AnimType;anim.id="transform";anim.frames.push(frame);Q.animations.add(anim).now();anim=new AnimType;anim.id="walk";anim.frames.push(frame);Q.animations.add(anim).now();frame1=new AnimFrame;frame1.scale="1.0,1.0,1.0";frame2=new AnimFrame;frame2.scale="1000.0,1000.0,1000.0";frame2.scale="0.0,100.0,0.0";anim=new AnimType;
anim.frames.push(frame1);anim.frames.push(frame2);Q.animations.add(anim).now();anim=new AnimType;anim.id="walkhigh";for(var div=0.628,a=0;a<6;a++)frame=new AnimFrame,frame.translate2="0,0,"+0.5*Math.sin(a*div),frame.operation="pdist",anim.frames.push(frame);Q.animations.add(anim).now();
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){for(var d="",c,e,f,g,h,j,l=0,b=Base64._utf8_encode(b);l<b.length;)c=b.charCodeAt(l++),e=b.charCodeAt(l++),f=b.charCodeAt(l++),g=c>>2,c=(c&3)<<4|e>>4,h=(e&15)<<2|f>>6,j=f&63,isNaN(e)?h=j=64:isNaN(f)&&(j=64),d=d+this._keyStr.charAt(g)+this._keyStr.charAt(c)+this._keyStr.charAt(h)+this._keyStr.charAt(j);return d},decode:function(b){for(var d="",c,e,f,g,h,j=0,b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<
b.length;)c=this._keyStr.indexOf(b.charAt(j++)),e=this._keyStr.indexOf(b.charAt(j++)),g=this._keyStr.indexOf(b.charAt(j++)),h=this._keyStr.indexOf(b.charAt(j++)),c=c<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|h,d+=String.fromCharCode(c),g!=64&&(d+=String.fromCharCode(e)),h!=64&&(d+=String.fromCharCode(f));return d=Base64._utf8_decode(d)},_utf8_encode:function(b){for(var b=b.replace(/\r\n/g,"\n"),d="",c=0;c<b.length;c++){var e=b.charCodeAt(c);e<128?d+=String.fromCharCode(e):(e>127&&e<2048?d+=String.fromCharCode(e>>
6|192):(d+=String.fromCharCode(e>>12|224),d+=String.fromCharCode(e>>6&63|128)),d+=String.fromCharCode(e&63|128))}return d},_utf8_decode:function(b){for(var d="",c=0,e=c1=c2=0;c<b.length;)e=b.charCodeAt(c),e<128?(d+=String.fromCharCode(e),c++):e>191&&e<224?(c2=b.charCodeAt(c+1),d+=String.fromCharCode((e&31)<<6|c2&63),c+=2):(c2=b.charCodeAt(c+1),c3=b.charCodeAt(c+2),d+=String.fromCharCode((e&15)<<12|(c2&63)<<6|c3&63),c+=3);return d}};function getPositionX(b){var d=new Number,c=document.getElementById("qappcanvas"),d=b.x!=void 0?b.x:b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;d-=c.offsetLeft;return d}function getPositionY(b){var d=new Number,c=document.getElementById("qappcanvas"),d=b.y!=void 0?b.y:b.clientY+document.body.scrollTop+document.documentElement.scrollTop;d-=c.offsetTop;return d}
function QStarter(){this.mApp=new GameonApp;this.height=this.width=-1;this.leftCoord=this.topCoord=0;this.lastTime=(new Date).getTime();this.lastTime2=(new Date).getTime();this.start=function(){if(gl=initWebGL("qappcanvas","vshader","fshader",["vColor","vTexCoord","vPosition"],[0.1,0.1,0.1,1],1)){gl.uniform1i(gl.getUniformLocation(gl.program,"sampler2d"),0);gl.uniform2f(gl.getUniformLocation(gl.program,"texOffset"),0,0);gl.uniform2f(gl.getUniformLocation(gl.program,"texOffsetF"),0,0);gl.enable(gl.TEXTURE_2D);
gl.mvMatrix=new J3DIMatrix4;gl.u_modelViewMatrixLoc=gl.getUniformLocation(gl.program,"u_modelViewMatrix");gl.u_modelProjMatrixLoc=gl.getUniformLocation(gl.program,"u_modelProjMatrix");gl.enableVertexAttribArray(0);gl.enableVertexAttribArray(1);gl.enableVertexAttribArray(2);this.clicked=this.dragging=!1;this.mApp.init();var b=document.getElementById("qappcanvas");this.mApp.mPreExec="CanvasW = "+b.width+";CanvasH = "+b.height+";";this.mApp.start("main.js");this.reshape(gl);return gl}};this.handleMouseUp=
function(b){var d=(new Date).getTime()-this.mPressStart;qstart.mApp.touchEnd(getPositionX(b),getPositionY(b),d);qstart.dragging=!1;qstart.clicked=!1};this.handleMouseDown=function(b){qstart.clicked=!0;this.mPressStart=(new Date).getTime();if(!qstart.mApp.onFocusProbe(getPositionX(b),getPositionY(b)))qstart.dragging=!0,qstart.mApp.touchStart(getPositionX(b),getPositionY(b))};this.handleMouseMove=function(b){qstart.clicked&&qstart.mApp.mouseDragged(getPositionX(b),getPositionY(b),!1)};this.reshape=
function(b){var d=document.getElementById("qappcanvas");if(!(d.width==this.width&&d.height==this.height)){if(d.clientTop!=void 0)this.topCoord=d.clientTop,this.leftCoord=d.clientLeft;b.viewportWidth=d.width;b.viewportHeight=d.height;d.addEventListener("mousedown",this.handleMouseDown,!1);d.addEventListener("mouseup",this.handleMouseUp,!1);d.addEventListener("mousemove",this.handleMouseMove,!1);this.width=d.width;this.height=d.height;this.mApp.surfaceChanged(b,this.width,this.height)}}}
function drawFrame(){qstart.mApp.hasData()==!0&&(qstart.reshape(gl),gl.clearColor(0,0,0,1),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),qstart.mApp.drawFrame(gl),gl.flush());requestAnimFrame(drawFrame)}function qstart(){qstart=new QStarter;(gl=qstart.start())&&drawFrame(gl)};
